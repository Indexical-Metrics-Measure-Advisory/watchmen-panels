(this["webpackJsonpwatchmen-panels"]=this["webpackJsonpwatchmen-panels"]||[]).push([[3],{337:function(t,n){},338:function(t,n){},756:function(t,n,e){"use strict";e.r(n);var r=e(3),o=e(0),a=e(1),i=e.n(a),c=e(5),s=e(2),d=e(7),l=e(9),u=e(26),p=e(388),f=e(97),b=i.a.createContext({});b.displayName="AdminContext";var h=function(t){var n=t.children,e=Object(p.a)(),r=Object(a.useState)((function(){var t;return{name:(null===(t=Object(u.a)())||void 0===t?void 0:t.name)||"Walter Kovacs"}})),i={menu:e,user:Object(l.a)(r,1)[0]};return Object(o.jsx)(b.Provider,{value:i,children:Object(o.jsx)(f.a,{children:n})})},v=e(18),g=e(390),j=e(391),m=e(392),x=e(393),O=e(239);function y(){var t=Object(r.a)(["\n\tflex-grow : 1;\n"]);return y=function(){return t},t}function I(){var t=Object(r.a)(["\n\tdisplay          : flex;\n\tposition         : relative;\n\tflex-direction   : column;\n\talign-items      : flex-start;\n\twidth            : ",";\n\tmin-width        : var(--console-menu-width);\n\theight           : 100vh;\n\ttop              : 0;\n\tleft             : 0;\n\tborder-right     : var(--border);\n\tbackground-color : var(--invert-color);\n\toverflow         : hidden;\n\t// TODO hide tasks button\n\t> div:nth-child(10) {\n\t\tdisplay : none;\n\t}\n"]);return I=function(){return t},t}var w,C,E,T,k,N,A,S,R,D,P,_,L=s.c.div.attrs({"data-widget":"menu-container"})(I(),(function(t){var n=t.width;return"".concat(n,"px")})),M=s.c.div(y()),F=function(){var t=Object(c.g)(),n=Object(c.h)(),e=Object(s.e)(),r=e.consoleMenuWidth,a=e.consoleMenuMaxWidth,l=i.a.useContext(b),u=l.user,p=l.menu,f=p.menuWidth,h=p.setMenuWidth,y=function(e){return function(){Object(c.f)(n.pathname,e)||t.push(e)}},I=f/r<=1.5;return Object(o.jsxs)(L,{width:f,children:[Object(o.jsx)(j.a,{title:"Watchmen Admin"}),Object(o.jsx)(g.a,{icon:v.Q,label:"Home",iconSize:1.2,showTooltip:I,active:!!Object(c.f)(n.pathname,d.a.ADMIN_HOME),onClick:y(d.a.ADMIN_HOME)}),Object(o.jsx)(g.a,{icon:v.Db,label:"Topics",iconSize:1.2,showTooltip:I,active:!!Object(c.f)(n.pathname,d.a.ADMIN_TOPICS),onClick:y(d.a.ADMIN_TOPICS)}),Object(o.jsx)(g.a,{icon:v.R,label:"Reports",iconSize:1.2,showTooltip:I,active:!!Object(c.f)(n.pathname,d.a.ADMIN_REPORTS),onClick:y(d.a.ADMIN_REPORTS)}),Object(o.jsx)(g.a,{icon:v.N,label:"Spaces",iconSize:1.2,showTooltip:I,active:!!Object(c.f)(n.pathname,d.a.ADMIN_SPACES),onClick:y(d.a.ADMIN_SPACES)}),Object(o.jsx)(g.a,{icon:v.Pb,label:"Pipelines",iconSize:1.2,showTooltip:I,active:!!Object(c.f)(n.pathname,d.a.ADMIN_PIPELINE),onClick:y(d.a.ADMIN_PIPELINE)}),Object(o.jsx)(m.a,{width:f}),Object(o.jsx)(g.a,{icon:v.Ob,label:"User Groups",iconSize:1.2,showTooltip:I,active:!!Object(c.f)(n.pathname,d.a.ADMIN_USER_GROUPS),onClick:y(d.a.ADMIN_USER_GROUPS)}),Object(o.jsx)(g.a,{icon:v.Mb,label:"Users",iconSize:1.2,showTooltip:I,active:!!Object(c.f)(n.pathname,d.a.ADMIN_USERS),onClick:y(d.a.ADMIN_USERS)}),Object(o.jsx)(m.a,{width:f}),Object(o.jsx)(g.a,{icon:v.Eb,label:"Tasks",iconSize:1.2,showTooltip:I,active:!!Object(c.f)(n.pathname,d.a.ADMIN_TASKS),onClick:y(d.a.ADMIN_TASKS)}),Object(o.jsx)(M,{}),Object(o.jsx)(m.a,{width:f}),Object(o.jsx)(x.a,{user:u}),Object(o.jsx)(O.a,{width:f,onResize:function(t){h(Math.min(Math.max(t,r),a))}})]})},G=e(74),U=e(28),H=e(758);!function(t){t.NO_FUNC="no-func"}(w||(w={})),function(t){t.YEAR_OF="year-of",t.MONTH_OF="month-of",t.WEEK_OF="week-of",t.WEEKDAY="weekday"}(C||(C={})),function(t){t.PERCENTAGE="percentage",t.ABSOLUTE_VALUE="abs",t.LOGARITHM="log"}(E||(E={})),function(t){t.COUNT="count",t.SUM="sum",t.AVG="avg",t.MAX="max",t.MIN="min",t.MEDIAN="med"}(T||(T={})),function(t){t.IN_MEMORY="in-memory",t.FACTOR="factor"}(k||(k={})),function(t){t.EMPTY="empty",t.NOT_EMPTY="not-empty",t.EQUALS="equals",t.NOT_EQUALS="not-equals",t.LESS="less",t.LESS_EQUALS="less-equals",t.MORE="more",t.MORE_EQUALS="more-equals",t.IN="in",t.NOT_IN="not-in"}(N||(N={})),function(t){t.AND="and",t.OR="or"}(A||(A={})),function(t){t.ALARM="alarm",t.COPY_TO_MEMORY="copy-to-memory"}(S||(S={})),function(t){t.READ_ROW="read-row",t.READ_FACTOR="read-factor",t.EXISTS="exists"}(R||(R={})),function(t){t.MERGE_ROW="merge-row",t.INSERT_ROW="insert-row",t.INSERT_OR_MERGE_ROW="insert-or-merge-row",t.WRITE_FACTOR="write-factor"}(D||(D={})),function(t){t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.CRITICAL="critical"}(P||(P={})),function(t){t.INSERT="insert",t.MERGE="merge",t.INSERT_OR_MERGE="insert-or-merge",t.DELETE="delete"}(_||(_={}));var z,B,W=e(15),Y=e(25),V=e(14);!function(t){t.SEQUENCE="sequence",t.NUMBER="number",t.TEXT="text",t.DATETIME="datetime",t.BOOLEAN="boolean",t.ENUM="enum",t.OBJECT="object",t.ARRAY="array"}(z||(z={})),function(t){t.RAW="raw",t.DISTINCT="distinct",t.AGGREGATE="aggregate",t.TIME="time",t.RATIO="ratio",t.NOT_DEFINED="not-defined"}(B||(B={}));var q,Q=e(19),J=e.n(Q),X=e(23),K=e(82),Z=e(30),$=[{topicId:"1",code:"quotation",name:"Quotation",type:B.DISTINCT,raw:!1,factorCount:6,reportCount:5,groupCount:3,spaceCount:2,factors:[{factorId:"101",name:"quotationId",label:"Quotation Sequence",type:z.SEQUENCE},{factorId:"102",name:"quoteNo",label:"Quotation No.",type:z.TEXT},{factorId:"103",name:"quoteDate",label:"Quotation Create Date",type:z.DATETIME},{factorId:"104",name:"policyHolderId",label:"Policy Holder Id",type:z.SEQUENCE},{factorId:"105",name:"premium",label:"Premium",type:z.NUMBER},{factorId:"106",name:"issued",label:"Issued",type:z.BOOLEAN}]},{topicId:"2",code:"policy",name:"Policy",type:B.DISTINCT,raw:!1,factorCount:7,reportCount:4,groupCount:3,spaceCount:2,factors:[{factorId:"201",name:"policyId",label:"Policy Sequence",type:z.SEQUENCE},{factorId:"202",name:"quotationNo",label:"Quotation No.",type:z.TEXT},{factorId:"203",name:"quoteDate",label:"Quotation Create Date",type:z.DATETIME},{factorId:"204",name:"policyNo",label:"Policy No.",type:z.TEXT},{factorId:"205",name:"issueDate",label:"Policy Issue Date",type:z.DATETIME},{factorId:"206",name:"policyHolderId",label:"Policy Holder Id",type:z.SEQUENCE},{factorId:"207",name:"premium",label:"Premium",type:z.NUMBER}]},{topicId:"3",code:"participant",name:"Participant",type:B.DISTINCT,description:"Participant of quotation or policy, including policy holder, insureds, etc.",raw:!1,factorCount:6,reportCount:2,groupCount:3,spaceCount:2,factors:[{factorId:"301",name:"participantId",label:"Participant Sequence",type:z.SEQUENCE},{factorId:"302",name:"firstName",label:"First Name",type:z.TEXT},{factorId:"303",name:"lastName",label:"Last Name",type:z.TEXT},{factorId:"304",name:"fullName",label:"Full Name",type:z.TEXT},{factorId:"305",name:"dateOfBirth",label:"Birth Date",type:z.DATETIME},{factorId:"306",name:"gender",label:"Gender",type:z.ENUM},{factorId:"307",name:"city",label:"City",type:z.ENUM}]},{topicId:"4",code:"raw-quotation",name:"Raw Quotation",type:B.RAW,raw:!0,factorCount:10,reportCount:0,groupCount:0,spaceCount:0,factors:[{factorId:"401",name:"quotationId",label:"Quotation Sequence",type:z.SEQUENCE},{factorId:"402",name:"quotationNo",label:"Quotation No.",type:z.TEXT},{factorId:"403",name:"quoteDate",label:"Quotation Create Date",type:z.DATETIME},{factorId:"404",name:"policyNo",label:"Policy No.",type:z.TEXT},{factorId:"405",name:"issueDate",label:"Issue Date",type:z.DATETIME},{factorId:"406",name:"holderId",label:"Holder Id",type:z.SEQUENCE},{factorId:"407",name:"holderFirstName",label:"Holder First Name",type:z.TEXT},{factorId:"408",name:"holderLastName",label:"Holder Last Name",type:z.TEXT},{factorId:"410",name:"holderDateOfBirth",label:"Policy Holder Birth Date",type:z.DATETIME},{factorId:"411",name:"holderGender",label:"Holder Gender",type:z.ENUM},{factorId:"412",name:"holderCity",label:"Holder City",type:z.ENUM},{factorId:"413",name:"premium",label:"Premium",type:z.NUMBER}]},{topicId:"5",code:"weekly-policy-premium",name:"Weekly Policy Premium",type:B.TIME,raw:!1,factorCount:3,reportCount:0,groupCount:0,spaceCount:0,factors:[{factorId:"501",name:"year",label:"Year",type:z.NUMBER},{factorId:"502",name:"week",label:"Week",type:z.NUMBER},{factorId:"503",name:"premium",label:"Premium Sum",type:z.NUMBER}]},{topicId:"6",code:"monthly-policy-premium",name:"Monthly Policy Premium",type:B.TIME,raw:!1,factorCount:3,reportCount:0,groupCount:0,spaceCount:0,factors:[{factorId:"601",name:"year",label:"Year",type:z.NUMBER},{factorId:"602",name:"month",label:"Month",type:z.NUMBER},{factorId:"603",name:"premium",label:"Premium Sum",type:z.NUMBER}]},{topicId:"7",code:"raw-endorsement",name:"Raw Endorsement",type:B.RAW,raw:!0,factorCount:10,reportCount:0,groupCount:0,spaceCount:0,factors:[{factorId:"701",name:"endorsementId",label:"Endorsement Sequence",type:z.SEQUENCE},{factorId:"702",name:"endorsementNo",label:"Endorsement No.",type:z.TEXT},{factorId:"703",name:"endorsementDate",label:"Endorsement Create Date",type:z.DATETIME},{factorId:"704",name:"policyNo",label:"Policy No.",type:z.TEXT},{factorId:"705",name:"effectiveDate",label:"Effective Date",type:z.DATETIME},{factorId:"706",name:"premium",label:"Premium",type:z.NUMBER}]},{topicId:"8",code:"weekly-policy-premium-increment",name:"Weekly Policy Premium Increment",type:B.RATIO,raw:!1,factorCount:3,reportCount:0,groupCount:0,spaceCount:0,factors:[{factorId:"801",name:"year",label:"Year",type:z.NUMBER},{factorId:"802",name:"week",label:"Week",type:z.NUMBER},{factorId:"803",name:"incrementRatio",label:"Increment Ratio",type:z.NUMBER}]}],tt=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,r,o,a,i,c;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(Z.b)()){t.next=5;break}return e=n.pageNumber,r=void 0===e?1:e,o=n.pageSize,a=void 0===o?9:o,t.abrupt("return",new Promise((function(t){setTimeout((function(){t({data:$,itemCount:$.length,pageNumber:r,pageSize:a,pageCount:3})}),3e3)})));case 5:return t.next=7,fetch("".concat(Object(Z.a)(),"topic/name?query_name=").concat(n.search),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageNumber:n.pageNumber,pageSize:n.pageSize})});case 7:return i=t.sent,t.next=10,i.json();case 10:return c=t.sent,t.abrupt("return",c);case 12:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),nt=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,r,o,a,i=arguments;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.length>1&&void 0!==i[1]?i[1]:100,console.log(Object(Z.b)()),!Object(Z.b)()){t.next=6;break}return t.abrupt("return",new Promise((function(t){setTimeout((function(){return t({data:$,completed:!0})}),1e3)})));case 6:return t.next=8,fetch("".concat(Object(Z.a)(),"topic/all"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageNumber:n,pageSize:e})});case 8:return r=t.sent,t.next=11,r.json();case 11:return o=t.sent,a=!1,o.itemCount<o.pageSize&&(a=!0),t.abrupt("return",{data:o.data,completed:a});case 15:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),et={topicId:"2",consume:[{topicId:"4",type:_.INSERT,stages:[{units:[{do:[{type:D.WRITE_FACTOR,topicId:"2",factorId:"201",value:{type:k.FACTOR,topicId:"4",factorId:"401"}}]}]}]},{topicId:"7",type:_.INSERT,stages:[{units:[{do:[{type:D.WRITE_FACTOR,topicId:"2",factorId:"201",value:{type:k.FACTOR,topicId:"4",factorId:"401"}}]}]}]}],produce:[{topicId:"2",type:_.INSERT_OR_MERGE,stages:[{units:[{do:[{type:D.WRITE_FACTOR,topicId:"5",factorId:"501",value:{type:k.FACTOR,topicId:"2",factorId:"205",arithmetic:C.YEAR_OF}},{type:D.WRITE_FACTOR,topicId:"5",factorId:"502",value:{type:k.FACTOR,topicId:"2",factorId:"205",arithmetic:C.WEEK_OF}},{type:D.WRITE_FACTOR,topicId:"5",factorId:"503",value:{type:k.FACTOR,topicId:"2",factorId:"207"}}]},{do:[{type:D.WRITE_FACTOR,topicId:"6",factorId:"601",value:{type:k.FACTOR,topicId:"2",factorId:"205",arithmetic:C.YEAR_OF}},{type:D.WRITE_FACTOR,topicId:"6",factorId:"602",value:{type:k.FACTOR,topicId:"2",factorId:"205",arithmetic:C.MONTH_OF}},{type:D.WRITE_FACTOR,topicId:"6",factorId:"603",value:{type:k.FACTOR,topicId:"2",factorId:"207"}}]}]}]},{topicId:"5",type:_.INSERT_OR_MERGE,stages:[{units:[{do:[{type:D.WRITE_FACTOR,topicId:"8",factorId:"801",value:{type:k.FACTOR,topicId:"5",factorId:"501"}}]}]}]}]},rt=function(){var t=Object(X.a)(J.a.mark((function t(n){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(Z.b)()){t.next=4;break}return t.abrupt("return",new Promise((function(t){setTimeout((function(){t("2"===n?et:{topicId:n,consume:[],produce:[]})}),1e3)})));case 4:return t.next=6,fetch("".concat(Object(Z.a)(),"pipeline?topic_id=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});case 6:return e=t.sent,t.next=9,e.json();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),ot=function(){var t=Object(X.a)(J.a.mark((function t(n){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(Z.b)()){t.next=4;break}return t.abrupt("return",new Promise((function(t){setTimeout((function(){t([{topicId:"1",name:"Quotation"},{topicId:"2",name:"Policy"},{topicId:"3",name:"Participant"}].filter((function(t){return t.name.toUpperCase().includes(n.toUpperCase())})))}),500)})));case 4:return t.next=6,fetch("".concat(Object(Z.a)(),"query/topic/space?query_name=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});case 6:return e=t.sent,t.next=9,e.json();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),at=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,r,o,a,i,c,s,d,l,u;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(Object(Z.b)()),!Object(Z.b)()){t.next=12;break}t.t0=!0,t.next=t.t0===["1","2","3","4","5","6","7","8"].includes("".concat(n))?5:8;break;case 5:return r=$.find((function(t){return t.topicId===n})),o=r.topicId,a=r.code,i=r.name,c=r.type,s=r.description,d=r.factors,e={topicId:o,code:a,name:i,type:c,description:s,factors:d},t.abrupt("break",9);case 8:e={type:B.DISTINCT,factors:[]};case 9:return t.abrupt("return",{topic:e});case 12:return t.next=14,fetch("".concat(Object(Z.a)(),"topic?topic_id=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});case 14:return l=t.sent,t.next=17,l.json();case 17:return u=t.sent,t.abrupt("return",{topic:u});case 19:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),it=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,r;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.topicId){t.next=9;break}return t.next=3,fetch("".concat(Object(Z.a)(),"update/topic?topic_id=").concat(n.topicId),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return e=t.sent,t.next=6,e.json();case 6:return t.abrupt("return",t.sent);case 9:if(!Object(Z.b)()){t.next=13;break}return t.abrupt("return",new Promise((function(t){n.topicId="10000",setTimeout((function(){return t()}),500)})));case 13:return t.next=15,fetch("".concat(Object(Z.a)(),"topic"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 15:return r=t.sent,t.next=18,r.json();case 18:return t.abrupt("return",t.sent);case 19:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();!function(t){t.TOPICS_CHANGED="topics-changed",t.FLOW_CHANGED="flow-changed",t.MENU_VISIBLE="menu-visible",t.CANVAS_VISIBLE="canvas-visible",t.TOPIC_SELECTION_CHANGED="topic-selection-changed",t.PIPELINE_SELECTION_CHANGED="pipeline-selection-changed",t.COLLAPSE_ALL_TOPICS="collapse-all-topics",t.TOPIC_FILTER_TEXT_CHANGED="topic-filter-text-changed"}(q||(q={}));var ct=i.a.createContext({});ct.displayName="PipelineContext";var st,dt,lt=function(t){var n=t.children,e=Object(a.useState)((function(){var t=new K.EventEmitter;return t.setMaxListeners(1e3),t})),r=Object(l.a)(e,1)[0],i=Object(a.useState)({topics:[],menuVisible:!0,canvasVisible:!0,topicsLoadCompleted:!1}),c=Object(l.a)(i,1)[0],s=Object(a.useState)({addTopicsChangedListener:function(t){return r.on(q.TOPICS_CHANGED,t)},removeTopicsChangedListener:function(t){return r.off(q.TOPICS_CHANGED,t)},changeFlow:function(t,n){r.emit(q.FLOW_CHANGED,c.topic=t,c.flow=n)},addFlowChangedListener:function(t){return r.on(q.FLOW_CHANGED,t)},removeFlowChangedListener:function(t){return r.off(q.FLOW_CHANGED,t)},changeMenuVisible:function(t){return r.emit(q.MENU_VISIBLE,c.menuVisible=t)},addMenuVisibilityListener:function(t){return r.on(q.MENU_VISIBLE,t)},removeMenuVisibilityListener:function(t){return r.off(q.MENU_VISIBLE,t)},changeCanvasVisible:function(t){return r.emit(q.CANVAS_VISIBLE,c.canvasVisible=t)},addCanvasVisibilityListener:function(t){return r.on(q.CANVAS_VISIBLE,t)},removeCanvasVisibilityListener:function(t){return r.off(q.CANVAS_VISIBLE,t)},changeSelectedTopic:function(t){c.selectedTopic=t,delete c.selectedPipeline,r.emit(q.TOPIC_SELECTION_CHANGED,t)},addTopicSelectionChangedListener:function(t){return r.on(q.TOPIC_SELECTION_CHANGED,t)},removeTopicSelectionChangedListener:function(t){return r.off(q.TOPIC_SELECTION_CHANGED,t)},changeSelectedPipeline:function(t){c.selectedPipeline=t,r.emit(q.PIPELINE_SELECTION_CHANGED,t)},addPipelineSelectionChangedListener:function(t){return r.on(q.PIPELINE_SELECTION_CHANGED,t)},removePipelineSelectionChangedListener:function(t){return r.off(q.PIPELINE_SELECTION_CHANGED,t)},collapseAllTopics:function(){return r.emit(q.COLLAPSE_ALL_TOPICS)},addCollapseAllTopicsListener:function(t){return r.on(q.COLLAPSE_ALL_TOPICS,t)},removeCollapseAllTopicsListener:function(t){return r.off(q.COLLAPSE_ALL_TOPICS,t)},changeTopicFilter:function(t){return r.emit(q.TOPIC_FILTER_TEXT_CHANGED,t.toLowerCase())},addTopicFilterChangedListener:function(t){return r.on(q.TOPIC_FILTER_TEXT_CHANGED,t)},removeTopicFilterChangedListener:function(t){return r.off(q.TOPIC_FILTER_TEXT_CHANGED,t)}}),d=Object(l.a)(s,1)[0];return Object(a.useEffect)((function(){Object(X.a)(J.a.mark((function t(){var n,e,o,a;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=1;case 1:return t.next=4,nt(n);case 4:if(e=t.sent,o=e.data,a=e.completed,c.topics=[].concat(Object(G.a)(c.topics),Object(G.a)(o)).sort((function(t,n){return t.name.toUpperCase().localeCompare(n.name.toUpperCase())})),c.topicsLoadCompleted=a,r.emit(q.TOPICS_CHANGED),!a){t.next=12;break}return t.abrupt("break",15);case 12:n++,t.next=1;break;case 15:case"end":return t.stop()}}),t)})))()}),[c,r]),Object(o.jsx)(ct.Provider,{value:Object(U.a)({store:c},d),children:n})},ut=function(){return i.a.useContext(ct)},pt=(st={},Object(Y.a)(st,B.RAW,"--console-raw-topic-color"),Object(Y.a)(st,B.DISTINCT,"--console-distinct-topic-color"),Object(Y.a)(st,B.AGGREGATE,"--console-aggregate-topic-color"),Object(Y.a)(st,B.TIME,"--console-time-topic-color"),Object(Y.a)(st,B.RATIO,"--console-ratio-topic-color"),Object(Y.a)(st,B.NOT_DEFINED,"--console-undefined-topic-color"),st);function ft(){var t=Object(r.a)(["\n\tdisplay: block;\n\tposition: absolute;\n\ttop: calc(100% + 2px);\n\tleft: calc(50% - 1px);\n\twidth: 2px;\n\theight: calc(var(--margin) * 1.5);\n\tbackground-color: var(--border-color);\n\t&:before,\n\t&:after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tleft: -5px;\n\t\tborder-bottom: 0;\n\t\tborder-top: 6px solid var(--border-color);\n\t\tborder-left: 6px solid transparent;\n\t\tborder-right: 6px solid transparent;\n\t}\n\t&:before {\n\t\tbottom: -1px;\n\t\tz-index: -2;\n\t}\n\t&:after {\n\t\tbottom: 2px;\n\t\tborder-top-color: var(--bg-color);\n\t\tz-index: -1;\n\t}\n"]);return ft=function(){return t},t}function bt(){var t=Object(r.a)(["\n\tdisplay: block;\n\tposition: absolute;\n\tborder-width: 2px;\n\tborder-color: var(--console-favorite-color);\n\tborder-style: dashed;\n\tborder-radius: var(--border-radius);\n\ttop: -12px;\n\tleft: -12px;\n\twidth: calc(100% + 24px);\n\theight: calc(100% + 24px);\n\tz-index: -1;\n\tbackground-color: transparent;\n\topacity: 0;\n\tpointer-events: none;\n\ttransition: opacity 300ms ease-in-out;\n\t&[data-visible=true] {\n\t\topacity: 1;\n\t}\n"]);return bt=function(){return t},t}function ht(){var t=Object(r.a)(["\n\tbottom: 0;\n\tborder-top-left-radius: var(--border-radius);\n\ttransform-origin: bottom right;\n\tpadding-top: 2px;\n\tpadding-right: calc(var(--margin) / 3 - 2px);\n\t> svg {\n\t\ttransform: rotateX(180deg);\n\t}\n"]);return ht=function(){return t},t}function vt(){var t=Object(r.a)(["\n\ttop: 0;\n\tborder-bottom-left-radius: var(--border-radius);\n\ttransform-origin: top right;\n\tpadding-bottom: 2px;\n\tpadding-right: calc(var(--margin) / 3 - 2px);\n"]);return vt=function(){return t},t}function gt(){var t=Object(r.a)(["\n\tright: 0;\n\tmin-width: 35%;\n\t> svg {\n\t\tmargin-right: calc(var(--margin) / 4);\n\t\tmargin-top: 1px;\n\t}\n"]);return gt=function(){return t},t}function jt(){var t=Object(r.a)(["\n\ttop: 0;\n\tleft: 0;\n\tborder-bottom-right-radius: var(--border-radius);\n\ttransform-origin: top left;\n\tpadding-bottom: 2px;\n\tpadding-left: calc(var(--margin) / 3 - 2px);\n"]);return jt=function(){return t},t}function mt(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: absolute;\n\talign-items: center;\n\tfont-weight: var(--font-bold);\n\tfont-size: 0.8em;\n\tcolor: var(--invert-color);\n\tbackground-color: var(--border-color);\n\tpadding: 0 calc(var(--margin) / 3);\n\ttransform: scale(0.8);\n\ttext-transform: uppercase;\n"]);return mt=function(){return t},t}function xt(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\tborder-width: 2px;\n\tborder-color: var(--border-color);\n\tborder-style: solid;\n\tborder-radius: var(--border-radius);\n\tmin-height: 64px;\n\twidth: 300px;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-family: var(--console-title-font-family);\n\tpadding: 6px calc(var(--margin) / 2);\n\tcursor: pointer;\n\t&:last-child {\n\t\tmargin-bottom: var(--margin);\n\t}\n\t","\n"]);return xt=function(){return t},t}var Ot=s.c.div.attrs({"data-widget":"pipeline-topic"})(xt(),Object.keys(pt).map((function(t){var n=t;return"&[data-topic-type=".concat(n,"] {\n\t\t\tborder-color: var(").concat(pt[n],");\n\t\t\t> div[data-widget-type='corner'] {\n\t\t\t\tbackground-color: var(").concat(pt[n],");\n\t\t\t}\n\t\t}")})).join("\n")),yt=s.c.div(mt()),It=Object(s.c)(yt).attrs({"data-widget":"pipeline-topic-type"})(jt()),wt=Object(s.c)(yt).attrs((function(t){var n=t.count,e=t.direction;return{"data-widget":"pipeline-topic-more-".concat(e,"-pipelines-count"),style:{display:0===n?"none":"flex"}}}))(gt()),Ct=Object(s.c)(wt)(vt()),Et=Object(s.c)(wt)(ht()),Tt=s.c.div(bt()),kt=s.c.div.attrs({"data-widget":"pipeline-topic-next-line"})(ft()),Nt=(dt={},Object(Y.a)(dt,B.RAW,"Raw"),Object(Y.a)(dt,B.TIME,"Time Aggregate"),Object(Y.a)(dt,B.AGGREGATE,"Aggregate"),Object(Y.a)(dt,B.DISTINCT,"Distinct"),Object(Y.a)(dt,B.RATIO,"Ratio"),Object(Y.a)(dt,B.NOT_DEFINED,"Not Defined"),dt),At=function(t){var n=t.topic,e=t.toMe,r=void 0===e?[]:e,i=t.fromMe,c=void 0===i?[]:i,s=t.previous,d=t.next,l=t.current,u=void 0!==l&&l,p=ut(),f=p.store.selectedTopic,b=p.changeSelectedTopic,h=p.addTopicSelectionChangedListener,g=p.removeTopicSelectionChangedListener,j=Object(W.f)();Object(a.useEffect)((function(){return h(j),function(){return g(j)}}));var m=r.filter((function(t){return t.topicId!=(null===s||void 0===s?void 0:s.topicId)})).length,x=Object(G.a)(new Set(c.map((function(t){return t.targetTopicIds.filter((function(t){return t!=(null===d||void 0===d?void 0:d.topicId)}))})).flat())).length;return Object(o.jsxs)(Ot,{"data-current":u,"data-topic-type":n.type||B.NOT_DEFINED,onClick:function(){f!==n&&b(n)},children:[Object(o.jsx)(It,{"data-widget-type":"corner",children:Nt[n.type||B.NOT_DEFINED]}),Object(o.jsxs)(Ct,{count:m,direction:"source","data-widget-type":"corner",children:[Object(o.jsx)(V.a,{icon:v.v}),m," More In"]}),Object(o.jsxs)(Et,{count:x,direction:"target","data-widget-type":"corner",children:[Object(o.jsx)(V.a,{icon:v.v}),x," More Out"]}),Object(o.jsx)(Tt,{"data-visible":f===n}),Object(o.jsx)("div",{children:n.name}),d?Object(o.jsx)(kt,{}):null]})};function St(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tposition: relative;\n\tpadding: var(--margin);\n\tborder-right: var(--border);\n\tgrid-template-columns: 1fr;\n\tgrid-row-gap: calc(var(--margin) * 1.5);\n\talign-content: start;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\tmin-width: 365px;\n\tmax-width: 365px;\n\topacity: 1;\n\tleft: 0;\n\ttransition: left 300ms ease-in-out, opacity 300ms ease-in-out;\n\t&[data-visible=false] {\n\t\tposition: absolute;\n\t\tleft: -365px;\n\t\topacity: 0;\n\t}\n\t&::-webkit-scrollbar {\n\t\tbackground-color: transparent;\n\t\twidth: 4px;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color: transparent;\n\t\tborder-radius: 2px;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--console-favorite-color);\n\t\tborder-radius: 2px;\n\t}\n"]);return St=function(){return t},t}var Rt=s.c.div.attrs({"data-widget":"pipeline-canvas"})(St()),Dt=function(t){var n=t.topic,e=t.nodes,r=t.visible,i=ut(),c=i.store.canvasVisible,s=i.addCanvasVisibilityListener,d=i.removeCanvasVisibilityListener,l=Object(W.f)();return Object(a.useEffect)((function(){return s(l),function(){return d(l)}})),r&&n?Object(o.jsx)(Rt,{"data-visible":c,children:e.map((function(t){return Object(a.createElement)(At,Object(U.a)(Object(U.a)({},t),{},{key:Object(H.a)()}))}))}):null},Pt=e(40),_t=e(16),Lt=e.n(_t),Mt=function(){var t=Object(X.a)(J.a.mark((function t(n){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(Z.b)()){t.next=4;break}console.log("save {}",n),t.next=10;break;case 4:return t.next=6,fetch("".concat(Object(Z.a)(),"pipeline"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:return e=t.sent,t.next=9,e.json();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Ft=i.a.createContext({});Ft.displayName="PipelineEditContext";var Gt=function(){var t=Object(X.a)(J.a.mark((function t(n){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.origin.name=n.name,n.origin.stages=n.stages,n.origin.type=n.type,t.next=5,Mt(n.origin);case 5:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Ut=function(t){var n=t.pipeline,e=t.children,r=ut(),i=r.addPipelineSelectionChangedListener,c=r.removePipelineSelectionChangedListener,s=Object(a.useState)({pipeline:n,saved:!0,throttle:null}),d=Object(l.a)(s,1)[0];Object(a.useEffect)((function(){var t=function(t){var n,e;(null===t||void 0===t?void 0:t.origin)!==(null===(n=d.pipeline)||void 0===n?void 0:n.origin)&&((null===(e=d.pipeline)||void 0===e?void 0:e.origin)&&!d.saved&&(console.log("Detect pipeline selection change at %c[".concat(Lt()().format("YYYY/MM/DD HH:mm:ss.SSS"),"]%c, do save immediately."),"color:rgb(251,71,71)",""),Gt(d.pipeline)),d.pipeline=t,d.saved=!0,d.throttle&&(clearTimeout(d.throttle),d.throttle=null))};return i(t),function(){return c(t)}}));return Object(o.jsx)(Ft.Provider,{value:{firePipelineContentChange:function(){n&&(d.saved=!1,d.throttle&&clearTimeout(d.throttle),console.log("Detect pipeline change from editor at %c[".concat(Lt()().format("YYYY/MM/DD HH:mm:ss.SSS"),"]%c, will save changes after 10 seconds."),"color:rgb(251,71,71)",""),d.throttle=setTimeout(Object(X.a)(J.a.mark((function t(){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d.throttle=null,t.prev=1,t.next=4,Gt(n);case 4:t.next=12;break;case 6:t.prev=6,t.t0=t.catch(1),console.groupCollapsed("%cError on save pipeline.","color:rgb(251,71,71)"),console.error("Pipeline: ",n),console.error(t.t0),console.groupEnd();case 12:case"end":return t.stop()}}),t,null,[[1,6]])}))),1e4))}},children:e})},Ht=function(){return i.a.useContext(Ft)},zt=e(29);function Bt(){var t=Object(r.a)(["\n\theight: 24px;\n\tline-height: 24px;\n\tpadding-top: 0;\n\tpadding-bottom: 0;\n\tcolor: var(--console-font-color);\n\ttext-overflow: ellipsis;\n"]);return Bt=function(){return t},t}var Wt=Object(s.c)(zt.a)(Bt()),Yt=function(t){var n=t.value,e=void 0===n?"":n,r=t.placeholder,i=t.onChange,c=t.onFocus,s=t.onBlur,d=Object(a.useRef)(null);return Object(o.jsx)(Wt,{value:e,placeholder:r,onChange:function(t){return i(t.target.value)},onFocus:function(){d.current.select(),c&&c()},onBlur:function(){return s&&s()},onKeyUp:function(t){"Enter"===t.key&&d.current.blur()},ref:d})};function Vt(){var t=Object(r.a)(["\n\tpadding-left: var(--input-indent);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n"]);return Vt=function(){return t},t}function qt(){var t=Object(r.a)(["\n\tpadding-right: calc(var(--margin) / 4);\n"]);return qt=function(){return t},t}function Qt(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: auto 1fr;\n\talign-items: center;\n\theight: ",";\n\tline-height: ",";\n\tfont-family: var(--console-title-font-family);\n\tborder-radius: var(--border-radius);\n\tbackground-color: ",";\n\tpadding: 0 ",";\n\toverflow: hidden;\n\t&:hover,\n\t&[data-editing=true] {\n\t\tflex-grow: 1;\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\tbackground-color: var(--console-primary-color);\n\t\tpadding-right: 0;\n\t\t> span[data-role='prefix-label'] {\n\t\t\tcolor: var(--invert-color);\n\t\t}\n\t\t> span[data-role='display-label'] {\n\t\t\tdisplay: none;\n\t\t}\n\t\t> input {\n\t\t\tdisplay: block;\n\t\t}\n\t}\n\t> input {\n\t\tdisplay: none;\n\t\twidth: 100%;\n\t\tfont-family: var(--console-title-font-family);\n\t\tfont-size: ",";\n\t\tbackground-color: var(--bg-color);\n\t\tborder: 0;\n\t\tborder-radius: 0;\n\t\ttransition: none;\n\t}\n"]);return Qt=function(){return t},t}var Jt=s.c.div(Qt(),(function(t){var n=t.height;return"".concat(n||24,"px")}),(function(t){var n=t.height;return"".concat(n||24,"px")}),(function(t){return t.backgroundColor||"var(--bg-color)"}),(function(t){return t.paddingHorizontal||"calc(var(--margin) / 4)"}),(function(t){var n=t.inputFontSize;return"number"===typeof n?"".concat(n,"px"):n})),Xt=s.c.span(qt()),Kt=s.c.span(Vt()),Zt=function(t){var n=t.prefixLabel,e=t.value,r=t.placeholder,i=t.onChange,c=t.styles,s=Object(a.useState)(!1),d=Object(l.a)(s,2),u=d[0],p=d[1];return Object(o.jsxs)(Jt,Object(U.a)(Object(U.a)({"data-editing":u},c),{},{children:[Object(o.jsx)(Xt,{"data-role":"prefix-label",children:n}),Object(o.jsx)(Kt,{"data-role":"display-label",children:e||r}),Object(o.jsx)(Yt,{value:e,placeholder:r,onChange:i,onFocus:function(){return p(!0)},onBlur:function(){return p(!1)}})]}))},$t=e(80),tn=e(8),nn=e(39);function en(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 6px calc(var(--margin) / 2);\n\theight: 24px;\n\tfont-size: 0.9em;\n\tfont-variant: petite-caps;\n\tfont-weight: var(--font-bold);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\t&:hover {\n\t\tfilter: brightness(140%);\n\t}\n\t&[data-ink-type=primary] {\n\t\tbackground-color: var(--console-primary-color);\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t}\n\t&[data-ink-type=danger] {\n\t\tbackground-color: var(--console-danger-color);\n\t\tbox-shadow: var(--console-danger-hover-shadow);\n\t}\n\t&[data-ink-type=waive] {\n\t\tcolor: var(--console-font-color);\n\t\tbackground-color: var(--bg-color);\n\t\tborder: var(--border);\n\t\topacity: 0.8;\n\t}\n\t> svg:first-child {\n\t\tfont-size: 0.8em;\n\t\tmargin-right: calc(var(--margin) / 5);\n\t}\n"]);return en=function(){return t},t}function rn(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: fixed;\n\toverflow-x: hidden;\n\tborder-radius: 0;\n\ttransition: opacity 300ms ease-in-out;\n\t> button {\n\t\tborder-radius: 0;\n\t}\n\t&[data-ink-type=primary] {\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t}\n\t&[data-ink-type=danger] {\n\t\tbox-shadow: var(--console-danger-hover-shadow);\n\t}\n"]);return rn=function(){return t},t}var on,an=s.c.div.attrs((function(t){var n=t.visible,e=t.top,r=t.left,o=t.minWidth,a=t.atTop;return{"data-at-top":a,style:{opacity:n?1:0,pointerEvents:n?"auto":"none",minWidth:o,top:e,left:r,borderTopLeftRadius:a?"var(--border-radius)":0,borderTopRightRadius:a?"var(--border-radius)":0,borderBottomLeftRadius:a?0:"var(--border-radius)",borderBottomRightRadius:a?0:"var(--border-radius)"}}}))(rn()),cn=s.c.div(en()),sn=function(t){var n=t.icon,e=t.label,r=t.type,i=t.onClick,c=t.menus,s=Object(a.useRef)(null),d=Object(a.useState)({visible:!1,left:0,top:0,minWidth:0,atTop:!1}),u=Object(l.a)(d,2),p=u[0],f=u[1];Object(W.e)(s,(function(){return f(Object(U.a)(Object(U.a)({},p),{},{visible:!1}))}));return Object(o.jsxs)(Pt.b,{inkType:r,onClick:i,ref:s,"data-menu-at-top":p.atTop,"data-menu-visible":p.visible,children:[Object(o.jsx)(V.a,{icon:n}),Object(o.jsx)("span",{children:e}),Object(o.jsx)("span",{"data-role":"more-buttons",onClick:function(t){t.preventDefault(),t.stopPropagation();var n=s.current.getBoundingClientRect();n.top+n.height+24*c.length>window.innerHeight?f({visible:!0,top:n.top-24*c.length,left:n.left,minWidth:n.width,atTop:!0}):f({visible:!0,top:n.top+n.height,left:n.left,minWidth:n.width,atTop:!1})},children:Object(o.jsx)(V.a,{icon:v.j})}),Object(o.jsx)(an,Object(U.a)(Object(U.a)({},p),{},{"data-ink-type":r,children:c.map((function(t){var n,e=t.icon,a=t.label,i=t.onClick;return Object(o.jsxs)(cn,{"data-ink-type":r,onClick:(n=i,function(t){t.preventDefault(),t.stopPropagation(),f(Object(U.a)(Object(U.a)({},p),{},{visible:!1})),n()}),children:[Object(o.jsx)(V.a,{icon:e}),Object(o.jsx)("span",{children:a})]},a)}))}))]})};!function(t){t.TOPIC_CHANGED="topic-changed",t.FACTOR_CHANGED="factor-changed",t.VARIABLE_CHANGED="variable-changed",t.ARITHMETIC_CHANGED="arithmetic-changed",t.MAPPING_CHANGED="mapping-changed",t.FILTER_ADDED="filter-added",t.FILTER_REMOVED="filter-removed",t.FILTER_CHANGED="filter-changed",t.FILTER_INDENT="filter-indent",t.FILTER_OUTDENT="filter-outdent"}(on||(on={}));var dn=i.a.createContext({});dn.displayName="PipelineUnitActionContext";var ln=function(t){var n=t.children,e=Ht().firePipelineContentChange,r=Object(a.useState)((function(){var t=new K.EventEmitter;return t.setMaxListeners(1e3),t})),i=Object(l.a)(r,1)[0];return Object(o.jsx)(dn.Provider,{value:{firePropertyChange:function(t){i.emit(t),e()},addPropertyChangeListener:function(t,n){return i.on(t,n)},removePropertyChangeListener:function(t,n){return i.off(t,n)}},children:n})},un=function(){return i.a.useContext(dn)};function pn(){var t=Object(r.a)(["\n\theight: 22px;\n\tpadding-top: 0;\n\tpadding-bottom: 0;\n\tfont-size: 0.8em;\n\tcolor: var(--console-font-color);\n\tborder: 0;\n\tbox-shadow: 0 0 0 1px var(--border-color);\n\t&:hover,\n\t&:focus {\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t}\n\t&::placeholder {\n\t\tcolor: var(--console-waive-color);\n\t}\n"]);return pn=function(){return t},t}var fn=Object(s.c)(zt.a)(pn());function bn(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: stretch;\n\tjustify-self: start;\n\tbackground-color: var(--pipeline-bg-color);\n\theight: 22px;\n\tborder-radius: 11px;\n\toutline: none;\n\tappearance: none;\n\toverflow: hidden;\n\tcursor: pointer;\n\tbox-shadow: 0 0 0 1px var(--border-color);\n\ttransition: all 300ms ease-in-out;\n\t&:hover {\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t}\n\t&[data-expanded=true] {\n\t\t> div:first-child {\n\t\t\tpadding-right: calc(var(--margin) / 2);\n\t\t}\n\t\t> div:not(:first-child):not(:last-child) {\n\t\t\tpadding: 0 calc(var(--margin) / 2);\n\t\t}\n\t\t> div:not(:first-child):not(:last-child) {\n\t\t\twidth: unset;\n\t\t\tbackground-color: var(--bg-color);\n\t\t\toverflow: unset;\n\t\t}\n\t\t> div:last-child,\n\t\t> div:not(:first-child):not(:last-child) {\n\t\t\t&:hover {\n\t\t\t\tcolor: var(--invert-color);\n\t\t\t\tbackground-color: var(--console-favorite-color);\n\t\t\t}\n\t\t}\n\t\t> div:not(:first-child) {\n\t\t\t&:before {\n\t\t\t\tcontent: '';\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 20%;\n\t\t\t\tleft: 0;\n\t\t\t\twidth: 1px;\n\t\t\t\theight: 60%;\n\t\t\t\tbackground-color: var(--console-primary-color);\n\t\t\t\tborder-radius: 1px;\n\t\t\t\topacity: 0.5;\n\t\t\t\ttransform: translateX(-50%);\n\t\t\t}\n\t\t}\n\t\t> div:last-child {\n\t\t\tpadding-right: calc(var(--margin) / 2);\n\t\t\tbackground-color: var(--bg-color);\n\t\t}\n\t}\n\t> div:first-child {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding-left: calc(var(--margin) / 2);\n\t\tborder-top-left-radius: 12px;\n\t\tborder-bottom-left-radius: 12px;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t}\n\t> div:not(:first-child):not(:last-child) {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tposition: relative;\n\t\ttext-align: center;\n\t\tpadding: 0;\n\t\twidth: 0;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttransition: all 300ms ease-in-out;\n\t}\n\t> div:last-child {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tposition: relative;\n\t\tpadding: 0 calc(var(--margin) / 3);\n\t}\n"]);return bn=function(){return t},t}var hn=s.c.div(bn()),vn=function(t){var n=t.label,e=t.options,r=t.toLabel,i=t.onSelect,c=Object(a.useState)(!1),s=Object(l.a)(c,2),d=s[0],u=s[1];return Object(o.jsxs)(hn,{"data-expanded":d,onClick:function(){d||u(!0)},tabIndex:0,onBlur:function(){return u(!1)},children:[Object(o.jsx)("div",{children:n}),e.map((function(t){return Object(o.jsx)("div",{onClick:(n=t,function(t){t.preventDefault(),t.stopPropagation(),i(n),u(!1)}),children:r(t)},Object(H.a)());var n})),Object(o.jsx)("div",{onClick:function(t){t.preventDefault(),t.stopPropagation(),u(!d)},children:Object(o.jsx)(V.a,{icon:d?v.Gb:$t.f})})]})};function gn(){var t=Object(r.a)(["\n\tfont-variant: petite-caps;\n"]);return gn=function(){return t},t}function jn(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: calc(120px - var(--margin) / 2) calc(100% - 120px);\n\tgrid-auto-rows: minmax(32px, auto);\n\tgrid-column-gap: calc(var(--margin) / 2);\n\talign-items: center;\n\t> div:nth-child(2n + 1) {\n\t\ttext-align: right;\n\t\talign-self: start;\n\t\theight: 32px;\n\t\tline-height: 32px;\n\t}\n"]);return jn=function(){return t},t}var mn=s.c.div.attrs({"data-widget":"stage-unit-action-body"})(jn()),xn=s.c.div.attrs({"data-widget":"stage-unit-action-item-label"})(gn());function On(){var t=Object(r.a)(["\n\t> div:nth-child(2) {\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t}\n"]);return On=function(){return t},t}var yn=Object(s.c)(mn)(On()),In=function(t){return t.split("-").map((function(t){return["or","and","to","from"].includes(t)?t:t.substr(0,1).toUpperCase()+t.substr(1)})).join(" ")};function wn(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: fixed;\n\tflex-direction: column;\n\tz-index: 1000;\n\tmax-height: 200px;\n\ttransform: scaleY(0);\n\ttransition: transform 300ms ease-in-out;\n\tpointer-events: none;\n\tbackground-color: var(--bg-color);\n\tborder-radius: var(--border-radius);\n\tbox-shadow: var(--console-primary-hover-shadow);\n\toverflow-x: hidden;\n\t&::-webkit-scrollbar {\n\t\tbackground-color: transparent;\n\t\twidth: 4px;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color: transparent;\n\t\tborder-radius: 2px;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--console-favorite-color);\n\t\tborder-radius: 2px;\n\t}\n\t&[data-expanded=true] {\n\t\ttransform: scaleY(1);\n\t\tpointer-events: auto;\n\t}\n\t> input {\n\t\tmin-height: 28px;\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tborder-bottom-left-radius: 0;\n\t\tborder-bottom-right-radius: 0;\n\t\tbackground-color: var(--bg-color);\n\t\tborder-color: transparent;\n\t\tborder-bottom: var(--border);\n\t\t&:hover,\n\t\t&:focus {\n\t\t\tborder-bottom-color: var(--border-color);\n\t\t\tbox-shadow: none;\n\t\t}\n\t}\n\t> div {\n\t\tmin-height: 28px;\n\t\theight: 28px;\n\t\tline-height: 28px;\n\t\tpadding: 0 var(--input-indent);\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\t&[data-visible=false] {\n\t\t\tdisplay: none;\n\t\t}\n\t\t&:not(:nth-child(2)) {\n\t\t\tcursor: pointer;\n\t\t\twhite-space: nowrap;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\t&:hover {\n\t\t\t\tcolor: var(--invert-color);\n\t\t\t\tbackground-color: var(--console-primary-color);\n\t\t\t}\n\t\t\t> span:nth-child(2n) {\n\t\t\t\tfont-weight: 800;\n\t\t\t\tfont-variant: petite-caps;\n\t\t\t}\n\t\t}\n\t}\n"]);return wn=function(){return t},t}function Cn(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\talign-self: stretch;\n\tjustify-content: center;\n\tbackground-color: var(--pipeline-bg-color);\n\tfont-variant: petite-caps;\n\tfont-weight: var(--font-demi-bold);\n\tborder-right: var(--border);\n\tpadding: 0 calc(var(--margin) / 5);\n\tz-index: 1;\n\tcursor: pointer;\n\t&[data-visible=false] {\n\t\tdisplay: none;\n\t}\n\t&[data-visible=true] {\n\t\t+ input {\n\t\t\tborder-top-left-radius: 0;\n\t\t\tborder-bottom-left-radius: 0;\n\t\t\tborder-left-color: transparent;\n\t\t}\n\t}\n"]);return Cn=function(){return t},t}function En(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\tborder-radius: var(--border-radius);\n\tbox-shadow: 0 0 0 1px var(--border-color);\n\ttransition: all 300ms ease-in-out;\n\talign-items: center;\n\toverflow: hidden;\n\t&:hover {\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t}\n\t> input {\n\t\tflex-grow: 1;\n\t\theight: 22px;\n\t\tborder: 0;\n\t\twidth: 0;\n\t\tcursor: pointer;\n\t\ttext-overflow: ellipsis;\n\t\t&:hover,\n\t\t&:focus {\n\t\t\tborder-color: transparent;\n\t\t\tbox-shadow: none;\n\t\t}\n\t}\n"]);return En=function(){return t},t}var Tn=s.c.div(En()),kn=s.c.div(Cn()),Nn=s.c.div.attrs((function(t){var n=t.top,e=t.bottom,r=t.left,o=t.width,a=t.atTop;return{style:{top:a?"unset":n,bottom:a?"calc(100vh - ".concat(e,"px)"):"unset",left:r,minWidth:Math.max(o,200),transformOrigin:a?"bottom":"top"}}}))(wn()),An=function(t){var n=t.typeChar,e=t.item,r=t.asLabel,i=t.filterItems,c=t.onSelect,s=r(e),d=Object(a.useRef)(null),u=Object(a.useRef)(null),p=Object(a.useRef)(null),f=Object(a.useRef)(null),b=Object(a.useState)(!1),h=Object(l.a)(b,2),v=h[0],g=h[1],j=Object(a.useState)({left:0,width:0,atTop:!1}),m=Object(l.a)(j,2),x=m[0],O=m[1],y=Object(a.useState)(""),I=Object(l.a)(y,2),w=I[0],C=I[1],E=Object(a.useState)(i("")),T=Object(l.a)(E,2),k=T[0],N=T[1],A=Object(a.useState)(null),S=Object(l.a)(A,2),R=S[0],D=S[1];Object(W.e)(d,(function(){return g(!1)}));var P=function(t){if(!v){var n=d.current.getBoundingClientRect(),e=n.top+n.height+2;e+28*(t+1)>window.innerHeight?O({bottom:n.top-2,left:n.left,width:n.width,atTop:!0}):O({top:e,left:n.left,width:n.width,atTop:!1}),g(!0),f.current.focus(),f.current.select()}},_=function(t){var n=t.target.value;R&&clearTimeout(R),C(n),D(setTimeout((function(){var t=i(n);D(null),N(t),P(t.length)}),200))},L=function(){return P(k.length)},M=function(t){return function(){c(t),g(!1)}};return Object(o.jsxs)(Tn,{ref:d,children:[Object(o.jsx)(kn,{"data-visible":!!n,onClick:L,children:Object(o.jsx)("span",{children:n})}),Object(o.jsx)(fn,{value:s,onChange:_,onClick:L,readOnly:!0,ref:u}),Object(o.jsxs)(Nn,Object(U.a)(Object(U.a)({ref:p,"data-expanded":v},x),{},{"data-count":k.length+1,children:[Object(o.jsx)(fn,{value:w,onChange:_,ref:f}),Object(o.jsx)("div",{"data-visible":0===k.length,children:w?"No matched.":"Key in please..."}),k.map((function(t){var n=t.item,e=t.parts;return Object(o.jsx)("div",{onClick:M(n),children:e.map((function(t){return Object(o.jsx)("span",{children:t},Object(H.a)())}))},Object(H.a)())}))]}))]})},Sn=function(t,n,e){return t.map((function(t){var r=e(t),o=r.toUpperCase().split(n);if(1===o.length)return null;var a=n.length,i=o.length,c=0;return{item:t,name:r.toUpperCase(),parts:o.reduce((function(t,n,e){var o=n.length;return t.push(r.substr(c,o)),c+=o,e!==i-1&&(t.push(r.substr(c,a)),c+=a),t}),[])}})).filter((function(t){return t})).sort((function(t,n){return t&&n?t.name.localeCompare(n.name):-1}))},Rn=function(t,n){return(n=n.trim())?Sn(t,n.toUpperCase(),(function(t){return t.name||""})):t.map((function(t){return{item:t,parts:[t.name||""]}}))},Dn=function(t,n){return(n=n.trim())?Sn(t,n.toUpperCase(),(function(t){return t.label||""})):t.map((function(t){return{item:t,parts:[t.label||""]}})).filter((function(t){return t.parts[0]})).sort((function(t,n){return t.parts[0].localeCompare(n.parts[0])}))},Pn=function(t){return!!t.mode},_n=function(t){return!Pn(t)},Ln=function t(n){return 0===n.children.length?2:n.children.reduce((function(n,e){return _n(e)?n+=1:Pn(e)&&(n+=t(e)),n}),1)},Mn=function t(n){return n.children.reduce((function(n,e){return _n(e)?n+=1:Pn(e)&&(n+=t(e)),n}),0)},Fn=function(t){return t.type===k.FACTOR},Gn=function(t){return t.type===k.IN_MEMORY},Un=function(t){var n=t.holder,e=t.onChange,r=n.topicId,a=ut().store.topics,i=Object(W.f)(),c=r?a.find((function(t){return t.topicId==r})):void 0;return Object(o.jsx)(An,{typeChar:"Topic",item:c,asLabel:function(t){return t?t.name:""},filterItems:function(t){return Rn(a,t)},onSelect:function(t){n.topicId=t.topicId,e(),i()}})};function Hn(){var t=Object(r.a)(["\n\tdisplay          : flex;\n\tposition         : fixed;\n\tflex-direction   : column;\n\tz-index          : 1000;\n\theight           : ","px;\n\ttransform        : scaleY(0);\n\ttransition       : transform 300ms ease-in-out;\n\tpointer-events   : none;\n\tbackground-color : var(--bg-color);\n\tborder-radius    : 12px;\n\tbox-shadow       : var(--console-primary-hover-shadow);\n\t&[data-expanded=true] {\n\t\ttransform      : scaleY(1);\n\t\tpointer-events : auto;\n\t\t&:before {\n\t\t\tcontent          : '';\n\t\t\tdisplay          : block;\n\t\t\tposition         : absolute;\n\t\t\ttop              : 0;\n\t\t\tleft             : 0;\n\t\t\twidth            : 100%;\n\t\t\theight           : 100%;\n\t\t\tborder-radius    : 12px;\n\t\t\tbackground-color : var(--pipeline-bg-color);\n\t\t\tz-index          : -1;\n\t\t}\n\t}\n\t> div {\n\t\tmin-height : 28px;\n\t\tpadding    : 0 calc(var(--margin) / 2);\n\t}\n\t> div[data-role='operators'] {\n\t\tdisplay          : flex;\n\t\tflex-wrap        : wrap;\n\t\tgrid-column-gap  : calc(var(--margin) / 4);\n\t\tgrid-row-gap     : calc(var(--margin) / 8);\n\t\tbackground-color : var(--bg-color);\n\t\tpadding          : 0 calc(var(--margin) / 2);\n\t\tcursor           : default;\n\t\t&:first-child {\n\t\t\tborder-top-left-radius  : 12px;\n\t\t\tborder-top-right-radius : 12px;\n\t\t\tpadding-top             : calc(var(--margin) / 8);\n\t\t\tpadding-bottom          : calc(var(--margin) / 8);\n\t\t}\n\t\t&:last-child {\n\t\t\tborder-bottom-left-radius  : 12px;\n\t\t\tborder-bottom-right-radius : 12px;\n\t\t\tpadding-bottom             : calc(var(--margin) / 8);\n\t\t}\n\t\t> div {\n\t\t\tdisplay       : flex;\n\t\t\talign-items   : center;\n\t\t\theight        : 24px;\n\t\t\tline-height   : 22px;\n\t\t\tborder-radius : 12px;\n\t\t\tborder        : var(--border);\n\t\t\tpadding       : 0 calc(var(--margin) / 2);\n\t\t\ttransition    : all 300ms ease-in-out;\n\t\t\tcursor        : pointer;\n\t\t\t&:hover,\n\t\t\t&[data-current=true] {\n\t\t\t\tborder-color     : var(--console-favorite-color);\n\t\t\t\tcolor            : var(--invert-color);\n\t\t\t\tbackground-color : var(--console-favorite-color);\n\t\t\t}\n\t\t\t&[data-current=true] {\n\t\t\t\tcursor : default;\n\t\t\t}\n\t\t}\n\t}\n"]);return Hn=function(){return t},t}function zn(){var t=Object(r.a)(["\n\tdisplay          : flex;\n\tposition         : relative;\n\talign-items      : center;\n\tjustify-self     : flex-start;\n\tborder-radius    : var(--border-radius);\n\tbackground-color : var(--pipeline-bg-color);\n\tbox-shadow       : 0 0 0 1px var(--border-color);\n\theight           : 22px;\n\toutline          : none;\n\tappearance       : none;\n\twhite-space      : nowrap;\n\tcursor           : pointer;\n\ttransition       : all 300ms ease-in-out;\n\t&[data-expanded=true],\n\t&:hover {\n\t\tbox-shadow : var(--console-primary-hover-shadow);\n\t}\n\t> div:first-child {\n\t\tposition                  : relative;\n\t\tpadding-left              : calc(var(--margin) / 2);\n\t\tfont-variant              : petite-caps;\n\t\tfont-weight               : var(--font-demi-bold);\n\t\tborder-top-left-radius    : 12px;\n\t\tborder-bottom-left-radius : 12px;\n\t}\n\t> div:last-child {\n\t\tposition : relative;\n\t\tpadding  : 0 calc(var(--margin) / 3);\n\t}\n"]);return zn=function(){return t},t}var Bn=s.c.div(zn()),Wn=s.c.div.attrs((function(t){var n=t.top,e=t.left,r=t.right,o=t.width,a=t.atTop;return{style:{top:n,left:e,right:"number"===typeof r?"calc(100vw - ".concat(r,"px)"):"unset",minWidth:Math.max(o,200),transformOrigin:a?"bottom":"top"}}}))(Hn(),144),Yn=function(t){switch(t){case N.EMPTY:return"Is Empty";case N.NOT_EMPTY:return"Is Not Empty";case N.EQUALS:return"Equals";case N.NOT_EQUALS:return"Not Equals";case N.LESS:return"Less Than";case N.LESS_EQUALS:return"Less Than or Equals";case N.MORE:return"Greater Than";case N.MORE_EQUALS:return"Greater Than or Equals";case N.IN:return"In";case N.NOT_IN:return"Not In"}},Vn=function(t){var n=t.operator,e=t.current,r=t.onClick;return Object(o.jsx)("div",{"data-current":e===n,onClick:function(){return r(n)},children:Yn(n)})},qn=function(t){var n=t.condition,e=t.right,r=void 0!==e&&e,i=t.onChange,c=Object(a.useRef)(null),s=Object(a.useRef)(null),d=Object(a.useState)(!1),u=Object(l.a)(d,2),p=u[0],f=u[1],b=Object(a.useState)({top:0,left:0,width:0,atTop:!1}),h=Object(l.a)(b,2),v=h[0],g=h[1];Object(a.useEffect)((function(){var t=function(){return f(!1)};return window.addEventListener("scroll",t,!0),function(){return window.removeEventListener("scroll",t,!0)}}));var j=function(t){t!==n.operator&&(n.operator=t,i(),f(!1))};return Object(o.jsxs)(Bn,{"data-expanded":p,tabIndex:0,ref:c,onClick:function(){if(!p){var t=c.current.getBoundingClientRect(),n=t.top+t.height+2;n+144>window.innerHeight?g({top:t.top-144-2,left:r?void 0:t.left,right:r?t.right:void 0,width:t.width,atTop:!0}):g({top:n,left:r?void 0:t.left,right:r?t.right:void 0,width:t.width,atTop:!1}),f(!0)}},onBlur:function(){return f(!1)},children:[Object(o.jsx)("div",{children:Yn(n.operator)}),Object(o.jsxs)(Wn,Object(U.a)(Object(U.a)({ref:s,"data-expanded":p},v),{},{children:[Object(o.jsxs)("div",{"data-role":"operators",children:[Object(o.jsx)(Vn,{current:n.operator,operator:N.EMPTY,onClick:j}),Object(o.jsx)(Vn,{current:n.operator,operator:N.NOT_EMPTY,onClick:j})]}),Object(o.jsxs)("div",{"data-role":"operators",children:[Object(o.jsx)(Vn,{current:n.operator,operator:N.EQUALS,onClick:j}),Object(o.jsx)(Vn,{current:n.operator,operator:N.NOT_EQUALS,onClick:j})]}),Object(o.jsxs)("div",{"data-role":"operators",children:[Object(o.jsx)(Vn,{current:n.operator,operator:N.LESS,onClick:j}),Object(o.jsx)(Vn,{current:n.operator,operator:N.LESS_EQUALS,onClick:j})]}),Object(o.jsxs)("div",{"data-role":"operators",children:[Object(o.jsx)(Vn,{current:n.operator,operator:N.MORE,onClick:j}),Object(o.jsx)(Vn,{current:n.operator,operator:N.MORE_EQUALS,onClick:j})]}),Object(o.jsxs)("div",{"data-role":"operators",children:[Object(o.jsx)(Vn,{current:n.operator,operator:N.IN,onClick:j}),Object(o.jsx)(Vn,{current:n.operator,operator:N.NOT_IN,onClick:j})]})]})),Object(o.jsx)("div",{onClick:function(t){t.preventDefault(),t.stopPropagation(),f(!p)},children:Object(o.jsx)(V.a,{icon:$t.f})})]})};function Qn(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\theight: 24px;\n\tline-height: 22px;\n\tborder-radius: 12px;\n\tborder: var(--border);\n\tpadding: 0 calc(var(--margin) / 2);\n\tcursor: pointer;\n\t> svg {\n\t\tmargin-right: calc(var(--margin) / 4);\n\t}\n\t&:hover,\n\t&[data-current=true] {\n\t\tborder-color: var(--console-favorite-color);\n\t\tcolor: var(--invert-color);\n\t\tbackground-color: var(--console-favorite-color);\n\t}\n\t&[data-current=true] {\n\t\tcursor: default;\n\t}\n"]);return Qn=function(){return t},t}function Jn(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: fixed;\n\tflex-direction: column;\n\tz-index: 1000;\n\ttransform: scaleY(0);\n\ttransition: transform 300ms ease-in-out;\n\tpointer-events: none;\n\tbackground-color: var(--bg-color);\n\tborder-radius: 12px;\n\tbox-shadow: var(--console-primary-hover-shadow);\n\t&[data-expanded=true] {\n\t\ttransform: scaleY(1);\n\t\tpointer-events: auto;\n\t\t&:before {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tborder-radius: 12px;\n\t\t\tbackground-color: var(--pipeline-bg-color);\n\t\t\tz-index: -1;\n\t\t}\n\t}\n\t> div {\n\t\tmin-height: ","px;\n\t\tpadding: 0 calc(var(--margin) / 2);\n\t}\n\t> div[data-role='action-category'] {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tcursor: default;\n\t\t&:not(:last-child) {\n\t\t\tfont-weight: var(--font-bold);\n\t\t}\n\t\t&:last-child {\n\t\t\tbackground-color: var(--bg-color);\n\t\t\tjustify-content: flex-end;\n\t\t\tpadding-top: 8px;\n\t\t\tpadding-bottom: 8px;\n\t\t\tborder-bottom-left-radius: 12px;\n\t\t\tborder-bottom-right-radius: 12px;\n\t\t}\n\t}\n\t> div[data-role='actions'] {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgrid-column-gap: calc(var(--margin) / 4);\n\t\tgrid-row-gap: calc(var(--margin) / 8);\n\t\tbackground-color: var(--bg-color);\n\t\tpadding: calc(var(--margin) / 8) calc(var(--margin) / 2);\n\t\tcursor: default;\n\t\t> div {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\theight: 24px;\n\t\t\tline-height: 22px;\n\t\t\tborder-radius: 12px;\n\t\t\tborder: var(--border);\n\t\t\tpadding: 0 calc(var(--margin) / 4);\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t\tcursor: pointer;\n\t\t\t&:hover,\n\t\t\t&[data-current=true] {\n\t\t\t\tborder-color: var(--console-favorite-color);\n\t\t\t\tcolor: var(--invert-color);\n\t\t\t\tbackground-color: var(--console-favorite-color);\n\t\t\t}\n\t\t\t&[data-current=true] {\n\t\t\t\tcursor: default;\n\t\t\t}\n\t\t}\n\t}\n"]);return Jn=function(){return t},t}function Xn(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\tjustify-self: flex-start;\n\tborder-radius: var(--border-radius);\n\tbackground-color: var(--pipeline-bg-color);\n\tbox-shadow: 0 0 0 1px var(--border-color);\n\theight: 22px;\n\toutline: none;\n\tappearance: none;\n\twhite-space: nowrap;\n\tcursor: pointer;\n\ttransition: all 300ms ease-in-out;\n\t&[data-expanded=true],\n\t&:hover {\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t}\n\t> div:first-child {\n\t\tposition: relative;\n\t\tpadding-left: calc(var(--margin) / 2);\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t\tborder-top-left-radius: 12px;\n\t\tborder-top-right-radius: 12px;\n\t}\n\t> div:last-child {\n\t\tposition: relative;\n\t\tpadding: 0 calc(var(--margin) / 3);\n\t}\n"]);return Xn=function(){return t},t}var Kn=s.c.div(Xn()),Zn=s.c.div.attrs((function(t){var n=t.top,e=t.left,r=t.right,o=t.width,a=t.atTop,i=t.aggregate;return{style:{top:n,left:e,right:"number"===typeof r?"calc(100vw - ".concat(r,"px)"):"unset",minWidth:Math.max(o,200),minHeight:"".concat(i?220:164,"px"),transformOrigin:a?"bottom":"top"}}}))(Jn(),28),$n=s.c.div(Qn()),te=function(t){switch(t){case C.YEAR_OF:return"Year";case C.MONTH_OF:return"Month";case C.WEEK_OF:return"Week of Year";case C.WEEKDAY:return"Weekday";case E.ABSOLUTE_VALUE:return"Abs";case E.LOGARITHM:return"Log";case E.PERCENTAGE:return"%";case T.COUNT:return"Count";case T.SUM:return"Sum";case T.AVG:return"Avg";case T.MEDIAN:return"Median";case T.MAX:return"Max";case T.MIN:return"Min";case w.NO_FUNC:default:return"No Func"}},ne=[{label:"Datetime Transform",enum:C},{label:"Numeric Compute",enum:E},{label:"Aggregate",enum:T}],ee=function(t){var n=t.arithmetic,e=t.current,r=t.onClick;return Object(o.jsx)("div",{"data-current":e===n,onClick:function(){return r(n)},children:te(n)})},re=function(t){var n=t.value,e=t.right,r=void 0!==e&&e,i=t.aggregate,c=t.onChange,s=Object(a.useRef)(null),d=Object(a.useRef)(null),u=Object(a.useState)(!1),p=Object(l.a)(u,2),f=p[0],b=p[1],h=Object(a.useState)({top:0,left:0,width:0,atTop:!1,aggregate:i}),g=Object(l.a)(h,2),j=g[0],m=g[1];Object(a.useEffect)((function(){var t=function(){return b(!1)};return window.addEventListener("scroll",t,!0),function(){return window.removeEventListener("scroll",t,!0)}}));var x=function(t){t!==n.arithmetic&&(n.arithmetic=t,c(),b(!1))},O=i?ne:ne.filter((function(t){return"Aggregate"!==t.label}));return Object(o.jsxs)(Kn,{"data-expanded":f,tabIndex:0,ref:s,onClick:function(){if(!f){var t=s.current.getBoundingClientRect(),n=t.top+t.height+2;n+220>window.innerHeight?m({top:t.top-220-2,left:r?void 0:t.left,right:r?t.right:void 0,width:t.width,atTop:!0,aggregate:i}):m({top:n,left:r?void 0:t.left,right:r?t.right:void 0,width:t.width,atTop:!1,aggregate:i}),b(!0)}},onBlur:function(){return b(!1)},children:[Object(o.jsx)("div",{children:te(n.arithmetic)}),Object(o.jsxs)(Zn,Object(U.a)(Object(U.a)({ref:d,"data-expanded":f},j),{},{children:[O.map((function(t){return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)("div",{"data-role":"action-category",children:t.label}),Object(o.jsx)("div",{"data-role":"actions",children:Object.values(t.enum).map((function(t){return Object(o.jsx)(ee,{current:n.arithmetic,arithmetic:t,onClick:x},t)}))})]},t.label)})),Object(o.jsx)("div",{"data-role":"action-category",children:Object(o.jsxs)($n,{"data-current":!n.arithmetic||n.arithmetic===w.NO_FUNC,onClick:function(){n.arithmetic&&n.arithmetic!==w.NO_FUNC&&(n.arithmetic=w.NO_FUNC,c(),b(!1))},children:[Object(o.jsx)(V.a,{icon:v.Gb}),Object(o.jsx)("span",{children:"No Func"})]})})]})),Object(o.jsx)("div",{onClick:function(t){t.preventDefault(),t.stopPropagation(),b(!f)},children:Object(o.jsx)(V.a,{icon:$t.f})})]})},oe=function(t){var n=t.holder,e=t.onChange,r=n.topicId,a=n.factorId,i=ut().store.topics,c=Object(W.f)(),s=r?i.find((function(t){return t.topicId==r})):void 0,d=a?null===s||void 0===s?void 0:s.factors.find((function(t){return t.factorId==a})):void 0;return Object(o.jsx)(An,{typeChar:"Factor",item:d,asLabel:function(t){return t&&t.label||""},filterItems:function(t){return Dn((null===s||void 0===s?void 0:s.factors)||[],t)},onSelect:function(t){n.factorId=t.factorId,e(),c()}})};function ae(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\t> div:first-child {\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t\tborder-radius: var(--border-radius) 0 0 var(--border-radius);\n\t\t&[data-expanded=true] {\n\t\t\t> div:last-child {\n\t\t\t\tpadding-right: calc(var(--margin) / 3);\n\t\t\t}\n\t\t}\n\t}\n\t> div:nth-child(2) {\n\t\tflex-grow: 1;\n\t\tborder-radius: 0;\n\t\tbox-shadow: 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color), 1px 0 0 0 var(--border-color);\n\t\t&:hover {\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t}\n\t\t> input {\n\t\t\tborder-radius: 0;\n\t\t}\n\t}\n\t> input {\n\t\tflex-grow: 1;\n\t\theight: 22px;\n\t\tborder: 0;\n\t\tborder-radius: 0;\n\t\tbox-shadow: 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color), 1px 0 0 0 var(--border-color);\n\t}\n\t> div:last-child {\n\t\tborder-radius: 0 var(--border-radius) var(--border-radius) 0;\n\t\tbox-shadow: 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color), 1px 0 0 0 var(--border-color);\n\t\t&:hover {\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t}\n\t}\n"]);return ae=function(){return t},t}var ie,ce,se=s.c.div(ae()),de=function(t,n){switch(t){case k.IN_MEMORY:return"Memory Context";case k.FACTOR:default:return n?"Topic: ".concat(n.name):"Source Topic"}},le=function(t){var n=t.holder,e=t.onTopicChange,r=t.onFactorChange,a=t.onVariableChange,i=t.onArithmeticChange,c=t.aggregate,s=n.type,d=void 0===s?k.FACTOR:s,l=ut().store,u=l.selectedPipeline,p=l.topics,f=Object(W.f)(),b=u.topicId,h=p.find((function(t){return t.topicId==b}));Fn(n)&&!n.topicId&&(n.topicId=b);return Object(o.jsxs)(se,{children:[Object(o.jsx)(vn,{label:de(d,h),options:Object.values(k).filter((function(t){return t!==d})),toLabel:function(t){return de(t,h)},onSelect:function(t){n.type=t,Fn(n)&&(n.topicId=b),e(),f()}}),Fn(n)?Object(o.jsx)(oe,{holder:n,onChange:r}):null,Gn(n)?Object(o.jsx)(fn,{value:n.name||"",onChange:function(t){var e=t.target.value;Gn(n)&&(n.name=e,a()),f()},placeholder:"Variable name..."}):null,Fn(n)||Gn(n)?Object(o.jsx)(re,{aggregate:c,value:n,right:!0,onChange:i}):null]})},ue=function(t){return t.split("-").map((function(t){return["or","and","to","from"].includes(t)?t:t.substr(0,1).toUpperCase()+t.substr(1)})).join(" ")},pe=function(){return{uuid:Object(H.a)(),name:"",units:[fe()]}},fe=function(){return{uuid:Object(H.a)(),do:[be()]}},be=function(){return{uuid:Object(H.a)(),type:S.ALARM,severity:P.MEDIUM}},he=(ie={},Object(Y.a)(ie,N.EMPTY,"Is Empty"),Object(Y.a)(ie,N.NOT_EMPTY,"Is Not Empty"),Object(Y.a)(ie,N.EQUALS,"="),Object(Y.a)(ie,N.NOT_EQUALS,"\u2260"),Object(Y.a)(ie,N.LESS,"<"),Object(Y.a)(ie,N.LESS_EQUALS,"\u2264"),Object(Y.a)(ie,N.MORE,">"),Object(Y.a)(ie,N.MORE_EQUALS,"\u2265"),Object(Y.a)(ie,N.IN,"In"),Object(Y.a)(ie,N.NOT_IN,"Not In"),ie),ve=function(t){return he[t]},ge=(ce={},Object(Y.a)(ce,w.NO_FUNC,""),Object(Y.a)(ce,C.YEAR_OF,"Year"),Object(Y.a)(ce,C.MONTH_OF,"Month"),Object(Y.a)(ce,C.WEEK_OF,"WeekOfYear"),Object(Y.a)(ce,C.WEEKDAY,"Weekday"),Object(Y.a)(ce,E.PERCENTAGE,"Percentage"),Object(Y.a)(ce,E.ABSOLUTE_VALUE,"Abs"),Object(Y.a)(ce,E.LOGARITHM,"Log"),Object(Y.a)(ce,T.SUM,"Summary"),Object(Y.a)(ce,T.AVG,"Average"),Object(Y.a)(ce,T.COUNT,"Count"),Object(Y.a)(ce,T.MEDIAN,"Median"),Object(Y.a)(ce,T.MAX,"Maximum"),Object(Y.a)(ce,T.MIN,"Minimum"),ce),je=function(t){return ge[t]};function me(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n"]);return me=function(){return t},t}function xe(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\t> div:first-child {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 22px;\n\t\tpadding: 0 calc(var(--margin) / 2);\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tbox-shadow: 0 0 0 1px var(--border-color);\n\t\tborder-top-left-radius: var(--border-radius);\n\t\tborder-bottom-left-radius: var(--border-radius);\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\t> div:nth-child(2) {\n\t\tflex-grow: 1;\n\t\tborder-top-left-radius: 0;\n\t\tborder-bottom-left-radius: 0;\n\t\tbox-shadow: 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color), 1px 0 0 0 var(--border-color);\n\t\t&:hover {\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t}\n\t\t> input {\n\t\t\tborder-top-left-radius: 0;\n\t\t\tborder-bottom-left-radius: 0;\n\t\t}\n\t}\n"]);return xe=function(){return t},t}function Oe(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: fixed;\n\tflex-direction: column;\n\tz-index: 1000;\n\theight: ","px;\n\tpadding: 0 calc(var(--margin) / 2);\n\ttransform: scaleY(0);\n\ttransition: transform 300ms ease-in-out;\n\tpointer-events: none;\n\tbackground-color: var(--bg-color);\n\tborder-radius: calc(var(--border-radius) * 3);\n\tbox-shadow: var(--console-primary-hover-shadow);\n\t&[data-expanded=true] {\n\t\ttransform: none;\n\t\tpointer-events: auto;\n\t}\n\t> div {\n\t\theight: 28px;\n\t\t&:first-child {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\theight: 32px;\n\t\t\tbackground-color: var(--pipeline-bg-color);\n\t\t\tmargin: 0 calc(var(--margin) / -2) 2px;\n\t\t\tpadding: 0 calc(var(--margin) / 2);\n\t\t\tfont-weight: var(--font-bold);\n\t\t}\n\t\t&:last-child {\n\t\t\tmargin-bottom: 2px;\n\t\t}\n\t}\n"]);return Oe=function(){return t},t}function ye(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\tjustify-self: flex-start;\n\tborder-radius: 12px;\n\tbackground-color: transparent;\n\theight: 22px;\n\tline-height: 22px;\n\toutline: none;\n\tappearance: none;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tcursor: pointer;\n\ttransition: all 300ms ease-in-out;\n\t&[data-expanded=true],\n\t&:hover {\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t> div:first-child {\n\t\t\tpadding-left: calc(var(--margin) / 2);\n\t\t}\n\t\t> div:not(:first-child) {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n\t&[data-expanded=true] > div:nth-child(2) > svg {\n\t\ttransform: rotateZ(180deg);\n\t}\n\t> div:first-child {\n\t\tflex-grow: 1;\n\t\tposition: relative;\n\t\tfont-weight: var(--font-bold);\n\t\tfont-variant: petite-caps;\n\t\tborder-top-left-radius: 12px;\n\t\tborder-bottom-left-radius: 12px;\n\t\ttransition: all 300ms ease-in-out;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\t> div:not(:first-child) {\n\t\tposition: relative;\n\t\tpadding: 0 calc(var(--margin) / 3);\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t\ttransition: all 300ms ease-in-out;\n\t\t> svg {\n\t\t\tfont-size: 0.8em;\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t}\n\t\t&:not(:nth-child(2)):before {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\tleft: 0;\n\t\t\ttop: 20%;\n\t\t\twidth: 1px;\n\t\t\theight: 60%;\n\t\t\tbackground-color: var(--border-color);\n\t\t}\n\t}\n"]);return ye=function(){return t},t}function Ie(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tposition: relative;\n\theight: 32px;\n\t&:before,\n\t&:after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tbackground-color: var(--border-color);\n\t}\n\t&:before {\n\t\ttop: 16px;\n\t\tleft: calc(var(--margin) / -2);\n\t\twidth: calc(var(--margin) / 2 - 4px);\n\t\theight: 1px;\n\t}\n\t&:after {\n\t\ttop: 0;\n\t\tleft: calc(var(--margin) / -2);\n\t\twidth: 1px;\n\t\theight: 16px;\n\t}\n\t&:not(:last-child):after {\n\t\theight: 100%;\n\t}\n"]);return Ie=function(){return t},t}var we=s.c.div.attrs({"data-widget":"plain-condition"})(Ie()),Ce=s.c.div(ye()),Ee=s.c.div.attrs((function(t){var n=t.top,e=t.left,r=t.width,o=t.atTop;return{style:{top:n,left:e,minWidth:Math.max(r,600),transformOrigin:o?"bottom":"top"}}}))(Oe(),120),Te=s.c.div(xe()),ke=s.c.div(me()),Ne=function(t){var n=t.topic,e=t.condition,r=t.topics,o="";if(n){var a=e.left;if(a.topicId!=n.topicId&&(a.topicId=n.topicId,delete a.factorId),o+="".concat(n.name,"."),a.factorId){var i=n.factors.find((function(t){return t.factorId==a.factorId}));o+=i?i.label:"?"}else o+="?"}o+=" ".concat(ve(e.operator)," ");var c="";if(Fn(e.right)){var s=e.right.topicId,d=s?r.find((function(t){return t.topicId==s})):null;if(d){c+="".concat(d.name,".");var l=e.right.factorId,u=l?d.factors.find((function(t){return t.factorId==l})):null;c+=u?u.label:"?"}else c+="?.?"}else Gn(e.right)&&(c+="Memory Context.".concat(e.right.name||"?"));var p=je(e.right.arithmetic);return p&&(c="".concat(p,"(").concat(c,")")),o+c},Ae=function(t){var n=t.topic,e=t.condition,r=ut().store.topics,i=un(),c=i.addPropertyChangeListener,s=i.removePropertyChangeListener,d=Object(W.f)();return Object(a.useEffect)((function(){return c(on.FILTER_CHANGED,d),function(){return s(on.FILTER_CHANGED,d)}})),Object(o.jsx)("div",{children:Ne({topic:n,condition:e,topics:r})})},Se=function(t){var n=t.left,e=t.grandParent,r=t.parent,i=t.condition,c=ut().store.selectedTopic,s=un().firePropertyChange,d=Object(a.useRef)(null),u=Object(a.useRef)(null),p=Object(a.useRef)(null),f=Object(a.useState)(!1),b=Object(l.a)(f,2),h=b[0],g=b[1],j=Object(a.useState)({top:0,left:0,width:0,atTop:!1}),m=Object(l.a)(j,2),x=m[0],O=m[1];Object(W.e)(d,(function(){return g(!1)})),function(t){var n=t.condition,e=t.topic,r=t.selectedTopic;n.left||(n.left={arithmetic:w.NO_FUNC},e?(n.left.type=k.FACTOR,n.left.topicId=e.topicId):n.left.type=k.IN_MEMORY),n.right||(n.right={type:k.FACTOR,topicId:null===r||void 0===r?void 0:r.topicId,arithmetic:w.NO_FUNC})}({condition:i,topic:n,selectedTopic:c});var y=function(){return s(on.FILTER_CHANGED)};return Object(o.jsxs)(we,{ref:d,children:[Object(o.jsxs)(Ce,{ref:u,tabIndex:0,"data-expanded":h,onClick:function(){if(!h){var t=u.current.getBoundingClientRect(),n=t.top+t.height+2;n+120>window.innerHeight?O({top:t.top-120-2,left:t.left,width:t.width,atTop:!0}):O({top:n,left:t.left,width:t.width,atTop:!1}),g(!0)}},children:[Object(o.jsx)(Ae,{topic:n,condition:i}),Object(o.jsx)("div",{children:Object(o.jsx)(V.a,{icon:h?v.y:v.I})}),e?Object(o.jsx)("div",{onClick:function(t){if(t.preventDefault(),t.stopPropagation(),e&&r){var n=r.children.findIndex((function(t){return t===i})),o=e.children.findIndex((function(t){return t===r}));r.children.splice(n,1),e.children.splice(o+1,0,i),s(on.FILTER_OUTDENT)}},children:Object(o.jsx)(V.a,{icon:v.ab})}):null,Object(o.jsx)("div",{onClick:function(t){t.preventDefault(),t.stopPropagation();var n={mode:A.AND,children:[i]};r.mode===A.AND&&(n.mode=A.OR);var e=r.children.findIndex((function(t){return t===i}));r.children.splice(e,1,n),s(on.FILTER_INDENT)},children:Object(o.jsx)(V.a,{icon:v.bb})}),Object(o.jsx)("div",{onClick:function(t){if(t.preventDefault(),t.stopPropagation(),r){var n=r.children.findIndex((function(t){return t===i}));r.children.splice(n,1),s(on.FILTER_REMOVED)}},children:Object(o.jsx)(V.a,{icon:$t.g})})]}),Object(o.jsxs)(Ee,Object(U.a)(Object(U.a)({ref:p,"data-expanded":h},x),{},{children:[Object(o.jsx)("div",{children:"Expression Setting"}),Fn(i.left)?Object(o.jsxs)(Te,{children:[Object(o.jsxs)("div",{children:["Topic: ",null===n||void 0===n?void 0:n.name]}),Object(o.jsx)(oe,{holder:i.left,onChange:y})]}):null,Object(o.jsx)(ke,{children:Object(o.jsx)(qn,{condition:i,onChange:y})}),Object(o.jsx)(le,{holder:i.right,onTopicChange:y,onFactorChange:y,onVariableChange:y,onArithmeticChange:y,aggregate:!1})]}))]})};function Re(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding-left: var(--margin);\n\ttransform-origin: top;\n\ttransition: all 300ms ease-in-out;\n"]);return Re=function(){return t},t}function De(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\tpadding: 0 var(--margin);\n\tmin-height: 32px;\n\theight: 32px;\n\toverflow: hidden;\n\ttransition: all 300ms ease-in-out;\n\t&:before,\n\t&:after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tbackground-color: var(--border-color);\n\t}\n\t&:before {\n\t\ttop: 16px;\n\t\tleft: calc(var(--margin) / 2);\n\t\twidth: calc(var(--margin) / 2 - 4px);\n\t\theight: 1px;\n\t}\n\t&:after {\n\t\ttop: 0;\n\t\tleft: calc(var(--margin) / 2);\n\t\twidth: 1px;\n\t\theight: 16px;\n\t}\n"]);return De=function(){return t},t}function Pe(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: auto auto auto 1fr;\n\theight: 32px;\n\tmin-height: 32px;\n\talign-items: center;\n\ttransition: all 300ms ease-in-out;\n\t&:hover {\n\t\t> div:nth-child(3) {\n\t\t\tborder-top-right-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\t\t}\n\t\t> div:nth-child(4) {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n\t&[data-expanded=false] {\n\t\t> div:first-child > svg {\n\t\t\ttransform: rotateZ(-90deg);\n\t\t}\n\t\t+ div {\n\t\t\tmin-height: 0;\n\t\t\theight: 0;\n\t\t}\n\t}\n\t> div:first-child {\n\t\tdisplay: flex;\n\t\twidth: var(--margin);\n\t\tjustify-content: center;\n\t\tcursor: pointer;\n\t\t> svg {\n\t\t\topacity: 0.7;\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t}\n\t}\n\t> div:nth-child(2) {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 22px;\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t\tborder-top-left-radius: 11px;\n\t\tborder-bottom-left-radius: 11px;\n\t\tpadding: 0 calc(var(--margin) / 3);\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tbox-shadow: 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color), -1px 0 0 0 var(--border-color);\n\t}\n\t> div:nth-child(3) {\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t\ttext-transform: capitalize;\n\t\tborder-top-left-radius: 0;\n\t\tborder-bottom-left-radius: 0;\n\t}\n\t> div:nth-child(4) {\n\t\tdisplay: flex;\n\t\tjustify-self: start;\n\t\tcursor: pointer;\n\t\tborder-top-right-radius: 11px;\n\t\tborder-bottom-right-radius: 11px;\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t\ttransition: all 300ms ease-in-out;\n\t\t> div {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\theight: 22px;\n\t\t\tbox-shadow: 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color), 1px 0 0 0 var(--border-color);\n\t\t\tpadding: 0 calc(var(--margin) / 3);\n\t\t\tfont-size: 0.8em;\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t\t&:hover {\n\t\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t\t\tpointer-events: auto;\n\t\t\t}\n\t\t\t&:last-child {\n\t\t\t\tborder-top-right-radius: 11px;\n\t\t\t\tborder-bottom-right-radius: 11px;\n\t\t\t}\n\t\t}\n\t}\n"]);return Pe=function(){return t},t}function _e(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\tflex-direction: column;\n\t&[data-removable=true] {\n\t\t&:before,\n\t\t&:after {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\tbackground-color: var(--border-color);\n\t\t}\n\t\t&:before {\n\t\t\ttop: 16px;\n\t\t\tleft: calc(var(--margin) / -2);\n\t\t\twidth: calc(var(--margin) / 2 - 4px);\n\t\t\theight: 1px;\n\t\t}\n\t\t&:after {\n\t\t\ttop: 0;\n\t\t\tleft: calc(var(--margin) / -2);\n\t\t\twidth: 1px;\n\t\t\theight: 16px;\n\t\t}\n\t\t&:not(:last-child):after {\n\t\t\theight: 100%;\n\t\t}\n\t}\n"]);return _e=function(){return t},t}var Le=s.c.div.attrs({"data-widget":"composite-condition"})(_e()),Me=s.c.div.attrs({"data-widget":"composite-condition-title"})(Pe()),Fe=s.c.div.attrs({"data-widget":"composite-condition-no-child"})(De()),Ge=s.c.div.attrs((function(t){var n=t.count,e=t.visible;return{"data-widget":"composite-condition-children",style:{maxHeight:e?32*n:0,transform:e?"none":"rotateX(90deg)"}}}))(Re()),Ue=function(t){var n=t.left,e=t.parent,r=t.condition,a=t.visible,i=t.level,c=Ln(r)-1;return Object(o.jsx)(Ge,{visible:a,count:c,children:r.children.map((function(t,a){if(Pn(t))return Object(o.jsx)(He,{left:n,grandParent:e,parent:r,condition:t,removable:!0,level:i},a);var c=t;return Object(o.jsx)(Se,{left:n,grandParent:e,parent:r,condition:c},a)}))})},He=function(t){var n=t.left,e=t.grandParent,r=t.parent,i=t.condition,c=t.removable,s=t.level,d=un().firePropertyChange,u=Object(a.useState)(!0),p=Object(l.a)(u,2),f=p[0],b=p[1],h=Object(W.f)(),g=i.mode;return Object(o.jsxs)(Le,{"data-expanded":f,"data-removable":c,children:[Object(o.jsxs)(Me,{"data-expanded":f,children:[Object(o.jsx)("div",{onClick:function(){return b(!f)},children:Object(o.jsx)(V.a,{icon:v.r})}),Object(o.jsxs)("div",{children:["Lv",s]}),Object(o.jsx)(vn,{label:g,options:[A.AND,A.OR].filter((function(t){return t!==i.mode})),toLabel:function(t){return t},onSelect:function(t){i.mode=t,d(on.FACTOR_CHANGED),h()}}),Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{onClick:function(){i.children.push({operator:N.EQUALS}),f?h():b(!0),d(on.FILTER_ADDED)},children:Object(o.jsx)(V.a,{icon:v.jb})}),e?Object(o.jsx)("div",{onClick:function(){if(e&&r){var t=r.children.findIndex((function(t){return t===i})),n=e.children.findIndex((function(t){return t===r}));r.children.splice(t,1),e.children.splice(n+1,0,i),d(on.FILTER_OUTDENT)}},children:Object(o.jsx)(V.a,{icon:v.ab})}):null,c?Object(o.jsx)("div",{onClick:function(t){if(r){var n={mode:A.AND,children:[i]};r.mode===A.AND&&(n.mode=A.OR);var e=r.children.findIndex((function(t){return t===i}));r.children.splice(e,1,n),d(on.FILTER_INDENT)}},children:Object(o.jsx)(V.a,{icon:v.bb})}):null,c?Object(o.jsx)("div",{onClick:function(){if(r){var t=r.children.findIndex((function(t){return t===i}));r.children.splice(t,1),d(on.FILTER_REMOVED)}},children:Object(o.jsx)(V.a,{icon:$t.g})}):null]})]}),0===i.children.length?Object(o.jsx)(Fe,{children:"No Child Defined."}):Object(o.jsx)(Ue,{left:n,parent:r,condition:i,visible:f,level:s+1})]})};function ze(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n\ttransform-origin: top;\n\ttransition: all 300ms ease-in-out;\n\t&::-webkit-scrollbar {\n\t\tbackground-color: transparent;\n\t\twidth: 4px;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color: transparent;\n\t\tborder-radius: 2px;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--console-favorite-color);\n\t\tborder-radius: 2px;\n\t}\n"]);return ze=function(){return t},t}function Be(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-self: start;\n\theight: 22px;\n\tborder-radius: 11px;\n\tbackground-color: var(--pipeline-bg-color);\n\tcursor: pointer;\n\tbox-shadow: 0 0 0 1px var(--border-color);\n\ttransition: all 300ms ease-in-out;\n\t&:hover {\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t}\n\t&[data-expanded=true] > svg {\n\t\ttransform: rotateZ(180deg);\n\t}\n\t> span {\n\t\tpadding-left: calc(var(--margin) / 2);\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t}\n\t> svg:nth-child(2) {\n\t\tfont-size: 0.9em;\n\t\tmargin: 0 calc(var(--margin) / 3);\n\t\ttransition: all 300ms ease-in-out;\n\t}\n"]);return Be=function(){return t},t}function We(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\theight: 32px;\n"]);return We=function(){return t},t}function Ye(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return Ye=function(){return t},t}var Ve=s.c.div(Ye()),qe=s.c.div(We()),Qe=s.c.div(Be()),Je=s.c.div.attrs((function(t){var n=t.lines,e=t.expanded;return{style:{maxHeight:e?32*n:0,transform:e?"none":"rotateX(90deg)"}}}))(ze()),Xe=function(t){var n=t.topic,e=t.count;return n?0===e?Object(o.jsx)("span",{children:"No Filter Defined"}):1===e?Object(o.jsx)("span",{children:"1 Filter"}):Object(o.jsxs)("span",{children:[e," Filters"]}):Object(o.jsx)("span",{children:"Pick Topic First"})},Ke=function(t){var n=t.holder,e=ut().store.topics,r=un(),i=r.addPropertyChangeListener,c=r.removePropertyChangeListener,s=Object(a.useState)(!1),d=Object(l.a)(s,2),u=d[0],p=d[1],f=Object(W.f)();Object(a.useEffect)((function(){return i(on.TOPIC_CHANGED,f),i(on.FILTER_ADDED,f),i(on.FILTER_REMOVED,f),i(on.FILTER_INDENT,f),i(on.FILTER_OUTDENT,f),function(){c(on.TOPIC_CHANGED,f),c(on.FILTER_ADDED,f),c(on.FILTER_REMOVED,f),c(on.FILTER_INDENT,f),c(on.FILTER_OUTDENT,f)}}));var b=e.find((function(t){return t.topicId==n.topicId}));n.by||(n.by={mode:A.AND,children:[]});var h=Ln(n.by),g=Mn(n.by);return Object(o.jsxs)(Ve,{children:[Object(o.jsx)(qe,{children:Object(o.jsxs)(Qe,{"data-expanded":u,onClick:function(){b&&p(!u)},children:[Object(o.jsx)(Xe,{topic:b,count:g}),Object(o.jsx)(V.a,{icon:u?v.z:v.J})]})}),b?Object(o.jsx)(Je,{lines:h,expanded:u,children:Object(o.jsx)(He,{left:b,condition:n.by,removable:!1,level:1})}):null]})};function Ze(){var t=Object(r.a)(["\n\tdisplay: flex;\n\t> div {\n\t\twidth: 50%;\n\t}\n\t> div:first-child {\n\t\twidth: calc(50% + 1px);\n\t\tborder-bottom-right-radius: 0;\n\t\tborder-top-right-radius: 0;\n\t\t> input {\n\t\t\tborder-radius: 0;\n\t\t}\n\t}\n\t> div:last-child {\n\t\tborder-bottom-left-radius: 0;\n\t\tborder-top-left-radius: 0;\n\t\tbox-shadow: 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color), 1px 0 0 0 var(--border-color);\n\t\t&:hover {\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t}\n\t}\n"]);return Ze=function(){return t},t}var $e,tr=s.c.div(Ze()),nr=function(t){var n=t.holder,e=t.onTopicChange,r=t.onFactorChange,a=n.topicId,i=n.factorId,c=ut().store.topics,s=Object(W.f)(),d=a?c.find((function(t){return t.topicId==a})):void 0,l=i?null===d||void 0===d?void 0:d.factors.find((function(t){return t.factorId==i})):void 0;return Object(o.jsxs)(tr,{children:[Object(o.jsx)(An,{typeChar:"Topic",item:d,asLabel:function(t){return t?t.name:""},filterItems:function(t){return Rn(c,t)},onSelect:function(t){n.topicId!=t.topicId&&(n.topicId=t.topicId,e(),delete n.factorId,r(),s())}}),Object(o.jsx)(An,{typeChar:"Factor",item:l,asLabel:function(t){return t?t.label:""},filterItems:function(t){return Dn((null===d||void 0===d?void 0:d.factors)||[],t)},onSelect:function(t){n.factorId=t.factorId,r(),s()}})]})};!function(t){t.FROM_CHANGED="from-changed",t.TO_CHANGED="to-changed"}($e||($e={}));var er=i.a.createContext({});er.displayName="PipelineUnitActionMappingContext";var rr=function(t){var n=t.children,e=un().firePropertyChange,r=Object(a.useState)((function(){var t=new K.EventEmitter;return t.setMaxListeners(1e3),t})),i=Object(l.a)(r,1)[0];return Object(o.jsx)(er.Provider,{value:{firePropertyChange:function(t){i.emit(t),e(on.MAPPING_CHANGED)},addPropertyChangeListener:function(t,n){return i.on(t,n)},removePropertyChangeListener:function(t,n){return i.off(t,n)}},children:n})},or=function(){return i.a.useContext(er)};function ar(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\talign-self: flex-start;\n\theight: 22px;\n\tfont-variant: petite-caps;\n\tfont-weight: var(--font-demi-bold);\n\tmargin: 5px 0 5px 32px;\n\tborder-radius: 11px;\n\tcursor: pointer;\n\ttransition: all 300ms ease-in-out;\n\t&:before, &:after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tleft: calc(var(--margin) / -2);\n\t\tbackground-color: var(--border-color);\n\t}\n\t&:before {\n\t\ttop: -5px;\n\t\twidth: 1px;\n\t\theight: calc(50% + 5px);\n\t}\n\t&:after {\n\t\ttop: calc(var(--margin) / 2 - 5px);\n\t\twidth: 10px;\n\t\theight: 1px;\n\t}\n\t&[data-can-sort=false] {\n\t\t> span {\n\t\t\tborder-top-right-radius: 11px;\n\t\t\tborder-bottom-right-radius: 11px;\n\t\t}\n\t\t> div:nth-last-child(-n + 2) {\n\t\t\topacity: 0;\n\t\t\tpointer-events: none;\n\t\t}\n\t}\n\t> span {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 22px;\n\t\tpadding: 0 calc(var(--margin) / 3) 0 calc(var(--margin) / 2);\n\t\tborder-top-left-radius: 11px;\n\t\tborder-bottom-left-radius: 11px;\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tbox-shadow: 0 0 0 1px var(--border-color);\n\t\t&:hover {\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t}\n\t\t> svg {\n\t\t\tfont-size: 0.8em;\n\t\t\tmargin-left: calc(var(--margin) / 3);\n\t\t}\n\t}\n\t> div:nth-last-child(-n + 2) {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 22px;\n\t\tposition: relative;\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tbox-shadow: 1px 0 0 0 var(--border-color), 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color);\n\t\topacity: 1;\n\t\tpointer-events: auto;\n\t\ttransition: all 300ms ease-in-out;\n\t\t&:hover {\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t}\n\t}\n\t> div:nth-last-child(2) {\n\t\tpadding: 0 calc(var(--margin) / 3);\n\t}\n\t> div:last-child {\n\t\tborder-top-right-radius: 11px;\n\t\tborder-bottom-right-radius: 11px;\n\t\tpadding: 0 calc(var(--margin) / 3);\n\t}\n"]);return ar=function(){return t},t}function ir(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n"]);return ir=function(){return t},t}function cr(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\t> div:first-child {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 22px;\n\t\tpadding: 0 calc(var(--margin) / 2);\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tbox-shadow: 0 0 0 1px var(--border-color);\n\t\tborder-top-left-radius: var(--border-radius);\n\t\tborder-bottom-left-radius: var(--border-radius);\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\t> div:nth-child(2) {\n\t\tflex-grow: 1;\n\t\tborder-top-left-radius: 0;\n\t\tborder-bottom-left-radius: 0;\n\t\tbox-shadow: 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color), 1px 0 0 0 var(--border-color);\n\t\t&:hover {\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t}\n\t\t> input {\n\t\t\tborder-top-left-radius: 0;\n\t\t\tborder-bottom-left-radius: 0;\n\t\t}\n\t}\n"]);return cr=function(){return t},t}function sr(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: fixed;\n\tflex-direction: column;\n\tz-index: 1000;\n\theight: ","px;\n\tpadding: 0 calc(var(--margin) / 2);\n\ttransform: scaleY(0);\n\ttransition: transform 300ms ease-in-out;\n\tpointer-events: none;\n\tbackground-color: var(--bg-color);\n\tborder-radius: calc(var(--border-radius) * 3);\n\tbox-shadow: var(--console-primary-hover-shadow);\n\t&[data-expanded=true] {\n\t\ttransform: none;\n\t\tpointer-events: auto;\n\t}\n\t> div {\n\t\theight: 28px;\n\t\t&:first-child {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\theight: 32px;\n\t\t\tbackground-color: var(--pipeline-bg-color);\n\t\t\tmargin: 0 calc(var(--margin) / -2) 2px;\n\t\t\tpadding: 0 calc(var(--margin) / 2);\n\t\t\tfont-weight: var(--font-bold);\n\t\t}\n\t\t&:last-child {\n\t\t\tmargin-bottom: 2px;\n\t\t}\n\t}\n"]);return sr=function(){return t},t}function dr(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-self: center;\n\tjustify-self: start;\n\tborder-radius: 12px;\n\tbackground-color: transparent;\n\theight: 22px;\n\tline-height: 22px;\n\toutline: none;\n\tappearance: none;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tcursor: pointer;\n\ttransition: all 300ms ease-in-out;\n\t&[data-expanded=true],\n\t&:hover {\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t> div:first-child {\n\t\t\tpadding-left: calc(var(--margin) / 2);\n\t\t}\n\t\t> div:not(:first-child) {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n\t&[data-expanded=true] > div:nth-child(2) > svg {\n\t\ttransform: rotateZ(180deg);\n\t}\n\t> div:first-child {\n\t\tposition: relative;\n\t\tfont-weight: var(--font-bold);\n\t\tfont-variant: petite-caps;\n\t\tborder-top-left-radius: 12px;\n\t\tborder-bottom-left-radius: 12px;\n\t\ttransition: all 300ms ease-in-out;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\t> div:not(:first-child) {\n\t\tposition: relative;\n\t\tpadding: 0 calc(var(--margin) / 3);\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t\ttransition: all 300ms ease-in-out;\n\t\t> svg {\n\t\t\tfont-size: 0.8em;\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t}\n\t\t&:not(:nth-child(2)):before {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\tleft: 0;\n\t\t\ttop: 20%;\n\t\t\twidth: 1px;\n\t\t\theight: 60%;\n\t\t\tbackground-color: var(--border-color);\n\t\t}\n\t}\n"]);return dr=function(){return t},t}function lr(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-self: stretch;\n\theight: 32px;\n"]);return lr=function(){return t},t}function ur(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tposition: relative;\n\tgrid-template-columns: 32px calc(100% - 32px);\n\tgrid-auto-rows: 32px;\n\tflex-grow: 1;\n\tmax-height: 320px;\n\toverflow-y: auto;\n\t//padding: 10px 0;\n\t//margin: 10px 0;\n\t&::-webkit-scrollbar {\n\t\tbackground-color: transparent;\n\t\twidth: 4px;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color: transparent;\n\t\tborder-radius: 2px;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--console-favorite-color);\n\t\tborder-radius: 2px;\n\t}\n\t> div:nth-child(2n + 1) {\n\t\tposition: relative;\n\t\theight: 32px;\n\t\t&:before, &:after {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\tleft: calc(var(--margin) / 2);\n\t\t\tbackground-color: var(--border-color);\n\t\t}\n\t\t&:before {\n\t\t\ttop: 0;\n\t\t\twidth: 1px;\n\t\t\theight: 100%;\n\t\t}\n\t\t&:after {\n\t\t\ttop: calc(var(--margin) / 2);\n\t\t\twidth: 10px;\n\t\t\theight: 1px;\n\t\t}\n\t}\n"]);return ur=function(){return t},t}function pr(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n\ttransform-origin: top;\n\ttransition: all 300ms ease-in-out;\n"]);return pr=function(){return t},t}function fr(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-self: start;\n\theight: 22px;\n\tcursor: pointer;\n\ttransition: all 300ms ease-in-out;\n\t&[data-expanded=true] > span > svg {\n\t\ttransform: rotateZ(180deg);\n\t}\n\t&[data-can-sort=false] {\n\t\t> span {\n\t\t\tborder-top-right-radius: 11px;\n\t\t\tborder-bottom-right-radius: 11px;\n\t\t}\n\t\t> div:nth-last-child(-n + 2) {\n\t\t\topacity: 0;\n\t\t\tpointer-events: none;\n\t\t}\n\t}\n\t> span {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 22px;\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t\tpadding: 0 calc(var(--margin) / 3) 0 calc(var(--margin) / 2);\n\t\tborder-top-left-radius: 11px;\n\t\tborder-bottom-left-radius: 11px;\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tbox-shadow: 0 0 0 1px var(--border-color);\n\t\t&:hover {\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t}\n\t\t> svg {\n\t\t\tfont-size: 0.9em;\n\t\t\tmargin-left: calc(var(--margin) / 3);\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t}\n\t}\n\t> div:nth-last-child(-n + 2) {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 22px;\n\t\tposition: relative;\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tbox-shadow: 1px 0 0 0 var(--border-color), 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color);\n\t\topacity: 1;\n\t\tpointer-events: auto;\n\t\ttransition: all 300ms ease-in-out;\n\t\t&:hover {\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t}\n\t}\n\t> div:nth-last-child(2) {\n\t\tpadding: 0 calc(var(--margin) / 3);\n\t}\n\t> div:last-child {\n\t\tborder-top-right-radius: 11px;\n\t\tborder-bottom-right-radius: 11px;\n\t\tpadding: 0 calc(var(--margin) / 3);\n\t}\n\t//&:hover {\n\t//\tbox-shadow: var(--console-primary-hover-shadow);\n\t//}\n\t//&[data-expanded=true] > svg {\n\t//\ttransform: rotateZ(180deg);\n\t//}\n\t//> span {\n\t//\tpadding-left: calc(var(--margin) / 2);\n\t//\tfont-variant: petite-caps;\n\t//\tfont-weight: var(--font-demi-bold);\n\t//}\n\t//> svg:nth-child(2) {\n\t//\tfont-size: 0.9em;\n\t//\tmargin: 0 calc(var(--margin) / 3);\n\t//\ttransition: all 300ms ease-in-out;\n\t//}\n"]);return fr=function(){return t},t}function br(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\theight: 32px;\n"]);return br=function(){return t},t}function hr(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return hr=function(){return t},t}var vr,gr,jr=s.c.div(hr()),mr=s.c.div(br()),xr=s.c.div(fr()),Or=s.c.div.attrs((function(t){var n=t.lines,e=t.expanded;return{style:{maxHeight:e?Math.min(32*(n+1),352):0,transform:e?"none":"rotateX(90deg)"}}}))(pr()),yr=s.c.div.attrs((function(t){return{"data-scrolling":t.lines>10}}))(ur()),Ir=s.c.div(lr()),wr=s.c.div(dr()),Cr=s.c.div.attrs((function(t){var n=t.top,e=t.left,r=t.width,o=t.atTop;return{style:{top:n,left:e,minWidth:Math.max(r,600),transformOrigin:o?"bottom":"top"}}}))(sr(),120),Er=s.c.div(cr()),Tr=s.c.div(ir()),kr=s.c.div(ar()),Nr=function(t,n){var e="",r=t.topicId,o=r?n.find((function(t){return t.topicId==r})):null;if(o){e+="".concat(o.name,".");var a=t.factorId,i=a?o.factors.find((function(t){return t.factorId==a})):null;e+=i?i.label:"?"}else e+="?.?";return e},Ar=function(t){var n=t.mapping,e=t.topics,r="";Fn(n.from)?r=Nr(n.from,e):Gn(n.from)&&(r="Memory Context.".concat(n.from.name||"?"));var o=je(n.from.arithmetic);o&&(r="".concat(o,"(").concat(r,")"));var a="";return Fn(n.to)?a=Nr(n.to,e):a+="?.?","".concat(r," \u27be ").concat(a)},Sr=function(t){var n=t.topic,e=t.count,r=t.children;return n?0===e?Object(o.jsxs)("span",{children:[Object(o.jsx)("span",{children:"No Mapping Defined"}),r]}):1===e?Object(o.jsxs)("span",{children:[Object(o.jsx)("span",{children:"1 Mapping Rule"}),r]}):Object(o.jsxs)("span",{children:[Object(o.jsxs)("span",{children:[e," Mapping Rules"]}),r]}):Object(o.jsxs)("span",{children:[Object(o.jsx)("span",{children:"Pick Topic First"}),r]})},Rr=function(t){var n=t.mapping,e=ut().store.topics,r=or(),i=r.addPropertyChangeListener,c=r.removePropertyChangeListener,s=Object(W.f)();return Object(a.useEffect)((function(){return i($e.FROM_CHANGED,s),i($e.TO_CHANGED,s),function(){c($e.FROM_CHANGED,s),c($e.TO_CHANGED,s)}})),Object(o.jsx)("div",{children:Ar({mapping:n,topics:e})})},Dr=function(t){var n=t.rule,e=t.onRemove,r=ut().store.topics,i=or().firePropertyChange,c=Object(a.useRef)(null),s=Object(a.useRef)(null),d=Object(a.useRef)(null),u=Object(a.useState)(!1),p=Object(l.a)(u,2),f=p[0],b=p[1],h=Object(a.useState)({top:0,left:0,width:0,atTop:!1}),g=Object(l.a)(h,2),j=g[0],m=g[1];Object(W.e)(c,(function(){return b(!1)}));var x=function(){return i($e.FROM_CHANGED)},O=r.find((function(t){return t.topicId==n.to.topicId}));return Object(o.jsxs)(Ir,{ref:c,children:[Object(o.jsxs)(wr,{ref:s,tabIndex:0,"data-expanded":f,onClick:function(){if(!f){var t=s.current.getBoundingClientRect(),n=t.top+t.height+2;n+120>window.innerHeight?m({top:t.top-120-2,left:t.left,width:t.width,atTop:!0}):m({top:n,left:t.left,width:t.width,atTop:!1}),b(!0)}},children:[Object(o.jsx)(Rr,{mapping:n}),Object(o.jsx)("div",{children:Object(o.jsx)(V.a,{icon:f?v.y:v.I})}),Object(o.jsx)("div",{onClick:function(t){t.preventDefault(),t.stopPropagation(),e(n)},children:Object(o.jsx)(V.a,{icon:$t.g})})]}),Object(o.jsxs)(Cr,Object(U.a)(Object(U.a)({ref:d,"data-expanded":f},j),{},{children:[Object(o.jsx)("div",{children:"Mapping Setting"}),Object(o.jsx)(le,{holder:n.from,onTopicChange:x,onFactorChange:x,onVariableChange:x,onArithmeticChange:x,aggregate:!1}),Object(o.jsx)(Tr,{children:"\u290b"}),Object(o.jsxs)(Er,{children:[Object(o.jsxs)("div",{children:["Topic: ",null===O||void 0===O?void 0:O.name]}),Object(o.jsx)(oe,{holder:n.to,onChange:function(){return i($e.TO_CHANGED)}})]})]}))]})},Pr=function(t){var n=t.holder,e=ut().store,r=e.topics,i=e.selectedPipeline,c=un(),s=c.firePropertyChange,d=c.addPropertyChangeListener,u=c.removePropertyChangeListener,p=Object(a.useState)(!1),f=Object(l.a)(p,2),b=f[0],h=f[1],g=Object(W.f)();Object(a.useEffect)((function(){return d(on.TOPIC_CHANGED,g),function(){u(on.TOPIC_CHANGED,g)}}));var j=r.find((function(t){return t.topicId==n.topicId})),m=function(t){var e=n.mapping.findIndex((function(n){return n===t}));n.mapping.splice(e,1),s(on.MAPPING_CHANGED),g()},x=function(t){t.preventDefault(),t.stopPropagation(),n.mapping.sort((function(t,n){return Ar({mapping:t,topics:r}).localeCompare(Ar({mapping:n,topics:r}))})),s(on.MAPPING_CHANGED),g()},O=function(t){t.preventDefault(),t.stopPropagation(),n.mapping.sort((function(t,n){return Ar({mapping:n,topics:r}).localeCompare(Ar({mapping:t,topics:r}))})),s(on.MAPPING_CHANGED),g()};n.mapping||(n.mapping=[]);var y=n.mapping.length,I=b&&y>=2;return Object(o.jsxs)(jr,{children:[Object(o.jsx)(mr,{children:Object(o.jsxs)(xr,{"data-expanded":b,"data-can-sort":I,onClick:function(){j&&h(!b)},children:[Object(o.jsx)(Sr,{topic:j,count:y,children:Object(o.jsx)(V.a,{icon:b?v.z:v.J})}),Object(o.jsx)("div",{onClick:x,children:Object(o.jsx)(V.a,{icon:v.vb})}),Object(o.jsx)("div",{onClick:O,children:Object(o.jsx)(V.a,{icon:v.wb})})]})}),j?Object(o.jsxs)(Or,{lines:y,expanded:b,children:[Object(o.jsx)(yr,{lines:y,children:(n.mapping||[]).map((function(t,e){return Object(o.jsxs)(rr,{children:[Object(o.jsx)("div",{}),Object(o.jsx)(Dr,{holder:n,rule:t,onRemove:m})]},e)}))}),Object(o.jsxs)(kr,{"data-can-sort":I,children:[Object(o.jsxs)("span",{onClick:function(){n.mapping||(n.mapping=[]),n.mapping.push({from:{type:k.FACTOR,topicId:null===i||void 0===i?void 0:i.topicId,arithmetic:w.NO_FUNC},to:{type:k.FACTOR,topicId:null===j||void 0===j?void 0:j.topicId,arithmetic:w.NO_FUNC}}),s(on.MAPPING_CHANGED),g()},children:[Object(o.jsx)("span",{children:"Append Mapping Rule"}),Object(o.jsx)(V.a,{icon:v.jb})]}),Object(o.jsx)("div",{onClick:x,children:Object(o.jsx)(V.a,{icon:v.vb})}),Object(o.jsx)("div",{onClick:O,children:Object(o.jsx)(V.a,{icon:v.wb})})]})]}):null]})},_r=function(t){var n=t.action,e=un().firePropertyChange;return Object(o.jsxs)(mn,{children:[Object(o.jsx)(xn,{children:"To:"}),Object(o.jsx)(Un,{holder:n,onChange:function(){return e(on.TOPIC_CHANGED)}}),Object(o.jsx)(xn,{children:"On:"}),Object(o.jsx)(Ke,{holder:n}),Object(o.jsx)(xn,{children:"Use:"}),Object(o.jsx)(Pr,{holder:n})]})},Lr=(vr={},Object(Y.a)(vr,D.INSERT_ROW,(function(t){var n=t.action,e=un().firePropertyChange;return Object(o.jsxs)(mn,{children:[Object(o.jsx)(xn,{children:"To:"}),Object(o.jsx)(Un,{holder:n,onChange:function(){return e(on.TOPIC_CHANGED)}}),Object(o.jsx)(xn,{children:"Use:"}),Object(o.jsx)(Pr,{holder:n})]})})),Object(Y.a)(vr,D.MERGE_ROW,_r),Object(Y.a)(vr,D.INSERT_OR_MERGE_ROW,_r),Object(Y.a)(vr,D.WRITE_FACTOR,(function(t){var n=t.action,e=un().firePropertyChange,r=function(){return e(on.TOPIC_CHANGED)},a=function(){return e(on.FACTOR_CHANGED)};return Object(o.jsxs)(mn,{children:[Object(o.jsx)(xn,{children:"From:"}),Object(o.jsx)(le,{holder:n.value,onTopicChange:r,onFactorChange:a,onVariableChange:function(){return e(on.VARIABLE_CHANGED)},onArithmeticChange:function(){return e(on.ARITHMETIC_CHANGED)},aggregate:!0}),Object(o.jsx)(xn,{children:"To:"}),Object(o.jsx)(nr,{holder:n,onTopicChange:r,onFactorChange:a}),Object(o.jsx)(xn,{children:"On:"}),Object(o.jsx)(Ke,{holder:n})]})})),Object(Y.a)(vr,R.READ_ROW,(function(t){var n=t.action,e=un().firePropertyChange,r=Object(W.f)();return Object(o.jsxs)(mn,{children:[Object(o.jsx)(xn,{children:"From:"}),Object(o.jsx)(Un,{holder:n,onChange:function(){return e(on.TOPIC_CHANGED)}}),Object(o.jsx)(xn,{children:"By:"}),Object(o.jsx)(Ke,{holder:n}),Object(o.jsx)(xn,{children:"To:"}),Object(o.jsx)(fn,{value:n.targetName||"",onChange:function(t){n.targetName=t.target.value,e(on.VARIABLE_CHANGED),r()},placeholder:"Variable name..."})]})})),Object(Y.a)(vr,R.READ_FACTOR,(function(t){var n=t.action,e=un().firePropertyChange,r=Object(W.f)();return Object(o.jsxs)(mn,{children:[Object(o.jsx)(xn,{children:"From:"}),Object(o.jsx)(nr,{holder:n,onTopicChange:function(){return e(on.TOPIC_CHANGED)},onFactorChange:function(){return e(on.FACTOR_CHANGED)}}),Object(o.jsx)(xn,{children:"By:"}),Object(o.jsx)(Ke,{holder:n}),Object(o.jsx)(xn,{children:"To:"}),Object(o.jsx)(fn,{value:n.targetName||"",onChange:function(t){n.targetName=t.target.value,e(on.VARIABLE_CHANGED),r()},placeholder:"Variable name..."})]})})),Object(Y.a)(vr,R.EXISTS,(function(t){var n=t.action,e=un().firePropertyChange,r=Object(W.f)();return Object(o.jsxs)(mn,{children:[Object(o.jsx)(xn,{children:"Exists In:"}),Object(o.jsx)(Un,{holder:n,onChange:function(){return e(on.TOPIC_CHANGED)}}),Object(o.jsx)(xn,{children:"By:"}),Object(o.jsx)(Ke,{holder:n}),Object(o.jsx)(xn,{children:"To:"}),Object(o.jsx)(fn,{value:n.targetName||"",onChange:function(t){n.targetName=t.target.value,e(on.VARIABLE_CHANGED),r()},placeholder:"Variable name..."})]})})),Object(Y.a)(vr,S.COPY_TO_MEMORY,(function(t){var n=t.action,e=un().firePropertyChange,r=Object(W.f)();return Object(o.jsxs)(mn,{children:[Object(o.jsx)(xn,{children:"From:"}),Object(o.jsx)(le,{holder:n.value,onTopicChange:function(){return e(on.TOPIC_CHANGED)},onFactorChange:function(){return e(on.FACTOR_CHANGED)},onVariableChange:function(){return e(on.VARIABLE_CHANGED)},onArithmeticChange:function(){return e(on.ARITHMETIC_CHANGED)},aggregate:!1}),Object(o.jsx)(xn,{children:"To:"}),Object(o.jsx)(fn,{value:n.targetName||"",onChange:function(t){n.targetName=t.target.value,e(on.VARIABLE_CHANGED),r()},placeholder:"Variable name..."})]})})),Object(Y.a)(vr,S.ALARM,(function(t){var n=t.action,e=n.severity,r=n.message,a=void 0===r?"":r,i=un().firePropertyChange,c=Object(W.f)();return Object(o.jsxs)(yn,{children:[Object(o.jsx)(xn,{children:"Severity:"}),Object(o.jsx)(vn,{label:In(e),options:Object.values(P).filter((function(t){return t!==e})),toLabel:function(t){return In(t)},onSelect:function(t){n.severity=t,i(on.VARIABLE_CHANGED),c()}}),Object(o.jsx)(xn,{children:"Message:"}),Object(o.jsx)(fn,{value:a,onChange:function(t){n.message=t.target.value,i(on.VARIABLE_CHANGED),c()}})]})})),vr);!function(t){t.FILTER_ADDED="filter-added",t.FILTER_REMOVED="filter-removed",t.FILTER_CHANGED="filter-changed",t.FILTER_INDENT="filter-indent",t.FILTER_OUTDENT="filter-outdent"}(gr||(gr={}));var Mr=i.a.createContext({});Mr.displayName="PipelineUnitConditionContext";var Fr=function(t){var n=t.children,e=Ht().firePipelineContentChange,r=Object(a.useState)((function(){var t=new K.EventEmitter;return t.setMaxListeners(1e3),t})),i=Object(l.a)(r,1)[0];return Object(o.jsx)(Mr.Provider,{value:{firePropertyChange:function(t){i.emit(t),e()},addPropertyChangeListener:function(t,n){return i.on(t,n)},removePropertyChangeListener:function(t,n){return i.off(t,n)}},children:n})},Gr=function(){return i.a.useContext(Mr)};function Ur(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\t> div:first-child {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 22px;\n\t\tborder-top-left-radius: var(--border-radius);\n\t\tborder-bottom-left-radius: var(--border-radius);\n\t\tbox-shadow: 0 0 0 1px var(--border-color);\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t\tpadding: 0 calc(var(--margin) / 2);\n\t\tbackground-color: var(--pipeline-bg-color);\n\t}\n\t> input {\n\t\tflex-grow: 1;\n\t\tborder-radius: 0;\n\t\tbox-shadow: 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color), 1px 0 0 0 var(--border-color);\n\t}\n\t> div:last-child {\n\t\tborder-top-left-radius: 0;\n\t\tborder-bottom-left-radius: 0;\n\t\tbox-shadow: 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color), 1px 0 0 0 var(--border-color);\n\t\t&:hover {\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t}\n\t}\n"]);return Ur=function(){return t},t}function Hr(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n"]);return Hr=function(){return t},t}function zr(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\t> div:first-child {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 22px;\n\t\tpadding: 0 calc(var(--margin) / 2);\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tbox-shadow: 0 0 0 1px var(--border-color);\n\t\tborder-top-left-radius: var(--border-radius);\n\t\tborder-bottom-left-radius: var(--border-radius);\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\t> div:nth-child(2) {\n\t\tflex-grow: 1;\n\t\tborder-top-left-radius: 0;\n\t\tborder-bottom-left-radius: 0;\n\t\tbox-shadow: 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color), 1px 0 0 0 var(--border-color);\n\t\t&:hover {\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t}\n\t\t> input {\n\t\t\tborder-top-left-radius: 0;\n\t\t\tborder-bottom-left-radius: 0;\n\t\t}\n\t}\n"]);return zr=function(){return t},t}function Br(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: fixed;\n\tflex-direction: column;\n\tz-index: 1000;\n\theight: ","px;\n\tpadding: 0 calc(var(--margin) / 2);\n\ttransform: scaleY(0);\n\ttransition: transform 300ms ease-in-out;\n\tpointer-events: none;\n\tbackground-color: var(--bg-color);\n\tborder-radius: calc(var(--border-radius) * 3);\n\tbox-shadow: var(--console-primary-hover-shadow);\n\t&[data-expanded=true] {\n\t\ttransform: none;\n\t\tpointer-events: auto;\n\t}\n\t> div {\n\t\theight: 28px;\n\t\t&:first-child {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\theight: 32px;\n\t\t\tbackground-color: var(--pipeline-bg-color);\n\t\t\tmargin: 0 calc(var(--margin) / -2) 2px;\n\t\t\tpadding: 0 calc(var(--margin) / 2);\n\t\t\tfont-weight: var(--font-bold);\n\t\t}\n\t\t&:last-child {\n\t\t\tmargin-bottom: 2px;\n\t\t}\n\t}\n"]);return Br=function(){return t},t}function Wr(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\tjustify-self: flex-start;\n\tborder-radius: 12px;\n\tbackground-color: transparent;\n\theight: 22px;\n\tline-height: 22px;\n\toutline: none;\n\tappearance: none;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tcursor: pointer;\n\ttransition: all 300ms ease-in-out;\n\t&[data-expanded=true],\n\t&:hover {\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t> div:first-child {\n\t\t\tpadding-left: calc(var(--margin) / 2);\n\t\t}\n\t\t> div:not(:first-child) {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n\t&[data-expanded=true] > div:nth-child(2) > svg {\n\t\ttransform: rotateZ(180deg);\n\t}\n\t> div:first-child {\n\t\tflex-grow: 1;\n\t\tposition: relative;\n\t\tfont-weight: var(--font-bold);\n\t\tfont-variant: petite-caps;\n\t\tborder-top-left-radius: 12px;\n\t\tborder-bottom-left-radius: 12px;\n\t\ttransition: all 300ms ease-in-out;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\t> div:not(:first-child) {\n\t\tposition: relative;\n\t\tpadding: 0 calc(var(--margin) / 3);\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t\ttransition: all 300ms ease-in-out;\n\t\t> svg {\n\t\t\tfont-size: 0.8em;\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t}\n\t\t&:not(:nth-child(2)):before {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\tleft: 0;\n\t\t\ttop: 20%;\n\t\t\twidth: 1px;\n\t\t\theight: 60%;\n\t\t\tbackground-color: var(--border-color);\n\t\t}\n\t}\n"]);return Wr=function(){return t},t}function Yr(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tposition: relative;\n\theight: 32px;\n\t&:before,\n\t&:after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tbackground-color: var(--border-color);\n\t}\n\t&:before {\n\t\ttop: 16px;\n\t\tleft: calc(var(--margin) / -2);\n\t\twidth: calc(var(--margin) / 2 - 4px);\n\t\theight: 1px;\n\t}\n\t&:after {\n\t\ttop: 0;\n\t\tleft: calc(var(--margin) / -2);\n\t\twidth: 1px;\n\t\theight: 16px;\n\t}\n\t&:not(:last-child):after {\n\t\theight: 100%;\n\t}\n"]);return Yr=function(){return t},t}var Vr=s.c.div.attrs({"data-widget":"plain-condition"})(Yr()),qr=s.c.div(Wr()),Qr=s.c.div.attrs((function(t){var n=t.top,e=t.left,r=t.width,o=t.atTop;return{style:{top:n,left:e,minWidth:Math.max(r,600),transformOrigin:o?"bottom":"top"}}}))(Br(),120),Jr=s.c.div(zr()),Xr=s.c.div(Hr()),Kr=s.c.div(Ur()),Zr=function(t){var n=t.topic,e=t.condition,r="";if(n){var o=e.left;if(r+="".concat(n.name,"."),o.factorId){var a=n.factors.find((function(t){return t.factorId==o.factorId}));r+=a?a.label:"?"}else r+="?"}r+=" ".concat(ve(e.operator)," ");var i="";Gn(e.right)&&(i+="Memory Context.".concat(e.right.name||"?"));var c=je(e.right.arithmetic);return c&&(i="".concat(c,"(").concat(i,")")),r+i},$r=function(t){var n=t.topic,e=t.condition,r=Gr(),i=r.addPropertyChangeListener,c=r.removePropertyChangeListener,s=Object(W.f)();return Object(a.useEffect)((function(){return i(gr.FILTER_CHANGED,s),function(){return c(gr.FILTER_CHANGED,s)}})),Object(o.jsx)("div",{children:Zr({topic:n,condition:e})})},to=function(t){var n=t.left,e=t.grandParent,r=t.parent,i=t.condition,c=Ht().firePipelineContentChange,s=Gr().firePropertyChange,d=Object(a.useRef)(null),u=Object(a.useRef)(null),p=Object(a.useRef)(null),f=Object(a.useState)(!1),b=Object(l.a)(f,2),h=b[0],g=b[1],j=Object(a.useState)({top:0,left:0,width:0,atTop:!1}),m=Object(l.a)(j,2),x=m[0],O=m[1],y=Object(W.f)();Object(W.e)(d,(function(){return g(!1)})),function(t){var n=t.condition,e=t.topic;n.left||(n.left={arithmetic:w.NO_FUNC},e?(n.left.type=k.FACTOR,n.left.topicId=e.topicId):n.left.type=k.IN_MEMORY),n.right||(n.right={type:k.IN_MEMORY,arithmetic:w.NO_FUNC})}({condition:i,topic:n});var I=function(){c(),s(gr.FILTER_CHANGED)};return Object(o.jsxs)(Vr,{ref:d,children:[Object(o.jsxs)(qr,{ref:u,tabIndex:0,"data-expanded":h,onClick:function(){if(!h){var t=u.current.getBoundingClientRect(),n=t.top+t.height+2;n+120>window.innerHeight?O({top:t.top-120-2,left:t.left,width:t.width,atTop:!0}):O({top:n,left:t.left,width:t.width,atTop:!1}),g(!0)}},children:[Object(o.jsx)($r,{topic:n,condition:i}),Object(o.jsx)("div",{children:Object(o.jsx)(V.a,{icon:h?v.y:v.I})}),e?Object(o.jsx)("div",{onClick:function(t){if(t.preventDefault(),t.stopPropagation(),e&&r){var n=r.children.findIndex((function(t){return t===i})),o=e.children.findIndex((function(t){return t===r}));r.children.splice(n,1),e.children.splice(o+1,0,i),c(),s(gr.FILTER_OUTDENT)}},children:Object(o.jsx)(V.a,{icon:v.ab})}):null,Object(o.jsx)("div",{onClick:function(t){t.preventDefault(),t.stopPropagation();var n={mode:A.AND,children:[i]};r.mode===A.AND&&(n.mode=A.OR);var e=r.children.findIndex((function(t){return t===i}));r.children.splice(e,1,n),c(),s(gr.FILTER_INDENT)},children:Object(o.jsx)(V.a,{icon:v.bb})}),Object(o.jsx)("div",{onClick:function(t){if(t.preventDefault(),t.stopPropagation(),r){var n=r.children.findIndex((function(t){return t===i}));r.children.splice(n,1),c(),s(gr.FILTER_REMOVED)}},children:Object(o.jsx)(V.a,{icon:$t.g})})]}),Object(o.jsxs)(Qr,Object(U.a)(Object(U.a)({ref:p,"data-expanded":h},x),{},{children:[Object(o.jsx)("div",{children:"Expression Setting"}),Fn(i.left)?Object(o.jsxs)(Jr,{children:[Object(o.jsxs)("div",{children:["Topic: ",null===n||void 0===n?void 0:n.name]}),Object(o.jsx)(oe,{holder:i.left,onChange:I})]}):null,Object(o.jsx)(Xr,{children:Object(o.jsx)(qn,{condition:i,onChange:I})}),Gn(i.right)?Object(o.jsxs)(Kr,{children:[Object(o.jsx)("div",{children:"Memory Context"}),Object(o.jsx)(fn,{value:i.right.name,onChange:function(t){var n=t.target.value;Gn(i.right)&&(i.right.name=n,I()),y()},placeholder:"Variable name..."}),Object(o.jsx)(re,{aggregate:!1,value:i.right,right:!0,onChange:I})]}):null]}))]})};function no(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding-left: var(--margin);\n\ttransform-origin: top;\n\ttransition: all 300ms ease-in-out;\n"]);return no=function(){return t},t}function eo(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\tpadding: 0 var(--margin);\n\tmin-height: 32px;\n\theight: 32px;\n\toverflow: hidden;\n\ttransition: all 300ms ease-in-out;\n\t&:before,\n\t&:after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tbackground-color: var(--border-color);\n\t}\n\t&:before {\n\t\ttop: 16px;\n\t\tleft: calc(var(--margin) / 2);\n\t\twidth: calc(var(--margin) / 2 - 4px);\n\t\theight: 1px;\n\t}\n\t&:after {\n\t\ttop: 0;\n\t\tleft: calc(var(--margin) / 2);\n\t\twidth: 1px;\n\t\theight: 16px;\n\t}\n"]);return eo=function(){return t},t}function ro(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: auto auto auto 1fr;\n\theight: 32px;\n\tmin-height: 32px;\n\talign-items: center;\n\ttransition: all 300ms ease-in-out;\n\t&:hover {\n\t\t> div:nth-child(3) {\n\t\t\tborder-top-right-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\t\t}\n\t\t> div:nth-child(4) {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n\t&[data-expanded=false] {\n\t\t> div:first-child > svg {\n\t\t\ttransform: rotateZ(-90deg);\n\t\t}\n\t\t+ div {\n\t\t\tmin-height: 0;\n\t\t\theight: 0;\n\t\t}\n\t}\n\t> div:first-child {\n\t\tdisplay: flex;\n\t\twidth: var(--margin);\n\t\tjustify-content: center;\n\t\tcursor: pointer;\n\t\t> svg {\n\t\t\topacity: 0.7;\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t}\n\t}\n\t> div:nth-child(2) {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 22px;\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t\tborder-top-left-radius: 11px;\n\t\tborder-bottom-left-radius: 11px;\n\t\tpadding: 0 calc(var(--margin) / 3);\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tbox-shadow: 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color), -1px 0 0 0 var(--border-color);\n\t}\n\t> div:nth-child(3) {\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t\ttext-transform: capitalize;\n\t\tborder-top-left-radius: 0;\n\t\tborder-bottom-left-radius: 0;\n\t}\n\t> div:nth-child(4) {\n\t\tdisplay: flex;\n\t\tjustify-self: start;\n\t\tcursor: pointer;\n\t\tborder-top-right-radius: 11px;\n\t\tborder-bottom-right-radius: 11px;\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t\ttransition: all 300ms ease-in-out;\n\t\t> div {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\theight: 22px;\n\t\t\tbox-shadow: 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color), 1px 0 0 0 var(--border-color);\n\t\t\tpadding: 0 calc(var(--margin) / 3);\n\t\t\tfont-size: 0.8em;\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t\t&:hover {\n\t\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t\t\tpointer-events: auto;\n\t\t\t}\n\t\t\t&:last-child {\n\t\t\t\tborder-top-right-radius: 11px;\n\t\t\t\tborder-bottom-right-radius: 11px;\n\t\t\t}\n\t\t}\n\t}\n"]);return ro=function(){return t},t}function oo(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\tflex-direction: column;\n\t&[data-removable=true] {\n\t\t&:before,\n\t\t&:after {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\tbackground-color: var(--border-color);\n\t\t}\n\t\t&:before {\n\t\t\ttop: 16px;\n\t\t\tleft: calc(var(--margin) / -2);\n\t\t\twidth: calc(var(--margin) / 2 - 4px);\n\t\t\theight: 1px;\n\t\t}\n\t\t&:after {\n\t\t\ttop: 0;\n\t\t\tleft: calc(var(--margin) / -2);\n\t\t\twidth: 1px;\n\t\t\theight: 16px;\n\t\t}\n\t\t&:not(:last-child):after {\n\t\t\theight: 100%;\n\t\t}\n\t}\n"]);return oo=function(){return t},t}var ao=s.c.div.attrs({"data-widget":"composite-condition"})(oo()),io=s.c.div.attrs({"data-widget":"composite-condition-title"})(ro()),co=s.c.div.attrs({"data-widget":"composite-condition-no-child"})(eo()),so=s.c.div.attrs((function(t){var n=t.count,e=t.visible;return{"data-widget":"composite-condition-children",style:{maxHeight:e?32*n:0,transform:e?"none":"rotateX(90deg)"}}}))(no()),lo=function(t){var n=t.left,e=t.parent,r=t.condition,a=t.visible,i=t.level,c=Ln(r)-1;return Object(o.jsx)(so,{visible:a,count:c,children:r.children.map((function(t,a){if(Pn(t))return Object(o.jsx)(uo,{left:n,grandParent:e,parent:r,condition:t,removable:!0,level:i},a);var c=t;return Object(o.jsx)(to,{left:n,grandParent:e,parent:r,condition:c},a)}))})},uo=function(t){var n=t.left,e=t.grandParent,r=t.parent,i=t.condition,c=t.removable,s=t.level,d=Gr().firePropertyChange,u=Object(a.useState)(!0),p=Object(l.a)(u,2),f=p[0],b=p[1],h=Object(W.f)(),g=i.mode;return Object(o.jsxs)(ao,{"data-expanded":f,"data-removable":c,children:[Object(o.jsxs)(io,{"data-expanded":f,children:[Object(o.jsx)("div",{onClick:function(){return b(!f)},children:Object(o.jsx)(V.a,{icon:v.r})}),Object(o.jsxs)("div",{children:["Lv",s]}),Object(o.jsx)(vn,{label:g,options:[A.AND,A.OR].filter((function(t){return t!==i.mode})),toLabel:function(t){return t},onSelect:function(t){i.mode=t,d(gr.FILTER_CHANGED),h()}}),Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{onClick:function(){i.children.push({operator:N.EQUALS}),f?h():b(!0),d(gr.FILTER_ADDED)},children:Object(o.jsx)(V.a,{icon:v.jb})}),e?Object(o.jsx)("div",{onClick:function(){if(e&&r){var t=r.children.findIndex((function(t){return t===i})),n=e.children.findIndex((function(t){return t===r}));r.children.splice(t,1),e.children.splice(n+1,0,i),d(gr.FILTER_OUTDENT)}},children:Object(o.jsx)(V.a,{icon:v.ab})}):null,c?Object(o.jsx)("div",{onClick:function(){if(r){var t={mode:A.AND,children:[i]};r.mode===A.AND&&(t.mode=A.OR);var n=r.children.findIndex((function(t){return t===i}));r.children.splice(n,1,t),d(gr.FILTER_INDENT)}},children:Object(o.jsx)(V.a,{icon:v.bb})}):null,c?Object(o.jsx)("div",{onClick:function(){if(r){var t=r.children.findIndex((function(t){return t===i}));r.children.splice(t,1),d(gr.FILTER_REMOVED)}},children:Object(o.jsx)(V.a,{icon:$t.g})}):null]})]}),0===i.children.length?Object(o.jsx)(co,{children:"No Child Defined."}):Object(o.jsx)(lo,{left:n,parent:r,condition:i,visible:f,level:s+1})]})};function po(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n\ttransform-origin: top;\n\ttransition: all 300ms ease-in-out;\n\t&::-webkit-scrollbar {\n\t\tbackground-color: transparent;\n\t\twidth: 4px;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color: transparent;\n\t\tborder-radius: 2px;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--console-favorite-color);\n\t\tborder-radius: 2px;\n\t}\n"]);return po=function(){return t},t}function fo(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tgrid-column: 2 / span 3;\n"]);return fo=function(){return t},t}var bo=s.c.div(fo()),ho=s.c.div.attrs((function(t){var n=t.lines,e=t.expanded;return{style:{maxHeight:e?32*n:0,transform:e?"unset":"scaleY(0)"}}}))(po()),vo=function(t){var n=t.unit,e=t.expanded,r=ut().store,i=r.topics,c=r.selectedPipeline,s=Gr(),d=s.addPropertyChangeListener,l=s.removePropertyChangeListener,u=Object(W.f)();Object(a.useEffect)((function(){return d(gr.FILTER_ADDED,u),d(gr.FILTER_REMOVED,u),d(gr.FILTER_INDENT,u),d(gr.FILTER_OUTDENT,u),function(){l(gr.FILTER_ADDED,u),l(gr.FILTER_REMOVED,u),l(gr.FILTER_INDENT,u),l(gr.FILTER_OUTDENT,u)}}));var p=i.find((function(t){return t.topicId==(null===c||void 0===c?void 0:c.topicId)})),f=Ln(n.on);return Object(o.jsx)(bo,{children:p?Object(o.jsx)(ho,{lines:f,expanded:e,children:Object(o.jsx)(uo,{left:p,condition:n.on,removable:!1,level:1})}):null})};function go(){var t=Object(r.a)(["\n\twhite-space: nowrap;\n\tfont-weight: var(--font-demi-bold);\n\tfont-variant: petite-caps;\n\theight: 24px;\n\tline-height: 24px;\n\tmargin-top: 4px;\n\talign-self: start;\n"]);return go=function(){return t},t}function jo(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tpadding: 0 calc(var(--margin) / 2);\n\tgrid-template-columns: calc(120px - var(--margin) / 2) auto auto 1fr;\n\tgrid-column-gap: calc(var(--margin) / 2);\n\t&[data-conditional=true] {\n\t\t> div:nth-child(2) {\n\t\t\tborder-top-right-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\t\t}\n\t\t> div:nth-child(3) {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n\t> div:nth-child(2) {\n\t\talign-self: center;\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t}\n\t> div:nth-child(3) {\n\t\tdisplay: flex;\n\t\talign-self: center;\n\t\talign-items: center;\n\t\theight: 22px;\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tpadding: 0 calc(var(--margin) / 3);\n\t\tmargin-left: calc(var(--margin) / -2);\n\t\tbox-shadow: 1px 0 0 0 var(--border-color), 0 1px 0 0 var(--border-color), 0 -1px 0 0 var(--border-color);\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t\ttransition: all 300ms ease-in-out;\n\t\tborder-top-right-radius: 11px;\n\t\tborder-bottom-right-radius: 11px;\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t\tcursor: pointer;\n\t\t&:hover {\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t}\n\t\t&[data-condition-expanded=true] {\n\t\t\t> svg {\n\t\t\t\ttransform: rotateZ(180deg);\n\t\t\t}\n\t\t}\n\t\t> svg {\n\t\t\tmargin-left: calc(var(--margin) / 3);\n\t\t\tfont-size: 0.9em;\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t}\n\t}\n\t> button {\n\t\talign-self: center;\n\t\tjustify-self: end;\n\t\t> svg {\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t}\n\t}\n"]);return jo=function(){return t},t}var mo=s.c.div.attrs({"data-widget":"stage-unit-condition"})(jo()),xo=s.c.div.attrs({"data-widget":"stage-unit-label"})(go()),Oo=function(t){var n=t.unit,e=t.visible,r=Gr(),i=r.addPropertyChangeListener,c=r.removePropertyChangeListener,s=Object(W.f)();if(Object(a.useEffect)((function(){return i(gr.FILTER_ADDED,s),i(gr.FILTER_REMOVED,s),i(gr.FILTER_INDENT,s),i(gr.FILTER_OUTDENT,s),function(){c(gr.FILTER_ADDED,s),c(gr.FILTER_REMOVED,s),c(gr.FILTER_INDENT,s),c(gr.FILTER_OUTDENT,s)}})),!e)return Object(o.jsx)("span",{});var d=Mn(n.on);return 0===d?Object(o.jsx)("span",{children:"No Filter Defined"}):1===d?Object(o.jsx)("span",{children:"1 Filter"}):Object(o.jsxs)("span",{children:[d," Filters"]})},yo=function(t){var n=t.unit,e=t.expanded,r=t.children,i=Ht().firePipelineContentChange,c=Object(a.useState)(!!n.on),s=Object(l.a)(c,2),d=s[0],u=s[1],p=Object(a.useState)(!1),f=Object(l.a)(p,2),b=f[0],h=f[1],g=function(t){return t?"Conditional":"Anyway"},j=g(d);return d&&(n.on||(n.on={mode:A.AND,children:[]})),Object(o.jsx)(Fr,{children:Object(o.jsxs)(mo,{"data-conditional":d,children:[Object(o.jsx)(xo,{children:"When:"}),Object(o.jsx)(vn,{label:j,options:[!d],toLabel:g,onSelect:function(t){t?n.on=n.on||{mode:A.AND,children:[]}:delete n.on,i(),u(t)}}),Object(o.jsxs)("div",{"data-visible":d,onClick:function(){return h(!b)},"data-condition-expanded":b,children:[Object(o.jsx)(Oo,{unit:n,visible:d}),Object(o.jsx)(V.a,{icon:b?v.z:v.J})]}),r,d&&e?Object(o.jsx)(vo,{unit:n,expanded:b}):null]})})};function Io(){var t=Object(r.a)(["\n\twhite-space: nowrap;\n\tfont-weight: var(--font-demi-bold);\n\theight: 32px;\n\tline-height: 32px;\n\talign-self: start;\n\tjustify-self: end;\n\tpadding-right: calc(var(--margin) / 2);\n"]);return Io=function(){return t},t}var wo,Co=s.c.div.attrs({"data-widget":"stage-unit-action-lead"})(Io()),Eo=function(){return Object(o.jsx)(Co,{children:Object(o.jsx)(V.a,{icon:v.db})})};function To(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: fixed;\n\tflex-direction: column;\n\tz-index: 1000;\n\theight: 180px;\n\ttransform: scaleY(0);\n\ttransition: transform 300ms ease-in-out;\n\tpointer-events: none;\n\tbackground-color: var(--bg-color);\n\tborder-radius: 12px;\n\tbox-shadow: var(--console-primary-hover-shadow);\n\t&[data-expanded=true] {\n\t\ttransform: scaleY(1);\n\t\tpointer-events: auto;\n\t\t&:before {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tborder-radius: 12px;\n\t\t\tbackground-color: var(--pipeline-bg-color);\n\t\t\tz-index: -1;\n\t\t}\n\t}\n\t> div {\n\t\tmin-height: 28px;\n\t\tpadding: 0 calc(var(--margin) / 2);\n\t}\n\t> div[data-role='action-category'] {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tfont-weight: var(--font-bold);\n\t\tcursor: default;\n\t}\n\t> div[data-role='actions'] {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgrid-column-gap: calc(var(--margin) / 4);\n\t\tgrid-row-gap: calc(var(--margin) / 8);\n\t\tbackground-color: var(--bg-color);\n\t\tpadding: calc(var(--margin) / 8) calc(var(--margin) / 2);\n\t\tcursor: default;\n\t\t&:last-child {\n\t\t\tborder-bottom-left-radius: 12px;\n\t\t\tborder-bottom-right-radius: 12px;\n\t\t}\n\t\t> div {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\theight: 24px;\n\t\t\tline-height: 22px;\n\t\t\tborder-radius: 12px;\n\t\t\tborder: var(--border);\n\t\t\tpadding: 0 calc(var(--margin) / 4);\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t\tcursor: pointer;\n\t\t\t&:hover,\n\t\t\t&[data-current=true] {\n\t\t\t\tborder-color: var(--console-favorite-color);\n\t\t\t\tcolor: var(--invert-color);\n\t\t\t\tbackground-color: var(--console-favorite-color);\n\t\t\t}\n\t\t\t&[data-current=true] {\n\t\t\t\tcursor: default;\n\t\t\t}\n\t\t}\n\t}\n"]);return To=function(){return t},t}function ko(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\tjustify-self: flex-start;\n\tborder: var(--border);\n\tborder-color: transparent;\n\tborder-radius: 12px;\n\tbackground-color: transparent;\n\theight: 24px;\n\tline-height: 22px;\n\toutline: none;\n\tappearance: none;\n\twhite-space: nowrap;\n\tcursor: pointer;\n\ttransition: all 300ms ease-in-out;\n\t&[data-expanded=true],\n\t&:hover {\n\t\tborder-color: transparent;\n\t\tbackground-color: var(--pipeline-bg-color);\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t> div:first-child {\n\t\t\tpadding-left: calc(var(--margin) / 2);\n\t\t}\n\t\t> div:last-child {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n\t&[data-expanded=true] > div:last-child > svg {\n\t\ttransform: rotateZ(180deg);\n\t}\n\t> div:first-child {\n\t\tposition: relative;\n\t\tfont-weight: var(--font-bold);\n\t\tfont-variant: petite-caps;\n\t\tborder-top-left-radius: 12px;\n\t\tborder-bottom-left-radius: 12px;\n\t\ttransition: all 300ms ease-in-out;\n\t}\n\t> div:last-child {\n\t\tposition: relative;\n\t\tpadding: 0 calc(var(--margin) / 3);\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t\ttransition: all 300ms ease-in-out;\n\t\t> svg {\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t}\n\t}\n"]);return ko=function(){return t},t}var No=s.c.div.attrs({"data-widget":"stage-unit-action-select"})(ko()),Ao=s.c.div.attrs((function(t){var n=t.top,e=t.left,r=t.width,o=t.atTop;return{style:{top:n,left:e,minWidth:Math.max(r,200),transformOrigin:o?"bottom":"top"}}}))(To()),So=[{label:"Write to Topic",enum:D},{label:"Read from Topic",enum:R},{label:"System",enum:S}],Ro=(wo={},Object(Y.a)(wo,D.INSERT_ROW,{keep:["topicId"],default:{mapping:[]}}),Object(Y.a)(wo,D.MERGE_ROW,{keep:["topicId"],default:{by:{mode:A.AND,children:[]},mapping:[]}}),Object(Y.a)(wo,D.INSERT_OR_MERGE_ROW,{keep:["topicId"],default:{by:{mode:A.AND,children:[]},mapping:[]}}),Object(Y.a)(wo,D.WRITE_FACTOR,{keep:["topicId","factorId"],default:{value:{type:k.FACTOR,arithmetic:w.NO_FUNC},by:{mode:A.AND,children:[]}}}),Object(Y.a)(wo,R.EXISTS,{keep:["topicId"],default:{by:{mode:A.AND,children:[]}}}),Object(Y.a)(wo,R.READ_ROW,{keep:["topicId"],default:{by:{mode:A.AND,children:[]}}}),Object(Y.a)(wo,R.READ_FACTOR,{keep:["topicId","factorId"],default:{by:{mode:A.AND,children:[]}}}),Object(Y.a)(wo,S.COPY_TO_MEMORY,{keep:[],default:{value:{type:k.FACTOR,arithmetic:w.NO_FUNC}}}),Object(Y.a)(wo,S.ALARM,{keep:["severity"],default:{severity:P.MEDIUM}}),wo),Do=function(t){var n=t.type,e=t.current,r=t.onClick;return Object(o.jsx)("div",{"data-current":e===n,onClick:function(){return r(n)},children:ue(n)})},Po=function(t){var n=t.action,e=t.onTypeChanged,r=n.type,i=Object(a.useRef)(null),c=Object(a.useRef)(null),s=Object(a.useState)(!1),d=Object(l.a)(s,2),u=d[0],p=d[1],f=Object(a.useState)({top:0,left:0,width:0,atTop:!1}),b=Object(l.a)(f,2),h=b[0],g=b[1];Object(W.e)(i,(function(){return p(!1)}));var j=function(t){if(t!==n.type){n.type=t;var r=Ro[t];Object.keys(n).filter((function(t){return!["type","uuid"].includes(t)&&!r.keep.includes(t)})).forEach((function(t){return delete n[t]})),Object.keys(r.default).forEach((function(t){return n[t]=r.default[t]})),p(!1),e()}};return Object(o.jsxs)(No,{"data-expanded":u,tabIndex:0,ref:i,onClick:function(){if(!u){var t=i.current.getBoundingClientRect(),n=t.top+t.height+2;n+180>window.innerHeight?g({top:t.top-180-2,left:t.left,width:t.width,atTop:!0}):g({top:n,left:t.left,width:t.width,atTop:!1}),p(!0)}},children:[Object(o.jsx)("div",{children:ue(r)}),Object(o.jsx)(Ao,Object(U.a)(Object(U.a)({ref:c,"data-expanded":u},h),{},{children:So.map((function(t){return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)("div",{"data-role":"action-category",children:t.label}),Object(o.jsx)("div",{"data-role":"actions",children:Object.values(t.enum).map((function(t){return Object(o.jsx)(Do,{current:r,type:t,onClick:j},t)}))})]},t.label)}))})),Object(o.jsx)("div",{onClick:function(t){t.preventDefault(),t.stopPropagation(),p(!u)},children:Object(o.jsx)(V.a,{icon:u?v.y:v.I})})]})};function _o(){var t=Object(r.a)(["\n\tgrid-column: span 2;\n\tdisplay: grid;\n\tgrid-template-columns: 1fr auto auto auto;\n\tgrid-column-gap: calc(var(--margin) / 4);\n\talign-items: center;\n\tpadding: calc(var(--margin) / 4) 0;\n"]);return _o=function(){return t},t}function Lo(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tposition: relative;\n\tgrid-template-columns: calc(120px - var(--margin) / 2) 1fr auto;\n\tgrid-column-gap: calc(var(--margin) / 2);\n\t&:first-child {\n\t\tmargin: 4px 0;\n\t}\n\t&:before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: calc(var(--margin) / -2);\n\t\twidth: var(--margin);\n\t\theight: 100%;\n\t\tbackground-color: var(--console-waive-color);\n\t\tborder-radius: 0 calc(var(--margin) / 4) var(--margin) 0;\n\t\topacity: 0;\n\t\tz-index: -1;\n\t\ttransition: all 300ms ease-in-out;\n\t}\n\t&:hover {\n\t\t&:before {\n\t\t\topacity: 0.25;\n\t\t}\n\t\t> button:nth-child(3) {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n\t> div:nth-child(2) {\n\t\talign-self: center;\n\t}\n\t> button:nth-child(3) {\n\t\talign-self: center;\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t}\n\t> *:nth-child(4) {\n\t\tgrid-column: span 3;\n\t}\n\tdiv[data-role='action-part-not-impl'],\n\tdiv[data-role='action-not-impl'] {\n\t\theight: 32px;\n\t\tline-height: 32px;\n\t\tfont-family: var(--console-title-font-family);\n\t\topacity: 0.5;\n\t}\n\tdiv[data-role='action-not-impl'] {\n\t\tgrid-column: span 2;\n\t}\n"]);return Lo=function(){return t},t}function Mo(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding: 0 calc(var(--margin) / 2);\n\t&[data-expanded=false] {\n\t\tdisplay: none;\n\t}\n"]);return Mo=function(){return t},t}function Fo(){var t=Object(r.a)(["\n\t&[data-expanded=false] {\n\t\t> svg {\n\t\t\ttransform: rotateZ(180deg);\n\t\t}\n\t}\n"]);return Fo=function(){return t},t}function Go(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\tflex-direction: column;\n\tfont-size: 0.8em;\n\t&:not(:first-child) {\n\t\tpadding-top: calc(var(--margin) / 4);\n\t}\n\t&:not(:last-child) {\n\t\tpadding-bottom: calc(var(--margin) / 4);\n\t}\n\t&:not(:last-child):before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tleft: calc(var(--margin) / 2);\n\t\tbottom: 0;\n\t\twidth: calc(100% - var(--margin));\n\t\theight: 1px;\n\t\tborder-bottom: 1px dashed var(--border-color);\n\t\tz-index: -1;\n\t}\n\t&:first-child:after {\n\t\ttop: 0;\n\t\theight: 100%;\n\t}\n\t&:after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\ttop: 8px;\n\t\tleft: 0;\n\t\twidth: var(--margin);\n\t\theight: calc(100% - 8px);\n\t\tbackground-color: var(--console-primary-color);\n\t\tborder-radius: 0 calc(var(--margin) / 4) var(--margin) 0;\n\t\topacity: 0;\n\t\tz-index: -1;\n\t\ttransition: all 300ms ease-in-out;\n\t}\n\t&:hover {\n\t\tdiv[data-widget='stage-unit-label'] {\n\t\t\tbackground-color: var(--bg-color);\n\t\t\tborder-radius: var(--border-radius);\n\t\t\tmargin-left: calc(var(--margin) / -4);\n\t\t\tpadding-left: calc(var(--margin) / 4);\n\t\t}\n\t\t&:after {\n\t\t\topacity: 0.1;\n\t\t}\n\t}\n"]);return Go=function(){return t},t}var Uo=s.c.div.attrs({"data-widget":"stage-unit"})(Go()),Ho=Object(s.c)(Pt.e)(Fo()),zo=s.c.div.attrs({"data-widget":"stage-unit-actions"})(Mo()),Bo=s.c.div.attrs({"data-widget":"stage-unit-action"})(Lo()),Wo=s.c.div.attrs({"data-widget":"stage-unit-buttons"})(_o()),Yo=function(t){var n=t.unit,e=t.action,r=t.deleteAction,a=e.type,i=Object(nn.b)(),c=Ht().firePipelineContentChange,s=Object(W.f)(),d=function(){r(e),i.hide()},l=function(){n.do.length=0,n.do.push(be()),c(),i.hide()},u=Lr[a];return Object(o.jsx)(ln,{children:Object(o.jsxs)(Bo,{children:[Object(o.jsx)(Eo,{}),Object(o.jsx)(Po,{action:e,onTypeChanged:function(){c(),s()}}),Object(o.jsxs)(Pt.a,{onClick:function(){1!==n.do.length?i.show(Object(o.jsx)("div",{"data-widget":"dialog-console-delete",children:Object(o.jsx)("span",{children:"Are you sure to delete this action?"})}),Vo(i,d)):i.show(Object(o.jsx)("div",{"data-widget":"dialog-console-delete",children:Object(o.jsx)("span",{children:"This is the last one in process unit, are you sure to clear all settings?"})}),Vo(i,l))},children:[Object(o.jsx)(V.a,{icon:$t.g}),Object(o.jsx)("span",{children:"Delete This Action"})]}),u?Object(o.jsx)(u,{action:e}):Object(o.jsxs)("div",{"data-role":"action-not-impl",children:["[",a,"] Not implemented yet"]})]})})},Vo=function(t,n){return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)("div",{style:{flexGrow:1}}),Object(o.jsx)(tn.c,{inkType:tn.b.PRIMARY,onClick:n,children:"Yes"}),Object(o.jsx)(tn.c,{inkType:tn.b.DEFAULT,onClick:t.hide,children:"Cancel"})]})},qo=function(t){var n=t.stage,e=t.unit,r=t.appendUnit,i=t.prependUnit,c=t.deleteUnit,s=Object(nn.b)(),d=Ht().firePipelineContentChange,u=Object(a.useState)(!0),p=Object(l.a)(u,2),f=p[0],b=p[1],h=Object(W.f)(),g=function(t){var n=e.do.findIndex((function(n){return n===t}));-1!==n&&(e.do.splice(n,1),d(),h())},j=function(){c(e),s.hide()},m=function(){e.do=[be()],d(),s.hide()};return Object(o.jsxs)(Uo,{children:[Object(o.jsx)(yo,{unit:e,expanded:f,children:Object(o.jsxs)(Ho,{onClick:function(){return b(!f)},"data-expanded":f,children:[Object(o.jsx)(V.a,{icon:f?v.z:v.J}),Object(o.jsx)("span",{children:f?"Hide This Process Unit":"Show This Process Unit"})]})}),Object(o.jsxs)(zo,{"data-expanded":f,children:[e.do.map((function(t){return Object(o.jsx)(Yo,{unit:e,action:t,deleteAction:g},t.uuid)})),Object(o.jsxs)(Wo,{children:[Object(o.jsx)("div",{}),Object(o.jsxs)(Pt.c,{onClick:function(){e.do.push(be()),d(),h()},children:[Object(o.jsx)(V.a,{icon:v.hb}),Object(o.jsx)("span",{children:"Append Action"})]}),Object(o.jsx)(sn,{icon:v.cb,type:tn.b.PRIMARY,label:"Append Process Unit",onClick:r,menus:[{icon:v.cb,label:"Prepend Process Unit",onClick:function(){return i(e)}}]}),Object(o.jsx)(sn,{icon:$t.g,type:tn.b.DANGER,label:"Delete This Unit",onClick:function(){1!==n.units.length?s.show(Object(o.jsx)("div",{"data-widget":"dialog-console-delete",children:Object(o.jsx)("span",{children:"Are you sure to delete this unit?"})}),Vo(s,j)):s.show(Object(o.jsx)("div",{"data-widget":"dialog-console-delete",children:Object(o.jsx)("span",{children:"This is the last one in stage, are you sure to clear all actions?"})}),Vo(s,m))},menus:[{icon:v.G,label:"Clear Actions",onClick:function(){s.show(Object(o.jsx)("div",{"data-widget":"dialog-console-delete",children:Object(o.jsx)("span",{children:"Are you sure to clear all actions?"})}),Vo(s,m))}}]})]})]})]})};function Qo(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: 1fr auto auto;\n\tgrid-column-gap: calc(var(--margin) / 4);\n\talign-items: center;\n\tpadding: calc(var(--margin) / 2) calc(var(--margin) / 2);\n\tfont-size: 0.8em;\n\tborder-bottom: 1px dashed var(--border-color);\n\tmargin-bottom: calc(var(--margin) / 2);\n"]);return Qo=function(){return t},t}function Jo(){var t=Object(r.a)(["\n\tflex-grow: 1;\n\t&[data-expanded=false] {\n\t\tdisplay: none;\n\t}\n"]);return Jo=function(){return t},t}function Xo(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tposition: relative;\n\tfont-size: 0.8em;\n\tpadding: 0 calc(var(--margin) / 4);\n\tfont-family: var(--console-title-font-family);\n\theight: 32px;\n\tline-height: 32px;\n\t&:before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: -1px;\n\t\twidth: calc(100% + 2px);\n\t\theight: 50%;\n\t\tborder: 1px dashed var(--border-color);\n\t\tborder-bottom: 0;\n\t\tz-index: -1;\n\t}\n\t&[data-expanded=false] {\n\t\t> button {\n\t\t\t> svg {\n\t\t\t\ttransform: rotateZ(180deg);\n\t\t\t}\n\t\t}\n\t}\n\t> div:first-child {\n\t\tmargin-right: calc(var(--margin) / 4);\n\t}\n\t> button {\n\t\tmargin-right: calc(var(--margin) / 4);\n\t\t> svg {\n\t\t\ttransition: all 300ms ease-in-out;\n\t\t}\n\t}\n"]);return Xo=function(){return t},t}function Ko(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\tflex-direction: column;\n\t&:before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: var(--margin);\n\t\theight: 100%;\n\t\tbackground-color: var(--console-waive-color);\n\t\tborder-top-right-radius: calc(var(--margin) / 4);\n\t\tborder-bottom-right-radius: var(--margin);\n\t\topacity: 0;\n\t\tz-index: -1;\n\t\ttransition: all 300ms ease-in-out;\n\t}\n\t&:hover:before {\n\t\topacity: 0.25;\n\t}\n"]);return Ko=function(){return t},t}var Zo,$o=s.c.div.attrs({"data-widget":"stage"})(Ko()),ta=s.c.div.attrs({"data-widget":"stage-title"})(Xo()),na=s.c.div.attrs({"data-widget":"stage-body"})(Jo()),ea=s.c.div.attrs({"data-widget":"stage-footer"})(Qo()),ra=function(t,n){return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)("div",{style:{flexGrow:1}}),Object(o.jsx)(tn.c,{inkType:tn.b.PRIMARY,onClick:n,children:"Yes"}),Object(o.jsx)(tn.c,{inkType:tn.b.DEFAULT,onClick:t.hide,children:"Cancel"})]})},oa=function(t){var n=t.pipeline,e=t.stage,r=t.index,i=t.appendStage,c=t.prependStage,s=t.deleteStage,d=Object(nn.b)(),u=Ht().firePipelineContentChange,p=Object(a.useRef)(null),f=Object(a.useState)(!0),b=Object(l.a)(f,2),h=b[0],g=b[1],j=Object(W.f)(),m=function(){e.units.push(fe()),u(),j()},x=function(t){var n=e.units.findIndex((function(n){return n===t}));-1===n?e.units.unshift(fe()):e.units.splice(n,0,fe()),u(),j()},O=function(){s(e),d.hide()},y=function(){e.units=[fe()],u(),d.hide()},I=function(t){var n=e.units.findIndex((function(n){return n===t}));-1!==n&&(e.units.splice(n,1),u(),j())};return Object(o.jsxs)($o,{"data-expanded":h,children:[Object(o.jsxs)(ta,{"data-expanded":h,children:[Object(o.jsx)(Zt,{onChange:function(t){e.name=t,u(),j()},prefixLabel:"#".concat(r),value:e.name,placeholder:"Untitled Stage",styles:{inputFontSize:"0.8em"}}),Object(o.jsxs)(Pt.e,{onClick:function(){return g(!h)},children:[Object(o.jsx)(V.a,{icon:h?v.z:v.J}),Object(o.jsx)("span",{children:h?"Hide This Stage":"Show This Stage"})]})]}),Object(o.jsxs)(na,{"data-expanded":h,ref:p,children:[e.units.map((function(t){return Object(o.jsx)(qo,{stage:e,unit:t,appendUnit:m,prependUnit:x,deleteUnit:I},t.uuid)})),Object(o.jsxs)(ea,{children:[Object(o.jsx)("div",{}),Object(o.jsx)(sn,{icon:v.mb,type:tn.b.PRIMARY,label:"Append Stage",onClick:i,menus:[{icon:v.mb,label:"Prepend Stage",onClick:function(){return c(e)}}]}),Object(o.jsx)(sn,{icon:$t.g,type:tn.b.DANGER,label:"Delete Above Stage",onClick:function(){1!==n.stages.length?d.show(Object(o.jsx)("div",{"data-widget":"dialog-console-delete",children:Object(o.jsxs)("span",{children:[Object(o.jsx)("span",{children:"Are you sure to delete stage "}),Object(o.jsx)("span",{"data-widget":"dialog-console-object",children:e.name||"Untitled Stage"}),Object(o.jsx)("span",{children:"?"})]})}),ra(d,O)):d.show(Object(o.jsx)("div",{"data-widget":"dialog-console-delete",children:Object(o.jsxs)("span",{children:[Object(o.jsx)("span",{"data-widget":"dialog-console-object",children:e.name||"Untitled Stage"}),Object(o.jsx)("span",{children:" is the last one in pipeline, are you sure to clear all process units?"})]})}),ra(d,y))},menus:[{icon:v.G,label:"Clear Process Units",onClick:function(){d.show(Object(o.jsx)("div",{"data-widget":"dialog-console-delete",children:Object(o.jsx)("span",{children:"Are you sure to clear all process units?"})}),ra(d,y))}}]})]})]})]})};function aa(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: 120px 1fr;\n\talign-items: center;\n\tpadding: 0 calc(var(--margin) / 2);\n\theight: 36px;\n\tfont-size: 0.8em;\n\t> div:first-child {\n\t\twhite-space: nowrap;\n\t\tfont-weight: var(--font-demi-bold);\n\t\tfont-variant: petite-caps;\n\t}\n\t> div:nth-child(2) {\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-demi-bold);\n\t}\n"]);return aa=function(){return t},t}var ia=s.c.div(aa()),ca=(Zo={},Object(Y.a)(Zo,_.INSERT,"Insert"),Object(Y.a)(Zo,_.MERGE,"Merge"),Object(Y.a)(Zo,_.INSERT_OR_MERGE,"Insert or Merge"),Object(Y.a)(Zo,_.DELETE,"Delete"),Zo),sa=function(t){var n=t.pipeline,e=ut().store.topics,r=Ht().firePipelineContentChange,a=Object(W.f)(),i=Object.values(_),c=e.find((function(t){return t.topicId==n.topicId}));return(null===c||void 0===c?void 0:c.type)===B.RAW&&(i=i.filter((function(t){return[_.INSERT,_.DELETE].includes(t)}))),Object(o.jsxs)(ia,{children:[Object(o.jsx)("div",{children:"Trigger On:"}),Object(o.jsx)(vn,{label:ca[n.type],options:i.filter((function(t){return t!==n.type})),toLabel:function(t){return ca[t]},onSelect:function(t){n.type=t,r(),a()}})]})};function da(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n\tpadding-bottom: calc(var(--margin) / 4);\n"]);return da=function(){return t},t}function la(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tfont-family: var(--console-title-font-family);\n\theight: 32px;\n\tline-height: 32px;\n\tbackground-color: var(--pipeline-bg-color);\n\tpadding: 0 calc(var(--margin) / 2) 0 calc(var(--margin) / 4);\n\t> div:first-child {\n\t\tflex-grow: 1;\n\t\tmargin-right: calc(var(--margin) / 4);\n\t}\n"]);return la=function(){return t},t}function ua(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-top: calc(var(--margin) / 4);\n\tborder: var(--border);\n\tborder-color: var(--pipeline-border-color);\n\tborder-radius: var(--border-radius);\n\toverflow: hidden;\n"]);return ua=function(){return t},t}var pa=s.c.div(ua()),fa=s.c.div(la()),ba=s.c.div(da()),ha=function(t){var n=t.outbound,e=t.pipeline,r=ut().changeSelectedPipeline,a=Ht().firePipelineContentChange,i=Object(W.f)(),c=function(){e.stages.push(pe()),a(),i()},s=function(t){var n=e.stages.findIndex((function(n){return n===t}));-1===n?e.stages.unshift(pe()):e.stages.splice(n,0,pe()),a(),i()},d=function(t){var n=e.stages.findIndex((function(n){return n===t}));-1!==n&&(e.stages.splice(n,1),a(),i())};return Object(o.jsxs)(pa,{children:[Object(o.jsx)(fa,{children:Object(o.jsx)(Zt,{onChange:function(t){e.name=t,e.origin.name=t,r(e),a(),i()},prefixLabel:"# ".concat(n?"Outbound":"Inbound"),value:e.name,placeholder:"Untitled Pipeline",styles:{backgroundColor:"transparent"}})}),Object(o.jsxs)(ba,{children:[Object(o.jsx)(sa,{pipeline:e}),e.stages.map((function(t,n){return t.uuid||(t.uuid=Object(H.a)()),Object(o.jsx)(oa,{pipeline:e,stage:t,appendStage:c,prependStage:s,deleteStage:d,index:n+1},t.uuid)}))]})]})};function va(){var t=Object(r.a)(["\n\tflex-grow: 1;\n\tpadding-bottom: var(--margin);\n"]);return va=function(){return t},t}function ga(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: fixed;\n\toverflow-x: hidden;\n\tcolor: var(--invert-color);\n\ttransition: opacity 300ms ease-in-out;\n\tborder-radius: var(--border-radius);\n\tborder-top-right-radius: 0;\n\tmin-width: 120px;\n\tbox-shadow: var(--console-primary-hover-shadow);\n\tz-index: 1;\n\t> div {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 28px;\n\t\tpadding: 0 calc(var(--margin) / 2);\n\t\tbackground-color: var(--console-primary-color);\n\t\t&[data-current=true] {\n\t\t\tcursor: default;\n\t\t}\n\t\t&:hover {\n\t\t\tfilter: brightness(140%);\n\t\t}\n\t\t> svg {\n\t\t\tmargin-right: calc(var(--margin) / 4);\n\t\t}\n\t\t> span:first-child {\n\t\t\tmargin-left: calc(var(--margin) / 4 + 14px * 0.8);\n\t\t}\n\t}\n"]);return ga=function(){return t},t}function ja(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\tfont-size: 0.8em;\n\theight: 22px;\n\tborder-radius: 11px;\n\tcolor: var(--invert-color);\n\tbackground-color: var(--console-primary-color);\n\tpadding: 0 calc(var(--margin) / 2);\n\tmargin-left: calc(var(--margin) / 4);\n\tmargin-bottom: 4px;\n\tcursor: pointer;\n\ttransition: all 300ms ease-in-out;\n\t&:hover {\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t}\n\t&:before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 1px;\n\t\tbackground-color: var(--invert-color);\n\t\topacity: 0;\n\t\ttransition: all 300ms ease-in-out;\n\t}\n\t&[data-can-expand=false] {\n\t\tcursor: default;\n\t\t&:hover {\n\t\t\tbox-shadow: none;\n\t\t}\n\t}\n\t&[data-expanded=true] {\n\t\tborder-bottom-left-radius: 0;\n\t\tborder-bottom-right-radius: 0;\n\t\t&:before {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n\t> span {\n\t\tposition: relative;\n\t}\n\t> span:first-child {\n\t\tmargin-right: calc(var(--margin) / 3);\n\t}\n\t> span:nth-child(2) {\n\t\tpadding-left: calc(var(--margin) / 3);\n\t\t&:before {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\ttop: 20%;\n\t\t\tleft: 0;\n\t\t\twidth: 1px;\n\t\t\theight: 60%;\n\t\t\tbackground-color: var(--invert-color);\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n"]);return ja=function(){return t},t}function ma(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: flex-end;\n\tfont-family: var(--console-title-font-family);\n\tmargin-top: calc(var(--margin) / -2);\n\theight: 40px;\n\toverflow: hidden;\n\tborder-bottom: var(--border);\n\t> div:first-child {\n\t\tflex-grow: 1;\n\t\tfont-size: 1.4em;\n\t}\n\t> button {\n\t\theight: 22px;\n\t\tmargin-left: calc(var(--margin) / 4);\n\t\tmargin-bottom: 4px;\n\t}\n"]);return ma=function(){return t},t}function xa(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: 1fr;\n\tgrid-template-rows: auto 1fr;\n\tposition: relative;\n\tflex-grow: 1;\n\theight: 100%;\n\tpadding: calc(var(--margin) / 2);\n\toverflow-y: scroll;\n\t&::-webkit-scrollbar {\n\t\tbackground-color: transparent;\n\t\twidth: 4px;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color: transparent;\n\t\tborder-radius: 2px;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--console-favorite-color);\n\t\tborder-radius: 2px;\n\t}\n"]);return xa=function(){return t},t}var Oa=s.c.div(xa()),ya=s.c.div(ma()),Ia=s.c.div(ja()),wa=s.c.div.attrs((function(t){var n=t.visible;return{style:{opacity:n?1:0,pointerEvents:n?"auto":"none",top:t.top,right:t.right}}}))(ga()),Ca=s.c.div(va()),Ea=function(t){var n=t.label,e=t.count,r=t.pipelines,i=t.pipeline,c=ut().changeSelectedPipeline,s=Object(a.useRef)(null),d=Object(a.useState)({visible:!1,right:0,top:0}),u=Object(l.a)(d,2),p=u[0],f=u[1];Object(W.e)(s,(function(){return f(Object(U.a)(Object(U.a)({},p),{},{visible:!1}))}));var b=function(t){return function(n){n.preventDefault(),n.stopPropagation(),t!==i&&(f(Object(U.a)(Object(U.a)({},p),{},{visible:!1})),c(t))}};return Object(o.jsxs)(Ia,{onClick:function(t){if(t.preventDefault(),t.stopPropagation(),0!==e){var n=s.current.getBoundingClientRect();f({visible:!0,top:n.top+n.height,right:window.innerWidth-n.left-n.width})}},"data-can-expand":0!==e,"data-expanded":p.visible,ref:s,children:[Object(o.jsx)("span",{children:n}),Object(o.jsx)("span",{children:e}),Object(o.jsx)(wa,Object(U.a)(Object(U.a)({},p),{},{children:null===r||void 0===r?void 0:r.map((function(t,n){return Object(o.jsxs)("div",{"data-current":t===i,onClick:b(t),children:[i===t?Object(o.jsx)(V.a,{icon:v.q}):null,Object(o.jsx)("span",{children:t.name||"Untitled Pipeline #".concat(n+1)})]},Object(H.a)())}))}))]})},Ta=function(t){var n,e,r,i=t.topic,c=t.nodes,s=ut(),d=s.store.selectedPipeline,l=s.changeSelectedPipeline,u=s.addPipelineSelectionChangedListener,p=s.removePipelineSelectionChangedListener,f=Object(W.f)();if(Object(a.useEffect)((function(){return u(f),function(){return p(f)}})),!i)return null;var b,h,g=c.find((function(t){return t.topic===i})),j=(null===(n=g.toMe)||void 0===n?void 0:n.length)||0,m=(null===(e=g.fromMe)||void 0===e?void 0:e.length)||0,x=function(){return g.toNext?(l(g.toNext),g.toNext):g.toMe?(l(g.toMe[0]),g.toMe[0]):g.fromMe?(l(g.fromMe[0]),g.fromMe[0]):void 0},O=d;O?(null===(b=g.toMe)||void 0===b?void 0:b.includes(O))||(null===(h=g.fromMe)||void 0===h?void 0:h.includes(O))||g.toNext===O||(O=x()):O=x();var y=(null===(r=O)||void 0===r?void 0:r.topicId)==i.topicId;return Object(o.jsxs)(Oa,{children:[Object(o.jsxs)(ya,{"data-topic-type":i.type,children:[Object(o.jsx)("div",{children:i.name}),O?Object(o.jsx)(Ea,{label:"Inbound",count:j,pipelines:g.toMe,pipeline:O}):null,O?Object(o.jsx)(Ea,{label:"Outbound",count:m,pipelines:g.fromMe,pipeline:O}):null,Object(o.jsxs)(Pt.c,{onClick:function(){var t={topicId:i.topicId,type:_.INSERT_OR_MERGE,stages:[pe()]},n=Object(U.a)(Object(U.a)({},t),{},{targetTopicIds:[],origin:t,uuid:Object(H.a)()});g.fromMe||(g.fromMe=[]),g.fromMe.push(n),O?l(n):f()},children:[Object(o.jsx)(V.a,{icon:v.Pb}),Object(o.jsx)("span",{children:"New Outbound Pipeline"})]})]}),Object(o.jsx)(Ca,{children:Object(o.jsx)(Ut,{pipeline:O,children:O?Object(o.jsx)(ha,{outbound:y,topic:i,pipeline:O}):null})})]})};function ka(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-family: var(--console-title-font-family);\n\tfont-size: 3em;\n\topacity: 0;\n\tpointer-events: none;\n\ttransition: opacity 300ms ease-in-out;\n\t&[data-visible=true] {\n\t\topacity: 0.2;\n\t\tpointer-events: auto;\n\t}\n"]);return ka=function(){return t},t}function Na(){var t=Object(r.a)(["\n\tdisplay: block;\n\tposition: relative;\n\tflex-grow: 1;\n\theight: 100%;\n"]);return Na=function(){return t},t}var Aa=s.c.div(Na()),Sa=s.c.div(ka()),Ra=function(t){var n=t.nodes,e=t.visible,r=ut(),i=r.store.selectedTopic,c=r.addTopicSelectionChangedListener,s=r.removeTopicSelectionChangedListener,d=Object(W.f)();return Object(a.useEffect)((function(){return c(d),function(){return s(d)}})),e?Object(o.jsxs)(Aa,{children:[Object(o.jsx)(Ta,{topic:i,nodes:n}),Object(o.jsx)(Sa,{"data-visible":null==i,children:"Pick a topic please."})]}):null},Da=function(t){for(var n=t.target.topicId,e=t.arranged,r=e.starts,o=e.ends,a=t.allTopics,i=t.findPipelines,c=t.getNextTopicId,s=[],d=n;d;){var l=i(d);if(!l||0===l.length)break;var u=l[0],p=c(u),f={topic:a.get(p)||{topicId:p,code:p,name:p,type:B.NOT_DEFINED,factors:[]},fromMe:r.get(p),toMe:o.get(p),use:u};s.push(f),d=p}return s},Pa=function(t){var n=t.topic,e=t.arranged,r=t.topics;if(!n)return[];var o=e.starts,a=e.ends,i=function(t,n,e){return Da({target:t,arranged:n,allTopics:e,findPipelines:function(t){return n.ends.get(t)},getNextTopicId:function(t){return t.topicId}})}(n,e,r).reverse(),c={topic:n,fromMe:o.get(n.topicId),toMe:a.get(n.topicId),current:!0},s=function(t,n,e){return Da({target:t,arranged:n,allTopics:e,findPipelines:function(t){return n.starts.get(t)},getNextTopicId:function(t){return t.targetTopicIds[0]}})}(n,e,r);return[].concat(Object(G.a)(i.map((function(t){return Object(U.a)(Object(U.a)({},t),{},{toNext:t.use})}))),[Object(U.a)(Object(U.a)({},c),{},{toNext:s[0]?s[0].use:void 0})],Object(G.a)(s.map((function(t,n,e){return Object(U.a)(Object(U.a)({},t),{},{toNext:e[n+1]?e[n+1].use:void 0})})))).map((function(t,n,e){return Object(U.a)(Object(U.a)({},t),{},{previous:0!==n?e[n-1].topic:void 0,next:n!==e.length-1?e[n+1].topic:void 0})}))};function _a(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-family: var(--console-title-font-family);\n\tfont-size: 3em;\n\topacity: 0;\n\tpointer-events: none;\n\ttransition: opacity 300ms ease-in-out;\n\t&[data-visible=true] {\n\t\topacity: 0.3;\n\t\tpointer-events: auto;\n\t}\n"]);return _a=function(){return t},t}function La(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-self: stretch;\n\toverflow: hidden;\n"]);return La=function(){return t},t}var Ma=s.c.div.attrs({"data-widget":"console-pipeline-body"})(La()),Fa=s.c.div(_a()),Ga=function(t,n){var e=n.get(t);return e||(e=[],n.set(t,e)),e},Ua=function(t){var n=new Map,e=new Map;return[t.consume,t.produce].forEach((function(t){return t.forEach((function(t){var r=t.topicId,o=t.stages.map((function(t){return t.units.map((function(t){return t.do.map((function(t){return function(t){return!!t.type&&Object.values(D).includes(t.type)}(t)?t.topicId:null})).flat().filter((function(t){return t}))})).flat()})).flat(),a=Object(U.a)(Object(U.a)({},t),{},{stages:t.stages.map((function(t){return Object(U.a)(Object(U.a)({uuid:Object(H.a)()},t),{},{units:t.units.map((function(t){return Object(U.a)(Object(U.a)({uuid:Object(H.a)()},t),{},{do:t.do.map((function(t){return Object(U.a)({uuid:Object(H.a)()},t)}))})}))})})),targetTopicIds:Object(G.a)(new Set(o)),origin:t,uuid:Object(H.a)()}),i=Ga(r,n);-1===i.findIndex((function(t){return a.origin===t.origin}))&&i.push(a),a.targetTopicIds.forEach((function(t){var n=Ga(t,e);-1===n.findIndex((function(t){return a.origin===t.origin}))&&n.push(a)}))}))})),{starts:n,ends:e}},Ha=function(){var t=ut(),n=t.store,e=n.topics,r=n.topic,i=n.flow,c=t.changeSelectedTopic,s=t.addFlowChangedListener,d=t.removeFlowChangedListener,u=Object(a.useState)(!1),p=Object(l.a)(u,2),f=p[0],b=p[1],h=Object(a.useState)({starts:new Map,ends:new Map}),v=Object(l.a)(h,2),g=v[0],j=v[1];Object(a.useEffect)((function(){var t=function(){c(),j({starts:new Map,ends:new Map}),b(!1)};return s(t),function(){return d(t)}})),Object(a.useEffect)((function(){i&&r&&(j(Ua(i)),b(!0),c(r))}),[r,e,i,c]);var m=e.reduce((function(t,n){return t.set(n.topicId,n)}),new Map),x=Pa({topic:r,arranged:g,topics:m});return Object(o.jsxs)(Ma,{children:[Object(o.jsx)(Dt,{topic:r,nodes:x,visible:f}),Object(o.jsx)(Ra,{nodes:x,visible:f}),Object(o.jsx)(Fa,{"data-visible":null==i,children:"Pick a topic please."}),Object(o.jsx)(Fa,{"data-visible":null!=i&&!f,children:"Arrange pipelines..."})]})},za=e(76);function Ba(){var t=Object(r.a)(["\n\twidth: 44px;\n\theight: 36px;\n\tborder-radius: calc(var(--border-radius) * 2);\n\toverflow: hidden;\n\t&:not(:first-child) {\n\t\tmargin-left: calc(var(--margin) / 3);\n\t}\n\t&[data-pressed=true] {\n\t\tcolor: var(--invert-color);\n\t\tbackground-color: var(--console-primary-color);\n\t}\n\t> button {\n\t\twidth: 44px;\n\t\theight: 36px;\n\t\tfont-size: 1.4em;\n\t\tpadding: 8px;\n\t\tborder-radius: calc(var(--border-radius) * 2);\n\t}\n"]);return Ba=function(){return t},t}function Wa(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tpadding-right: calc(var(--margin) / 2);\n"]);return Wa=function(){return t},t}function Ya(){var t=Object(r.a)(["\n\tflex-grow: 1;\n"]);return Ya=function(){return t},t}function Va(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\tfont-family: var(--console-title-font-family);\n\tfont-size: 1.6em;\n\tpadding: 0 calc(var(--margin) / 3);\n\tmargin-right: calc(var(--margin) / 3);\n\t&:first-child {\n\t\tpadding-left: calc(var(--margin) / 2);\n\t}\n\t&:before,\n\t&:after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\ttop: -2px;\n\t\theight: calc(var(--console-space-header-height) + 3px);\n\t\tborder-right: 0;\n\t\tborder-top: calc(var(--console-space-header-height) / 2 + 1.5px) solid transparent;\n\t\tborder-bottom: calc(var(--console-space-header-height) / 2 + 1.5px) solid transparent;\n\t\tborder-left: 10px solid var(--border-color);\n\t}\n\t&:before {\n\t\tright: -10px;\n\t}\n\t&:after {\n\t\tright: -9px;\n\t\tborder-left-color: var(--bg-color);\n\t}\n\t> span {\n\t\tfont-variant: petite-caps;\n\t}\n"]);return Va=function(){return t},t}function qa(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: sticky;\n\tgrid-column: span 2;\n\theight: var(--console-space-header-height);\n\t&:after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tz-index: 1;\n\t\tbottom: 0;\n\t\twidth: 100%;\n\t\theight: 1px;\n\t\tbackground-color: var(--border-color);\n\t}\n"]);return qa=function(){return t},t}var Qa=s.c.div.attrs({"data-widget":"console-pipeline-header"})(qa()),Ja=s.c.div(Va()),Xa=s.c.div(Ya()),Ka=s.c.div(Wa()),Za=s.c.div(Ba()),$a=function(t){var n=t.onClick,e=t.icon,r=t.pressed;return Object(o.jsx)(Za,{"data-pressed":r,children:Object(o.jsx)(za.a,{ignoreHorizontalPadding:!0,onClick:n,children:Object(o.jsx)(V.a,{icon:e})})})},ti=function(){var t=ut(),n=t.store.canvasVisible,e=t.changeCanvasVisible,r=t.addCanvasVisibilityListener,i=t.removeCanvasVisibilityListener,c=Object(W.f)();Object(a.useEffect)((function(){return r(c),function(){return i(c)}}));return Object(o.jsx)($a,{icon:v.Pb,onClick:function(){return e(!n)},pressed:n})},ni=function(){var t=ut(),n=t.store.menuVisible,e=t.changeMenuVisible,r=t.addMenuVisibilityListener,i=t.removeMenuVisibilityListener,c=Object(W.f)();Object(a.useEffect)((function(){return r(c),function(){return i(c)}}));return Object(o.jsx)($a,{icon:v.f,onClick:function(){return e(!n)},pressed:n})},ei=function(){var t=ut(),n=t.store,e=n.topics,r=n.topic,i=n.selectedTopic,c=n.selectedPipeline,s=t.addFlowChangedListener,d=t.removeFlowChangedListener,l=t.addTopicSelectionChangedListener,u=t.removeTopicSelectionChangedListener,p=t.addPipelineSelectionChangedListener,f=t.removePipelineSelectionChangedListener,b=Object(W.f)();Object(a.useEffect)((function(){var t=function(){return setTimeout(b,1)};return s(t),l(t),p(t),function(){d(t),u(t),f(t)}}));var h=function(){return c?c.topicId===(null===i||void 0===i?void 0:i.topicId)?"From ":"To ":""};return Object(o.jsxs)(Qa,{children:[Object(o.jsx)(Ja,{children:"Pipelines"}),r?r===i?Object(o.jsx)(Ja,{children:"".concat(h()," ").concat(r.name).trim()}):Object(o.jsxs)(Ja,{children:["Through ",r.name]}):null,function(){if(i){if(i===r)return null;if("To "===h()){var t=e.find((function(t){return t.topicId==(null===c||void 0===c?void 0:c.topicId)}));return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsxs)(Ja,{children:["From ","".concat(t.name).trim()]}),Object(o.jsxs)(Ja,{children:["To ","".concat(i.name).trim()]})]})}return Object(o.jsxs)(Ja,{children:["From ","".concat(i.name).trim()]})}return null}(),c?Object(o.jsx)(Ja,{children:c.name||"Untitled Pipeline"}):null,Object(o.jsx)(Xa,{}),Object(o.jsxs)(Ka,{children:[Object(o.jsx)(ti,{}),Object(o.jsx)(ni,{})]})]})},ri=e(78);function oi(){var t=Object(r.a)(["\n\tdisplay: block;\n\tposition: absolute;\n\tz-index: 0;\n\tright: 0;\n\tbottom: 0;\n\ttransform-origin: bottom;\n"]);return oi=function(){return t},t}function ai(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-family: var(--console-title-font-family);\n\tfont-weight: var(--console-title-font-weight);\n\tfont-size: 0.8em;\n\tmin-height: 20px;\n\theight: 20px;\n\tmin-width: 20px;\n\twidth: 20px;\n\tborder-radius: 100%;\n\tcolor: var(--invert-color);\n\tuser-select: none;\n\ttext-transform: uppercase;\n\t> span:first-child {\n\t\tmargin-left: -1px;\n\t}\n"]);return ai=function(){return t},t}var ii=s.c.div.attrs((function(t){return{style:{backgroundColor:t.color}}}))(ai()),ci=s.c.span.attrs((function(t){var n=t.left;return{style:{transform:"scale(0.7) translateY(-4px) translateX(".concat(n,"px)")}}}))(oi()),si=function(t){var n=t.topic,e=function(t,n){switch(t.type){case B.RAW:return n.consoleRawTopicColor;case B.RATIO:return n.consoleRatioTopicColor;case B.DISTINCT:return n.consoleDistinctTopicColor;case B.AGGREGATE:return n.consoleAggregateTopicColor;case B.TIME:return n.consoleTimeTopicColor;case B.NOT_DEFINED:return n.consoleUndefinedTopicColor}}(n,Object(s.e)());return Object(o.jsxs)(ii,{color:e,children:[Object(o.jsx)("span",{children:(n.type||"u")[0]}),Object(o.jsx)(ci,{left:-3,children:"T"})]})},di=function(t){var n=t.factor,e=ri.e[(n.type||"u").split("").reduce((function(t,n){return t+n.charCodeAt(0)}),0)%ri.e.length];return Object(o.jsxs)(ii,{color:e,children:[Object(o.jsx)("span",{children:(n.type||"u")[0]}),Object(o.jsx)(ci,{left:-4,children:"F"})]})};function li(){var t=Object(r.a)(["\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tflex-grow: 1;\n\t> span {\n\t\tcolor: var(--invert-color);\n\t\tbackground-color: var(--console-favorite-color);\n\t\tborder-radius: var(--border-radius);\n\t\tpadding: 0 1px;\n\t}\n"]);return li=function(){return t},t}var ui=s.c.span(li()),pi=function(t){var n=t.name,e=t.filter,r=e.length;if(0===r)return Object(o.jsx)(ui,{children:n});for(var a=function(t){var n=t.toLowerCase().indexOf(e);return-1===n?[t,!1,!1]:[t.substr(0,n),Object(o.jsx)("span",{children:t.substr(n,r)},Object(H.a)()),t.substr(n+r)]},i=[],c=n;;){var s=a(c),d=Object(l.a)(s,3),u=d[0],p=d[1],f=d[2];if(u&&i.push(u),!1===p)break;i.push(p),c=f}return Object(o.jsx)(ui,{children:i})};function fi(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\theight: 32px;\n\tpadding: 0 calc(var(--margin) / 2) 0 calc(var(--margin) / 2 + 15px);\n\tcursor: pointer;\n\t&:hover {\n\t\tbackground-color: var(--hover-color);\n\t}\n\t&:before,\n\t&:after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tbackground-color: var(--console-waive-color);\n\t}\n\t&:before {\n\t\tleft: calc(var(--margin) / 2 + 3px);\n\t\ttop: -16px;\n\t\theight: 32px;\n\t\twidth: 1px;\n\t}\n\t&:after {\n\t\tleft: calc(var(--margin) / 2 + 3px);\n\t\ttop: 16px;\n\t\twidth: 8px;\n\t\theight: 1px;\n\t\ttransform: translateY(-50%);\n\t}\n\t> div:first-child {\n\t\tfont-size: 0.8em;\n\t\tmin-height: 20px;\n\t\theight: 20px;\n\t\tmin-width: 20px;\n\t\twidth: 20px;\n\t\tmargin-right: calc(var(--margin) / 4);\n\t}\n"]);return fi=function(){return t},t}function bi(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n\toverflow: hidden;\n\ttransition: height 300ms ease-in-out;\n"]);return bi=function(){return t},t}var hi=s.c.div.attrs((function(t){var n=t.visible,e=t.count;return{style:{height:n?32*e:0}}}))(bi()),vi=s.c.div(fi()),gi=function(t){var n=t.topic,e=t.visible,r=t.visibleFactors,a=t.filterText,i=0===r.length?n.factors:r;return Object(o.jsx)(hi,{visible:e,count:i.length,children:i.map((function(t){return Object(o.jsxs)(vi,{children:[Object(o.jsx)(di,{factor:t}),Object(o.jsx)(pi,{name:t.name,filter:a})]},t.factorId)}))})};function ji(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\theight: 32px;\n\tpadding: 0 calc(var(--margin) / 2);\n\tcursor: pointer;\n\t&:hover {\n\t\tbackground-color: var(--console-navigator-hover-color);\n\t\t> button:last-child {\n\t\t\topacity: 0.8;\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n\t&[data-factors-visible=true] {\n\t\t&:before {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\twidth: 1px;\n\t\t\theight: 7px;\n\t\t\ttop: 25px;\n\t\t\tleft: calc(var(--margin) / 2 + 3px);\n\t\t\tbackground-color: var(--console-waive-color);\n\t\t}\n\t\t> svg:first-child {\n\t\t\ttransform: rotateZ(90deg);\n\t\t}\n\t}\n\t> svg:first-child {\n\t\tmargin-right: calc(var(--margin) / 4);\n\t\tcolor: var(--console-waive-color);\n\t\ttransition: transform 300ms ease-in-out;\n\t}\n\t> div:nth-child(2) {\n\t\tmargin-right: calc(var(--margin) / 4);\n\t}\n\t> button:last-child {\n\t\tfont-size: 1em;\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t\tcursor: pointer;\n\t}\n"]);return ji=function(){return t},t}function mi(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tfont-size: 0.8em;\n\t&[data-visible=false] {\n\t\tdisplay: none;\n\t}\n"]);return mi=function(){return t},t}var xi=s.c.div.attrs({"data-widget":"pipeline-navigator-topic"})(mi()),Oi=s.c.div(ji()),yi=function(t){var n=t.topic,e=Object(nn.b)(),r=e.show,i=e.hide,c=ut(),s=c.store.topic,d=c.changeFlow,u=c.addFlowChangedListener,p=c.removeFlowChangedListener,f=c.addCollapseAllTopicsListener,b=c.removeCollapseAllTopicsListener,h=c.addTopicFilterChangedListener,g=c.removeTopicFilterChangedListener,j=Object(a.useState)(!1),m=Object(l.a)(j,2),x=m[0],O=m[1],y=Object(a.useState)(s===n),I=Object(l.a)(y,2),w=I[0],C=I[1],E=Object(a.useState)(""),T=Object(l.a)(E,2),k=T[0],N=T[1];Object(a.useEffect)((function(){var t=function(t){return C(t===n)},e=function(){return O(!1)},r=function(t){return N(t)};return u(t),f(e),h(r),function(){p(t),b(e),g(r)}}));var A=function(){var t=Object(X.a)(J.a.mark((function t(e){var c;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),e.stopPropagation(),!w){t.next=4;break}return t.abrupt("return");case 4:return r(Object(o.jsxs)("div",{"data-widget":"dialog-console-loading",children:[Object(o.jsxs)("span",{children:["Loading pipeline of topic ",Object(o.jsx)("span",{"data-widget":"dialog-console-object",children:n.name}),"."]}),Object(o.jsx)("span",{children:"Don't close current page, it should take a while."})]}),Object(o.jsx)(a.Fragment,{children:Object(o.jsx)("div",{style:{flexGrow:1}})})),t.next=7,rt(n.topicId);case 7:c=t.sent,i(),d(n,c);case 10:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),S=!1,R=[];return k?(n.name.toLowerCase().includes(k)||0!==(R=n.factors.filter((function(t){return t.name.toLowerCase().includes(k)}))).length)&&(S=!0):S=!0,Object(o.jsxs)(xi,{"data-topic-id":n.topicId,"data-visible":S,children:[Object(o.jsxs)(Oi,{"data-factors-visible":x,onClick:function(){return O(!x)},children:[Object(o.jsx)(V.a,{icon:v.s}),Object(o.jsx)(si,{topic:n}),Object(o.jsx)(pi,{name:n.name,filter:k}),Object(o.jsx)(za.a,{ignoreHorizontalPadding:!0,tooltip:"Show Pipeline",right:!0,offsetX:-8,onClick:A,children:Object(o.jsx)(V.a,{icon:v.Pb})})]}),Object(o.jsx)(gi,{topic:n,visible:x,visibleFactors:R,filterText:k})]})};function Ii(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n\tfont-size: 0.8em;\n\tpadding: 0 calc(var(--margin) / 2);\n\tmin-height: 36px;\n\tfont-family: var(--console-title-font-family);\n\tborder-top: var(--border);\n\tcolor: var(--console-favorite-color);\n\t> svg {\n\t\tanimation: "," infinite 2s forwards linear;\n\t\tmargin-right: calc(var(--margin) / 3);\n\t}\n"]);return Ii=function(){return t},t}function wi(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n\talign-items: center;\n\tjustify-content: center;\n\t> svg {\n\t\tfont-size: 3em;\n\t\topacity: 0.2;\n\t\tfilter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.5));\n\t\tanimation: "," infinite 2s forwards linear;\n\t\tmargin-bottom: calc(var(--margin) / 4);\n\t}\n\t> span {\n\t\tfont-size: 1.2em;\n\t\topacity: 0.3;\n\t\tfont-family: var(--console-title-font-family);\n\t}\n"]);return wi=function(){return t},t}function Ci(){var t=Object(r.a)(["\n\tfrom {\n\t\ttransform: rotateZ(0deg);\n\t}\n\tto {\n\t\ttransform: rotateZ(360deg);\n\t}\n"]);return Ci=function(){return t},t}function Ei(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n\toverflow: auto;\n\t&::-webkit-scrollbar {\n\t\tbackground-color: transparent;\n\t\twidth: 4px;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color: transparent;\n\t\tborder-radius: 2px;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--console-favorite-color);\n\t\tborder-radius: 2px;\n\t}\n"]);return Ei=function(){return t},t}function Ti(){var t=Object(r.a)(["\n\tflex-grow: 1;\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\tjustify-content: flex-end;\n\tpadding-left: calc(var(--margin) / 2);\n\tmargin-right: calc(var(--margin) / 6);\n\t> input {\n\t\tflex-grow: 0;\n\t\tmin-width: 0;\n\t\theight: 24px;\n\t\tfont-size: 0.8em;\n\t\tborder-radius: 0;\n\t\tborder: 0;\n\t\tpadding: 0 24px 0 0;\n\t\t&[data-on-search=false] {\n\t\t\tpadding-right: 0;\n\t\t\twidth: 0;\n\t\t}\n\t\t&[data-on-search=true] {\n\t\t\twidth: 100%;\n\t\t\tbox-shadow: 0 1px 0 0 var(--border-color);\n\t\t}\n\t}\n\t> button {\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tright: 0;\n\t\ttop: 1px;\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tfont-size: 0.8em;\n\t}\n"]);return Ti=function(){return t},t}function ki(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tfont-family: var(--console-title-font-family);\n\tmin-height: 40px;\n\tborder-bottom: var(--border);\n\tpadding: 0 calc(var(--margin) / 2);\n\t&[data-link-topic=true] {\n\t\t> button:last-child {\n\t\t\tcolor: var(--invert-color);\n\t\t\tbackground-color: var(--console-primary-color);\n\t\t}\n\t}\n\t> button {\n\t\tborder-radius: var(--border-radius);\n\t\tfont-size: 0.8em;\n\t\tpadding: calc(var(--margin) / 5);\n\t\twidth: 24px;\n\t\theight: 24px;\n\t}\n\t> button:not(:last-child) {\n\t\tmargin-right: calc(var(--margin) / 6);\n\t}\n"]);return ki=function(){return t},t}function Ni(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tborder-left: var(--border);\n\ttransition: opacity 300ms ease-in-out, right 300ms ease-in-out;\n\toverflow: hidden;\n"]);return Ni=function(){return t},t}var Ai=s.c.div.attrs((function(t){var n=t.theme,e=t.width,r=t.visible;return{"data-widget":"console-pipeline-topics-navigator",style:{position:r?"relative":"absolute",right:r?0:-1-e,top:r?"unset":n.consoleSpaceHeaderHeight,width:e,height:r?"unset":"calc(100% - ".concat(n.consoleSpaceHeaderHeight,"px)"),pointerEvents:r?"auto":"none",opacity:r?1:0}}}))(Ni()),Si=s.c.div.attrs({"data-widget":"console-pipeline-topics-navigator-title"})(ki()),Ri=s.c.div.attrs({"data-widget":"console-pipeline-topics-navigator-search"})(Ti()),Di=s.c.div.attrs({"data-widget":"console-pipeline-topics-navigator-body"})(Ei()),Pi=Object(s.d)(Ci()),_i=s.c.div(wi(),Pi),Li=function(){var t=ut().store,n=t.topics;return t.topicsLoadCompleted||0!==n.length?null:Object(o.jsxs)(_i,{children:[Object(o.jsx)(V.a,{icon:v.t}),Object(o.jsx)("span",{children:"Loading..."})]})},Mi=s.c.div(Ii(),Pi),Fi=function(){var t=ut().store,n=t.topics;return t.topicsLoadCompleted||0===n.length?null:Object(o.jsxs)(Mi,{children:[Object(o.jsx)(V.a,{icon:v.t}),Object(o.jsx)("span",{children:"More Data On Loading..."})]})},Gi=function(){var t=ut().changeTopicFilter,n=Object(a.useRef)(null),e=Object(a.useState)(!1),r=Object(l.a)(e,2),i=r[0],c=r[1],s=Object(a.useState)(null),d=Object(l.a)(s,2),u=d[0],p=d[1],f=Object(a.useState)(""),b=Object(l.a)(f,2),h=b[0],g=b[1];return Object(o.jsxs)(Ri,{children:[Object(o.jsx)(zt.a,{"data-on-search":i,value:h,placeholder:"Filter by name",onChange:function(){var e,r=null===(e=n.current)||void 0===e?void 0:e.value;g(r||"");var o=(r||"").trim();u&&(clearTimeout(u),p(null)),p(setTimeout((function(){p(null),t(o)}),300))},onFocus:function(){var t;return null===(t=n.current)||void 0===t?void 0:t.select()},onBlur:function(){var t;return!(null===(t=n.current)||void 0===t?void 0:t.value)&&c(!1)},ref:n}),Object(o.jsx)(za.a,{ignoreHorizontalPadding:!0,tooltip:"Search by Name",right:!0,offsetX:-8,onClick:function(){var t;c(!0),null===(t=n.current)||void 0===t||t.focus()},children:Object(o.jsx)(V.a,{icon:v.qb})})]})},Ui=function(){var t=Object(s.e)().consoleSpaceHeaderHeight,n=ut(),e=n.store,r=e.topics,i=e.menuVisible,c=n.addMenuVisibilityListener,d=n.removeMenuVisibilityListener,u=n.addTopicsChangedListener,p=n.removeTopicsChangedListener,f=n.addTopicSelectionChangedListener,b=n.removeTopicSelectionChangedListener,h=n.collapseAllTopics,g=Object(a.useRef)(null),j=Object(a.useState)(315),m=Object(l.a)(j,2),x=m[0],y=m[1],I=Object(a.useState)(!1),w=Object(l.a)(I,2),C=w[0],E=w[1],T=Object(W.f)();Object(a.useEffect)((function(){var t=function(t){t&&y(Math.max(x,315)),T()},n=function(t){if(t&&C&&g.current){var n=g.current.querySelector('div[data-topic-id="'.concat(t.topicId,'"]'));n&&n.scrollIntoView({behavior:"smooth",block:"start"})}};return c(t),u(T),f(n),function(){d(t),p(T),b(n)}}));return Object(o.jsxs)(Ai,{width:x-15,visible:i,children:[Object(o.jsxs)(Si,{"data-link-topic":C,children:[Object(o.jsx)("span",{children:"Topics"}),Object(o.jsx)(Gi,{}),Object(o.jsx)(za.a,{ignoreHorizontalPadding:!0,tooltip:"Collapse All",right:!0,offsetX:-8,onClick:function(){return h()},children:Object(o.jsx)(V.a,{icon:v.y,transform:{rotate:-45}})}),Object(o.jsx)(za.a,{ignoreHorizontalPadding:!0,tooltip:"Synchronized with Editor",right:!0,offsetX:-8,onClick:function(){return E(!C)},children:Object(o.jsx)(V.a,{icon:v.W})})]}),Object(o.jsxs)(Di,{ref:g,children:[r.map((function(t){return Object(o.jsx)(yi,{topic:t},t.topicId)})),Object(o.jsx)(Li,{})]}),Object(o.jsx)(Fi,{}),Object(o.jsx)(O.a,{top:t,width:x,onResize:function(t){return y(Math.min(Math.max(t,15),500))},alignment:O.b.RIGHT})]})};function Hi(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: 1fr auto;\n\tgrid-template-rows: auto 1fr;\n\tflex-grow: 1;\n\toverflow: hidden;\n"]);return Hi=function(){return t},t}var zi=s.c.div.attrs({"data-widget":"console-pipeline-container"})(Hi()),Bi=function(){return Object(o.jsx)(lt,{children:Object(o.jsxs)(zi,{children:[Object(o.jsx)(ei,{}),Object(o.jsx)(Ha,{}),Object(o.jsx)(Ui,{})]})})},Wi=e.p+"static/media/report-background.99d6aff5.png",Yi=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,r,o,a;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.pageNumber,r=void 0===e?1:e,o=n.pageSize,a=void 0===o?9:o,t.abrupt("return",new Promise((function(t){setTimeout((function(){t({data:[],itemCount:0,pageNumber:r,pageSize:a,pageCount:1})}),1e3)})));case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Vi=e(116),qi=e(107),Qi=e(108);function Ji(){var t=Object(r.a)(["\n\tbackground-repeat: no-repeat;\n\tbackground-size: 80%;\n\tfilter: drop-shadow(2px 4px 6px rgba(0, 0, 0, 0.7)) grayscale(0.9);\n\ttransition: all 300ms ease-in-out;\n"]);return Ji=function(){return t},t}function Xi(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tgrid-column: span 2;\n\tfont-variant: petite-caps;\n\tfont-weight: var(--font-demi-bold);\n\tfont-size: 1.4em;\n\tborder-bottom: var(--border);\n\theight: 44px;\n\tmargin-bottom: calc(var(--margin) / 2);\n"]);return Xi=function(){return t},t}function Ki(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: 150px 1fr;\n\tgrid-column-gap: var(--margin);\n\tgrid-auto-rows: minmax(40px, auto);\n\tgrid-row-gap: calc(var(--margin) / 4);\n\talign-items: center;\n"]);return Ki=function(){return t},t}function Zi(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: 30% calc(70% - var(--margin));\n\tgrid-column-gap: var(--margin);\n\tmin-height: 300px;\n\tmargin-top: -50px;\n\tmargin-bottom: 50px;\n\tpadding-bottom: 50px;\n\topacity: 1;\n\tpointer-events: auto;\n\tz-index: 1;\n\ttransition: all 300ms ease-in-out;\n\tposition: absolute;\n\ttop: 230px;\n\twidth: 100%;\n\t&[data-visible=false] {\n\t\topacity: 0;\n\t\tpointer-events: none;\n\t}\n"]);return Zi=function(){return t},t}var $i,tc=s.c.div(Zi()),nc=s.c.div(Ki()),ec=s.c.div(Xi()),rc=s.c.div.attrs((function(t){var n=t.background,e=t.position;return{style:{backgroundImage:"url(".concat(n,")"),backgroundPosition:e}}}))(Ji());!function(t){t.BACKGROUND_POSITION_CHANGED="background-position-changed"}($i||($i={}));var oc=i.a.createContext({});oc.displayName="EditPanelContext";var ac=function(t){var n=t.children,e=Object(a.useState)((function(){var t=new K.EventEmitter;return t.setMaxListeners(1e3),t})),r=Object(l.a)(e,1)[0];return Object(o.jsx)(oc.Provider,{value:{changeBackgroundPosition:function(t){return r.emit($i.BACKGROUND_POSITION_CHANGED,t)},addBackgroundPositionChangeListener:function(t){return r.on($i.BACKGROUND_POSITION_CHANGED,t)},removeBackgroundPositionChangeListener:function(t){return r.off($i.BACKGROUND_POSITION_CHANGED,t)}},children:n})},ic=function(){return i.a.useContext(oc)},cc=function(t){var n=t.background,e=ic(),r=e.addBackgroundPositionChangeListener,i=e.removeBackgroundPositionChangeListener,c=Object(a.useState)("left"),s=Object(l.a)(c,2),d=s[0],u=s[1];return Object(a.useEffect)((function(){return r(u),function(){return i(u)}}),[r,i]),Object(o.jsx)(rc,{background:n,position:d})},sc=function(t){var n=t.title,e=t.background,r=t.visible,a=t.children;return Object(o.jsxs)(tc,{"data-visible":r,children:[Object(o.jsx)(cc,{background:e}),Object(o.jsxs)(nc,{children:[Object(o.jsx)(ec,{children:n}),a]})]})},dc=function(t){var n=t.title,e=t.background,r=t.visible,a=t.children;return Object(o.jsx)(ac,{children:Object(o.jsx)(sc,{title:n,background:e,visible:r,children:a})})};function lc(){var t=Object(r.a)(["\n\tgrid-column: span 2;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\ttransition: all 300ms ease-in-out;\n\t> button {\n\t\tfont-size: 1.2em;\n\t\theight: 32px;\n\t\tmin-width: 120px;\n\t\t&:not(:first-child) {\n\t\t\tmargin-left: calc(var(--margin) / 2);\n\t\t}\n\t}\n"]);return lc=function(){return t},t}var uc=s.c.div(lc()),pc=e(394),fc=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;return{pageNumber:1,pageSize:t,pageCount:1,itemCount:0,data:[]}};function bc(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding: calc(var(--margin) / 2) var(--margin);\n\tposition: relative;\n\tborder-radius: calc(var(--border-radius) * 2);\n\tbox-shadow: var(--console-shadow);\n\tcursor: pointer;\n\ttransition: all 300ms ease-in-out;\n\t&:hover {\n\t\tbox-shadow: var(--console-hover-shadow);\n\t}\n\t> div:first-child {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tfont-family: var(--console-title-font-family);\n\t\tfont-size: 1.4em;\n\t}\n\t> div:nth-child(2) {\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t\tposition: relative;\n\t\tword-break: break-word;\n\t\tfont-size: 0.8em;\n\t\topacity: 0.8;\n\t\tmargin-top: calc(var(--margin) / 2);\n\t\tmin-height: 3.5em;\n\t\tline-height: 1.5em;\n\t}\n\t> div:nth-child(3) {\n\t\tdisplay: flex;\n\t\tjustify-content: space-around;\n\t\tline-height: 1.2em;\n\t\topacity: 0.7;\n\t\tmargin-top: calc(var(--margin) / 2);\n\t\t> button {\n\t\t\tfont-size: 0.8em;\n\t\t\tcolor: var(--console-font-color);\n\t\t\tsvg {\n\t\t\t\tmargin-right: calc(var(--margin) / 4);\n\t\t\t}\n\t\t}\n\t}\n"]);return bc=function(){return t},t}function hc(){var t=Object(r.a)(["\n\tgrid-column: span 2;\n\tdisplay: flex;\n\tmargin-top: calc(var(--margin) / 2);\n\tmargin-bottom: 50px;\n\t&[data-visible=false] {\n\t\tdisplay: none;\n\t}\n\t> div:nth-child(2) {\n\t\tflex-grow: 1;\n\t}\n\t> div:nth-child(3) {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 4px 0;\n\t}\n\t> div:nth-child(3),\n\t> button {\n\t\tline-height: 1.6em;\n\t\tfont-family: var(--console-title-font-family);\n\t\tfont-weight: var(--font-demi-bold);\n\t\tcolor: var(--console-font-color);\n\t\t&[data-visible=false] {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n\t> button:last-child {\n\t\tmargin-left: calc(var(--margin) / 2);\n\t}\n"]);return hc=function(){return t},t}function vc(){var t=Object(r.a)(["\n\tdisplay: none;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding-top: calc(var(--margin) / 2);\n\tgrid-column: span 3;\n\tfont-family: var(--console-title-font-family);\n\tfont-weight: var(--font-demi-bold);\n\tfont-size: 1.2em;\n\t&[data-visible=true] {\n\t\tdisplay: flex;\n\t}\n"]);return vc=function(){return t},t}function gc(){var t=Object(r.a)(["\n\tgrid-column: span 2;\n\tdisplay: none;\n\tgrid-template-columns: repeat(3, 1fr);\n\tgrid-column-gap: calc(var(--margin) / 2);\n\tgrid-row-gap: calc(var(--margin) / 2);\n\tpadding-top: calc(var(--margin) / 2);\n\t&[data-visible=true] {\n\t\tdisplay: grid;\n\t}\n"]);return gc=function(){return t},t}function jc(){var t=Object(r.a)(["\n\tborder-radius: 0;\n\tborder-width: 2px;\n\tborder-color: var(--border-color);\n\tborder-left: 0;\n\tborder-right-width: 0;\n\tpadding: 0;\n\tfont-size: 1.4em;\n\tline-height: 1.6em;\n\theight: calc(1.6em + 12px);\n\twidth: 0;\n\tcolor: var(--console-font-color);\n\ttransition: all 300ms ease-in-out;\n"]);return jc=function(){return t},t}function mc(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\t&[data-on-before-search=true] {\n\t\t> button {\n\t\t\tborder-radius: 0;\n\t\t\t&:before {\n\t\t\t\tborder-radius: 0;\n\t\t\t}\n\t\t}\n\t\t> input {\n\t\t\tpadding: 0 calc(var(--margin) / 2);\n\t\t\tborder-style: solid;\n\t\t\tborder-right-width: 2px;\n\t\t\tborder-top-right-radius: calc(var(--border-radius) * 2);\n\t\t\tborder-bottom-right-radius: calc(var(--border-radius) * 2);\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\t> button {\n\t\tdisplay: block;\n\t\talign-self: stretch;\n\t\tfont-size: 1.2em;\n\t\twidth: 44px;\n\t\tbackground-color: var(--border-color);\n\t\t//color: var(--invert-color);\n\t\tborder-top-right-radius: calc(var(--border-radius) * 2);\n\t\tborder-bottom-right-radius: calc(var(--border-radius) * 2);\n\t\tcursor: pointer;\n\t\t&:before {\n\t\t\tborder-radius: 0 calc(var(--border-radius) * 2) calc(var(--border-radius) * 2) 0;\n\t\t}\n\t\t> svg {\n\t\t\tfont-size: 0.7em;\n\t\t}\n\t}\n"]);return mc=function(){return t},t}function xc(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: auto 1fr;\n\tmargin-bottom: calc(var(--margin) / 2);\n\t&[data-can-create=false] {\n\t\t> button {\n\t\t\tdisplay: none;\n\t\t}\n\t\t> div {\n\t\t\tgrid-column: span 2;\n\t\t\t&[data-on-before-search=false] {\n\t\t\t\t> button {\n\t\t\t\t\tborder-bottom-color: transparent;\n\t\t\t\t}\n\t\t\t}\n\t\t\t> button {\n\t\t\t\tborder-radius: 0;\n\t\t\t\tbackground-color: transparent;\n\t\t\t\tborder-bottom: 2px solid var(--border-color);\n\t\t\t\t&:before {\n\t\t\t\t\tborder-radius: calc(var(--border-radius) * 2);\n\t\t\t\t}\n\t\t\t}\n\t\t\t> input {\n\t\t\t\tborder-top: 0;\n\t\t\t\tborder-right: 0;\n\t\t\t\tborder-radius: 0;\n\t\t\t\tpadding-left: 0;\n\t\t\t}\n\t\t}\n\t}\n\t> button {\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-bold);\n\t\tfont-size: 1.2em;\n\t\tbackground-color: var(--border-color);\n\t\tborder-top-left-radius: calc(var(--border-radius) * 2);\n\t\tborder-bottom-left-radius: calc(var(--border-radius) * 2);\n\t\tpadding: 0 var(--margin);\n\t\t&:before {\n\t\t\tborder-radius: calc(var(--border-radius) * 2) 0 0 calc(var(--border-radius) * 2);\n\t\t}\n\t\t&:after {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\ttop: 30%;\n\t\t\tright: 0;\n\t\t\twidth: 1px;\n\t\t\theight: 40%;\n\t\t\tbackground-color: var(--invert-color);\n\t\t\topacity: 0.7;\n\t\t}\n\t\t> svg {\n\t\t\tfont-size: 0.7em;\n\t\t\tmargin-right: calc(var(--margin) / 2);\n\t\t}\n\t}\n"]);return xc=function(){return t},t}function Oc(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\tflex-direction: column;\n\tmargin-top: 30px;\n\t&[data-visible=false] {\n\t\t> div:nth-child(2),\n\t\t> div:nth-child(3) > *:not(:nth-child(2)) {\n\t\t\topacity: 0;\n\t\t\tpointer-events: none;\n\t\t}\n\t}\n\t> div:nth-child(2),\n\t> div:nth-child(3) > *:not(:nth-child(2)) {\n\t\topacity: 1;\n\t\tpointer-events: auto;\n\t}\n"]);return Oc=function(){return t},t}var yc=s.c.div(Oc()),Ic=s.c.div(xc()),wc=s.c.div(mc()),Cc=Object(s.c)(zt.a)(jc()),Ec=s.c.div(gc()),Tc=s.c.div(vc()),kc=s.c.div(hc()),Nc=s.c.div(bc()),Ac=function(t){var n=t.searchPlaceholder,e=t.createButtonLabel,r=void 0===e?"Create One":e,i=t.onCreate,c=t.onSearched,s=void 0===c?function(){}:c,d=t.listData,u=t.renderItem,p=t.getKeyOfItem,f=t.visible,b=void 0===f||f,h=Object(a.useRef)(null),g=Object(a.useState)(!0),j=Object(l.a)(g,2),m=j[0],x=j[1],O=Object(a.useState)(!1),y=Object(l.a)(O,2),I=y[0],w=y[1],C=Object(a.useState)(Object(U.a)({queried:!1},fc())),E=Object(l.a)(C,2),T=E[0],k=E[1],N=Object(a.useState)(""),A=Object(l.a)(N,2),S=A[0],R=A[1];Object(a.useEffect)((function(){h.current&&h.current.focus()}),[h]);var D=function(){var t=Object(X.a)(J.a.mark((function t(n,e){var r,o,a,i=arguments;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],o=i.length>3&&void 0!==i[3]&&i[3],t.prev=2,w(!0),r&&k(Object(U.a)({queried:!1},fc())),t.next=7,d({search:n,pageNumber:e,pageSize:T.pageSize});case 7:a=t.sent,k(Object(U.a)({queried:!0,searched:n},a)),o&&0!==a.data.length&&x(!1),w(!1),s(),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(2),console.groupCollapsed("%cError on fetch data.","color:rgb(251,71,71)"),console.error(t.t0),console.groupEnd();case 19:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(n,e){return t.apply(this,arguments)}}(),P=function(){var t=Object(X.a)(J.a.mark((function t(n){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"===n.key){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,D(S,1,!0,!0);case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();return Object(o.jsxs)(yc,{"data-visible":b,children:[Object(o.jsxs)(Ic,{"data-can-create":!!i,children:[Object(o.jsxs)(za.a,{onClick:i,children:[Object(o.jsx)(V.a,{icon:v.jb}),Object(o.jsx)("span",{children:r})]}),Object(o.jsxs)(wc,{"data-on-before-search":m,children:[Object(o.jsx)(za.a,{ignoreHorizontalPadding:!0,onClick:function(){!m&&x(!0),h.current.focus(),h.current.select()},children:Object(o.jsx)(V.a,{icon:v.qb})}),Object(o.jsx)(Cc,{placeholder:n,value:S,onChange:function(t){return R(t.target.value)},onKeyPress:P,ref:h})]})]}),Object(o.jsxs)(Ec,{"data-visible":T.queried,children:[Object(o.jsx)(Tc,{"data-visible":0===T.data.length,children:"No matched data."}),T.data.map((function(t){return Object(o.jsx)(a.Fragment,{children:u(t)},p(t))}))]}),Object(o.jsxs)(kc,{"data-visible":!T.queried||0!==T.data.length,children:[Object(o.jsx)(Vi.a,{"data-visible":T.queried&&1!==T.pageNumber,onClick:function(){return D(T.searched,T.pageNumber-1)},children:"Previous Page"}),Object(o.jsx)(pc.a,{visible:I}),Object(o.jsxs)("div",{"data-visible":T.queried,children:[Object(o.jsx)("sub",{children:"#"}),T.pageNumber," of ",T.pageCount," Pages"]}),Object(o.jsx)(Vi.a,{"data-visible":T.queried&&T.pageNumber!==T.pageCount,onClick:function(){return D(T.searched,T.pageNumber+1)},children:"Next Page"})]})]})};function Sc(){var t=Object(r.a)(["\n\tflex-grow: 1;\n\tdisplay: flex;\n\talign-items: center;\n\tfont-size: 0.8em;\n\tfont-variant: petite-caps;\n\tfont-weight: var(--font-bold);\n\topacity: 0.5;\n\ttransition: all 300ms ease-in-out;\n\t&[data-change-kind=changed] {\n\t\tcolor: var(--console-success-color);\n\t}\n\t&[data-change-kind=saving] {\n\t\tcolor: var(--console-danger-color);\n\t}\n\t&[data-change-kind=saved] {\n\t\tcolor: var(--console-danger-color);\n\t\t> span {\n\t\t\tanimation: "," 6000ms ease-in-out forwards;\n\t\t\ttransform-origin: left;\n\t\t}\n\t}\n\t&:empty {\n\t\topacity: 0;\n\t}\n"]);return Sc=function(){return t},t}function Rc(){var t=Object(r.a)(["\n\t0% {\n\t\ttransform: scale(1);\n\t}\n\t5% {\n\t\ttransform: scale(1.5);\n\t}\n\t20%, 80% {\n\t\ttransform: scale(1);\n\t\topacity: 1;\n\t}\n\t100% {\n\t\ttransform: scale(1);\n\t\topacity: 0;\n\t}\n"]);return Rc=function(){return t},t}var Dc=Object(s.d)(Rc()),Pc=s.c.div(Sc(),Dc),_c=function(t){var n=t.entityLabel,e=t.entityImage,r=t.entity,i=t.createEntity,c=t.saveEntity,s=t.isEntityOnCreate,d=t.onClosed,u=t.renderEditContent,p=t.entity,f=void 0===p?i(!0):p,b=Object(a.useState)(!1),h=Object(l.a)(b,2),v=h[0],g=h[1],j=Object(a.useState)(!1),m=Object(l.a)(j,2),x=m[0],O=m[1],y=Object(a.useState)(!1),I=Object(l.a)(y,2),w=I[0],C=I[1],E=Object(W.f)();Object(a.useEffect)((function(){C(!1),O(!1),g(!1)}),[f]);var T=function(){var t=Object(X.a)(J.a.mark((function t(){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}return t.abrupt("return");case 2:return O(!0),g(!1),t.next=6,c(f);case 6:O(!1),C(!0),E();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=!!r,N=!s(f)?"An Exists ".concat(n):"A New ".concat(n),A=w?"saved":x?"saving":v?"changed":"",S=w?"Data Saved.":x?"Data Saving...":v?"Data Changed.":"";return Object(o.jsxs)(dc,{title:N,background:e,visible:k,children:[u(f,(function(){w&&C(!1),g(!0),E()})),Object(o.jsxs)(uc,{children:[Object(o.jsx)(Pc,{"data-change-kind":A,children:Object(o.jsx)("span",{children:S})}),c?Object(o.jsx)(Pt.c,{onClick:T,children:Object(o.jsx)("span",{children:"Confirm"})}):null,Object(o.jsx)(Pt.a,{onClick:function(){return d()},children:Object(o.jsx)("span",{children:"Close"})})]})]})},Lc=function(t){var n=t.title,e=t.searchPlaceholder,r=t.createButtonLabel,i=t.entityLabel,c=t.entityImage,s=t.createEntity,d=t.fetchEntityAndCodes,u=t.fetchEntityList,p=t.saveEntity,f=t.isEntityOnCreate,b=t.renderEntityInList,h=t.getKeyOfEntity,v=t.renderEditContent,g=Object(a.useState)({}),j=Object(l.a)(g,2),m=j[0],x=j[1],O=function(t){return Object(X.a)(J.a.mark((function n(){var e;return J.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d(t);case 2:e=n.sent,x(e);case 4:case"end":return n.stop()}}),n)})))};return Object(o.jsxs)(Qi.c,{children:[Object(o.jsx)(qi.a,{title:n}),Object(o.jsx)(Ac,{searchPlaceholder:e,createButtonLabel:r,onCreate:function(){return x({entity:s(!1)})},onSearched:function(){return x({})},listData:u,renderItem:function(t){return b(t,O)},getKeyOfItem:h,visible:!m.entity}),Object(o.jsx)(_c,{entityLabel:i,entityImage:c,entity:m.entity,createEntity:s,saveEntity:p,isEntityOnCreate:f,renderEditContent:v,onClosed:function(){return x({})}})]})};function Mc(){var t=Object(r.a)(['\n\tgrid-column: span 2;\n\tfont-variant: petite-caps;\n\tfont-weight: var(--font-demi-bold);\n\tfont-size: 1.2em;\n\t+ ol {\n\t\tgrid-column: span 2;\n\t\tcounter-reset: item;\n\t\t> li {\n\t\t\tlist-style: none;\n\t\t\tline-height: 2em;\n\t\t\tfont-size: 0.9em;\n\t\t\t&:before {\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tcontent: counters(item, ".") ". ";\n\t\t\t\tcounter-increment: item;\n\t\t\t\twidth: 20px;\n\t\t\t}\n\t\t}\n\t}\n\t+ ol + ul {\n\t\tgrid-column: span 2;\n\t\tfont-size: 0.9em;\n\t\tline-height: 1.6em;\n\t\tmargin-top: 10px;\n\t\t> li {\n\t\t\tlist-style: none;\n\t\t\tfont-weight: var(--font-demi-bold);\n\t\t}\n\t}\n']);return Mc=function(){return t},t}var Fc=s.c.div(Mc()),Gc=function(){var t=function(){var t=Object(X.a)(J.a.mark((function t(){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{entity:{}});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=Yi;return Object(o.jsx)(Lc,{title:"Reports",searchPlaceholder:"Search by report name, topic name, description, etc.",createButtonLabel:"Create Report",entityLabel:"Report",entityImage:Wi,createEntity:function(){return{}},fetchEntityAndCodes:t,fetchEntityList:n,isEntityOnCreate:function(t){return!t.reportId},renderEntityInList:function(t,n){return Object(o.jsxs)(Nc,{onClick:n(t),children:[Object(o.jsx)("div",{children:t.name}),Object(o.jsx)("div",{children:t.description}),Object(o.jsxs)("div",{children:[Object(o.jsxs)(Vi.b,{tooltip:"Topics Count",center:!0,children:[Object(o.jsx)(V.a,{icon:v.Db}),Object(o.jsx)("span",{children:t.topicCount})]}),Object(o.jsxs)(Vi.b,{tooltip:"In User Groups",center:!0,children:[Object(o.jsx)(V.a,{icon:v.Nb}),Object(o.jsx)("span",{children:t.groupCount})]}),Object(o.jsxs)(Vi.b,{tooltip:"In Spaces",center:!0,children:[Object(o.jsx)(V.a,{icon:v.N}),Object(o.jsx)("span",{children:t.spaceCount})]})]})]},t.reportId)},getKeyOfEntity:function(t){return t.reportId},renderEditContent:function(){return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)(Fc,{children:"Guide to Create Predefined Report:"}),Object(o.jsxs)("ol",{children:[Object(o.jsx)("li",{children:"Create an user group, include yourself into this group,"}),Object(o.jsx)("li",{children:"Create a new space or pick an existed one,"}),Object(o.jsx)("li",{children:"Grant space to user group in step (1),"}),Object(o.jsx)("li",{children:"Open client console and sign-in,"}),Object(o.jsx)("li",{children:"Find space in step (3), and connect,"}),Object(o.jsx)("li",{children:"Create reports in connected space, and set as predefined."})]}),Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:"Unlike user-defined reports, predefined reports are shared following space assignment."}),Object(o.jsx)("li",{children:"Only administrators are empowered to create predefined reports."})]})]})}})},Uc=e.p+"static/media/space-background.c2d174f9.png",Hc=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,r,o,a,i,c;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(Z.b)()){t.next=5;break}return e=n.pageNumber,r=void 0===e?1:e,o=n.pageSize,a=void 0===o?9:o,t.abrupt("return",new Promise((function(t){setTimeout((function(){t({data:[{spaceId:"1",name:"Quotation & Policy",description:"All Sales Data",topicCount:3,reportCount:2,groupCount:2,connectionCount:8}],itemCount:0,pageNumber:r,pageSize:a,pageCount:1})}),1e3)})));case 5:return t.next=7,fetch("".concat(Object(Z.a)(),"space/name?query_name=").concat(n.search),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageNumber:n.pageNumber,pageSize:n.pageSize})});case 7:return i=t.sent,t.next=10,i.json();case 10:return c=t.sent,t.abrupt("return",c);case 12:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),zc=function(){var t=Object(X.a)(J.a.mark((function t(n){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(Z.b)()){t.next=4;break}return t.abrupt("return",new Promise((function(t){setTimeout((function(){t([{spaceId:"1",name:"Quotation & Policy",description:"All Sales Data"}].filter((function(t){return t.name.toUpperCase().includes(n.toUpperCase())})))}),500)})));case 4:return t.next=6,fetch("".concat(Object(Z.a)(),"query/space/group?query_name=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});case 6:return e=t.sent,t.next=9,e.json();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Bc=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,r,o,a,i,c,s;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n),!Object(Z.b)()){t.next=11;break}t.t0=n,t.next="1"===t.t0?5:7;break;case 5:return e={spaceId:"1",name:"Quotation & Policy",description:"All Sales Data",groupIds:["1"]},t.abrupt("break",8);case 7:e={};case 8:return t.abrupt("return",{space:e,groups:[{userGroupId:"1",name:"Oklahoma",description:"Northwest market analysis squad."}],topics:[{topicId:"1",name:"Quotation"},{topicId:"2",name:"Policy"},{topicId:"3",name:"Participant"}]});case 11:return t.next=13,fetch("".concat(Object(Z.a)(),"space?space_id=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});case 13:return r=t.sent,t.next=16,r.json();case 16:return o=t.sent,t.next=19,fetch("".concat(Object(Z.a)(),"topic/ids"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o.topicIds)});case 19:return a=t.sent,t.next=22,a.json();case 22:return i=t.sent,t.next=25,fetch("".concat(Object(Z.a)(),"user_groups/ids"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o.groupIds)});case 25:return c=t.sent,t.next=28,c.json();case 28:return s=t.sent,t.abrupt("return",{space:o,groups:s,topics:i});case 30:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Wc=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,r;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.spaceId){t.next=9;break}return t.next=3,fetch("".concat(Object(Z.a)(),"update/space?space_id=").concat(n.spaceId),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return e=t.sent,t.next=6,e.json();case 6:return t.abrupt("return",t.sent);case 9:if(!Object(Z.b)()){t.next=13;break}return t.abrupt("return",new Promise((function(t){n.spaceId="10000",setTimeout((function(){return t()}),500)})));case 13:return t.next=15,fetch("".concat(Object(Z.a)(),"space"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 15:return r=t.sent,t.next=18,r.json();case 18:return t.abrupt("return",t.sent);case 19:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Yc=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,r,o,a,i;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(Z.b)()){t.next=5;break}return e=n.pageNumber,r=void 0===e?1:e,o=n.pageSize,a=void 0===o?9:o,t.abrupt("return",new Promise((function(t){setTimeout((function(){t({data:[{userGroupId:"1",name:"Oklahoma",description:"South-center market analysis squad.",userCount:4,spaceCount:2,topicCount:3,reportCount:21}],itemCount:0,pageNumber:r,pageSize:a,pageCount:1})}),1e3)})));case 5:return t.next=7,fetch("".concat(Object(Z.a)(),"user_group/name?query_name=").concat(n.search),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageNumber:n.pageNumber,pageSize:n.pageSize})});case 7:return i=t.sent,t.next=10,i.json();case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Vc=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,r,o,a,i;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(Z.b)()){t.next=5;break}return e=n.pageNumber,r=void 0===e?1:e,o=n.pageSize,a=void 0===o?9:o,t.abrupt("return",new Promise((function(t){setTimeout((function(){t({data:[{userId:"1",name:"Damon Lindelof",spaceCount:2,topicCount:3,reportCount:7},{userId:"2",name:"Sally Jupiter",spaceCount:2,topicCount:3,reportCount:2},{userId:"3",name:"Roy Raymond",spaceCount:2,topicCount:3,reportCount:4},{userId:"4",name:"Walter Kovacs",spaceCount:2,topicCount:3,reportCount:8},{userId:"5",name:"Jeffrey Dean Morgan",spaceCount:2,topicCount:3,reportCount:0}],itemCount:0,pageNumber:r,pageSize:a,pageCount:1})}),1e3)})));case 5:return t.next=7,fetch("".concat(Object(Z.a)(),"user/name?query_name=").concat(n.search),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageNumber:n.pageNumber,pageSize:n.pageSize})});case 7:return i=t.sent,t.next=10,i.json();case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),qc=function(){var t=Object(X.a)(J.a.mark((function t(n){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(Z.b)()){t.next=4;break}return t.abrupt("return",new Promise((function(t){setTimeout((function(){t([{userGroupId:"1",name:"Oklahoma",description:"South-center market analysis squad."},{userGroupId:"2",name:"Delaware"},{userGroupId:"3",name:"Hawaii"},{userGroupId:"4",name:"Alaska"},{userGroupId:"5",name:"Missouri"},{userGroupId:"6",name:"Arkansas"}].filter((function(t){return t.name.toUpperCase().includes(n.toUpperCase())})))}),500)})));case 4:return t.next=6,fetch("".concat(Object(Z.a)(),"query/user_group/space?query_name=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});case 6:return e=t.sent,t.next=9,e.json();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Qc=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,r,o,a,i,c;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(Object(Z.b)()),!Object(Z.b)()){t.next=19;break}t.t0=n,t.next="1"===t.t0?5:"2"===t.t0?7:"3"===t.t0?9:"4"===t.t0?11:"5"===t.t0?13:15;break;case 5:return e={userId:"1",name:"Damon Lindelof",groupIds:["1"]},t.abrupt("break",16);case 7:return e={userId:"2",name:"Sally Jupiter",groupIds:["1"]},t.abrupt("break",16);case 9:return e={userId:"3",name:"Roy Raymond",groupIds:["1"]},t.abrupt("break",16);case 11:return e={userId:"4",name:"Walter Kovacs",groupIds:["1"]},t.abrupt("break",16);case 13:return e={userId:"5",name:"Jeffrey Dean Morgan",groupIds:["1"]},t.abrupt("break",16);case 15:e={};case 16:return t.abrupt("return",{user:e,groups:[{userGroupId:"1",name:"Oklahoma",description:"Northwest market analysis squad."}]});case 19:return t.next=21,fetch("".concat(Object(Z.a)(),"user?user_id=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});case 21:return r=t.sent,t.next=24,r.json();case 24:if(o=t.sent,!(a=o.groupIds)){t.next=36;break}return t.next=29,fetch("".concat(Object(Z.a)(),"user_groups/ids"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 29:return i=t.sent,t.next=32,i.json();case 32:return c=t.sent,t.abrupt("return",{user:o,groups:c});case 36:return t.abrupt("return",{user:o,groups:[]});case 37:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Jc=function(){var t=Object(X.a)(J.a.mark((function t(n){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(Object(Z.b)()),!Object(Z.b)()){t.next=5;break}return t.abrupt("return",new Promise((function(t){n.userId="10000",setTimeout((function(){return t()}),500)})));case 5:return t.next=7,fetch("".concat(Object(Z.a)(),"user"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 7:return e=t.sent,t.next=10,e.json();case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Xc=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,r,o,a,i,c,s;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(Object(Z.b)()),!Object(Z.b)()){t.next=21;break}t.t0=n,t.next="1"===t.t0?5:"2"===t.t0?7:"3"===t.t0?9:"4"===t.t0?11:"5"===t.t0?13:"6"===t.t0?15:17;break;case 5:return e={userGroupId:"1",name:"Oklahoma",description:"South-center market analysis squad.",userIds:["1","2","3","4","5"],spaceIds:["1"]},t.abrupt("break",18);case 7:return e={userGroupId:"2",name:"Delaware",userIds:[],spaceIds:[]},t.abrupt("break",18);case 9:return e={userGroupId:"3",name:"Hawaii",userIds:[],spaceIds:[]},t.abrupt("break",18);case 11:return e={userGroupId:"4",name:"Alaska",userIds:[],spaceIds:[]},t.abrupt("break",18);case 13:return e={userGroupId:"5",name:"Missouri",userIds:[],spaceIds:[]},t.abrupt("break",18);case 15:return e={userGroupId:"6",name:"Arkansas",userIds:[],spaceIds:[]},t.abrupt("break",18);case 17:e={};case 18:return t.abrupt("return",{group:e,users:[{userId:"1",name:"Damon Lindelof"},{userId:"2",name:"Sally Jupiter"},{userId:"3",name:"Roy Raymond"},{userId:"4",name:"Walter Kovacs"},{userId:"5",name:"Jeffrey Dean Morgan"}],spaces:[{spaceId:"1",name:"Quotation & Policy",description:"All Sales Data"}]});case 21:return t.next=23,fetch("".concat(Object(Z.a)(),"user_group?user_group_id=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});case 23:return r=t.sent,t.next=26,r.json();case 26:return o=t.sent,t.next=29,fetch("".concat(Object(Z.a)(),"user/ids"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o.userIds)});case 29:return a=t.sent,t.next=32,a.json();case 32:return i=t.sent,t.next=35,fetch("".concat(Object(Z.a)(),"space/ids"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o.spaceIds)});case 35:return c=t.sent,t.next=38,c.json();case 38:return s=t.sent,t.abrupt("return",{group:o,users:i,spaces:s});case 40:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Kc=function(){var t=Object(X.a)(J.a.mark((function t(n){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(Object(Z.b)()),!Object(Z.b)()){t.next=5;break}return t.abrupt("return",new Promise((function(t){n.userGroupId="10000",setTimeout((function(){return t()}),500)})));case 5:return t.next=7,fetch("".concat(Object(Z.a)(),"user_group"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 7:return e=t.sent,t.next=10,e.json();case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Zc=function(){var t=Object(X.a)(J.a.mark((function t(n){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(Z.b)()){t.next=4;break}return t.abrupt("return",new Promise((function(t){setTimeout((function(){t([{userId:"1",name:"Damon Lindelof"},{userId:"2",name:"Sally Jupiter"},{userId:"3",name:"Roy Raymond"},{userId:"4",name:"Walter Kovacs"},{userId:"5",name:"Jeffrey Dean Morgan"}].filter((function(t){return t.name.toUpperCase().includes(n.toUpperCase())})))}),500)})));case 4:return t.next=6,fetch("".concat(Object(Z.a)(),"query/user/group?query_name=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});case 6:return e=t.sent,t.next=9,e.json();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),$c=function(){var t=Object(X.a)(J.a.mark((function t(n){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(Z.b)()){t.next=4;break}return t.abrupt("return",new Promise((function(t){setTimeout((function(){t([{userGroupId:"1",name:"Oklahoma",description:"South-center market analysis squad."},{userGroupId:"2",name:"Delaware"},{userGroupId:"3",name:"Hawaii"},{userGroupId:"4",name:"Alaska"},{userGroupId:"5",name:"Missouri"},{userGroupId:"6",name:"Arkansas"}].filter((function(t){return t.name.toUpperCase().includes(n.toUpperCase())})))}),500)})));case 4:return t.next=6,fetch("".concat(Object(Z.a)(),"query/user_group/space?query_name=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});case 6:return e=t.sent,t.next=9,e.json();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();function ts(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tmin-height: 32px;\n\theight: 32px;\n\tcursor: pointer;\n\t&:hover {\n\t\tcolor: var(--invert-color);\n\t\tbackground-color: var(--console-primary-color);\n\t}\n\t> div:first-child {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 32px;\n\t\t&[data-visible=false] {\n\t\t\topacity: 0;\n\t\t}\n\t}\n\t> span:nth-child(3) {\n\t\tmargin-left: calc(var(--margin) / 4);\n\t\ttransform: scale(0.8);\n\t\ttransform-origin: left bottom;\n\t\topacity: 0.7;\n\t}\n"]);return ts=function(){return t},t}function ns(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: fixed;\n\tflex-direction: column;\n\tfont-size: 0.8em;\n\tmin-height: 32px;\n\tmax-height: 256px;\n\tbackground-color: var(--bg-color);\n\tborder-radius: var(--border-radius);\n\tbox-shadow: var(--console-primary-hover-shadow);\n\toverflow-x: hidden;\n\tz-index: 1000;\n\ttransition: opacity 300ms ease-in-out;\n\t&::-webkit-scrollbar {\n\t\tbackground-color: transparent;\n\t\twidth: 4px;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color: transparent;\n\t\tborder-radius: 2px;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--console-favorite-color);\n\t\tborder-radius: 2px;\n\t}\n\t> div[data-widget='no-data'] {\n\t\theight: 32px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 0 calc(var(--margin) / 2);\n\t\t> svg {\n\t\t\tmargin-right: calc(var(--margin) / 3);\n\t\t}\n\t}\n"]);return ns=function(){return t},t}function es(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\theight: 32px;\n\tmargin: 4px 0;\n\tborder: var(--border);\n\tborder-color: transparent;\n\tborder-radius: var(--border-radius);\n\t&[data-in-search=true] {\n\t\tborder-color: var(--border-color);\n\t\t> input {\n\t\t\tflex-grow: 1;\n\t\t\tpadding-left: var(--input-indent);\n\t\t\tmargin-right: var(--input-indent);\n\t\t}\n\t\t> button {\n\t\t\tmargin-left: 0;\n\t\t\tmargin-right: 4px;\n\t\t\tborder-radius: var(--border-radius);\n\t\t}\n\t}\n\t> input {\n\t\twidth: 0;\n\t\tborder: 0;\n\t\tpadding: 5px 0;\n\t\tfont-size: 0.8em;\n\t\theight: 30px;\n\t}\n\t> button {\n\t\tmargin-left: -1px;\n\t\tborder-radius: 12px;\n\t}\n"]);return es=function(){return t},t}function rs(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\theight: 24px;\n\tpadding-left: calc(var(--margin) / 2);\n\tcolor: var(--invert-color);\n\tfont-size: 0.8em;\n\tbackground-color: var(--console-primary-color);\n\tborder-radius: 12px;\n\tcursor: pointer;\n\ttransition: all 300ms ease-in-out;\n\t&:hover {\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t}\n\t> span {\n\t\tposition: relative;\n\t\tpadding-right: calc(var(--margin) / 4);\n\t\tcursor: default;\n\t}\n\t> div {\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t\talign-items: center;\n\t\theight: 24px;\n\t\tpadding: 0 calc(var(--margin) / 3) 0 calc(var(--margin) / 4);\n\t\tborder-top-right-radius: 12px;\n\t\tborder-bottom-right-radius: 12px;\n\t\t&:before {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\ttop: 25%;\n\t\t\tleft: 0;\n\t\t\twidth: 1px;\n\t\t\theight: 50%;\n\t\t\tbackground-color: var(--invert-color);\n\t\t\topacity: 0.7;\n\t\t}\n\t\t> svg {\n\t\t}\n\t}\n"]);return rs=function(){return t},t}function os(){var t=Object(r.a)(["\n\tpadding: 6px 0;\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tmargin-left: calc(var(--margin) / -3);\n\t&:empty {\n\t\tpadding: 0;\n\t}\n\t> div {\n\t\tmargin: 2px 0 2px calc(var(--margin) / 3);\n\t}\n"]);return os=function(){return t},t}function as(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tmin-height: 40px;\n"]);return as=function(){return t},t}var is=s.c.div(as()),cs=s.c.div(os()),ss=s.c.div(rs()),ds=s.c.div(es()),ls=s.c.div.attrs((function(t){var n=t.visible,e=t.top,r=t.bottom,o=t.left,a=t.minWidth;return{"data-at-top":t.atTop,style:{opacity:n?1:0,pointerEvents:n?"auto":"none",minWidth:a,top:e,bottom:r,left:o}}}))(ns()),us=s.c.div(ts()),ps=function(t){var n=t.label,e=t.selectedItems,r=t.renderSelectedItem,i=t.renderCandidateItem,c=t.getKeyOfItem,s=t.fetchItems,d=Object(a.useRef)(null),u=Object(a.useRef)(null),p=Object(a.useState)(!1),f=Object(l.a)(p,2),b=f[0],h=f[1],g=Object(a.useState)(""),j=Object(l.a)(g,2),m=j[0],x=j[1],O=Object(a.useState)([]),y=Object(l.a)(O,2),I=y[0],w=y[1],C=Object(a.useState)(null),E=Object(l.a)(C,2),T=E[0],k=E[1],N=Object(a.useState)({visible:!1,left:0,minWidth:0,atTop:!1}),A=Object(l.a)(N,2),S=A[0],R=A[1];Object(W.e)(d,(function(){return R(Object(U.a)(Object(U.a)({},S),{},{visible:!1}))}));var D;return D=0===m.trim().length?Object(o.jsx)("div",{"data-widget":"no-data",children:"No search text..."}):T?Object(o.jsxs)("div",{"data-widget":"no-data",children:[Object(o.jsx)(V.a,{icon:v.zb,spin:!0}),Object(o.jsx)("span",{children:"Searching..."})]}):0===I.length?Object(o.jsx)("div",{"data-widget":"no-data",children:"No matched."}):I.map((function(t){return Object(o.jsx)(a.Fragment,{children:i(t)},c(t))})),Object(o.jsxs)(is,{children:[Object(o.jsxs)(ds,{"data-in-search":b,ref:d,children:[Object(o.jsx)(zt.a,{ref:u,placeholder:"Search by Name...",value:m,onChange:function(t){var n=t.target.value;if(T&&clearTimeout(T),0===n.trim().length)w([]),k(null);else{var e=setTimeout(Object(X.a)(J.a.mark((function t(){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(n.trim());case 2:e=t.sent,w(e),k(null);case 5:case"end":return t.stop()}}),t)}))),500);k(e)}x(n)},onFocus:function(){var t=d.current.getBoundingClientRect();R({visible:!0,bottom:window.innerHeight-t.top+2,left:t.left,minWidth:t.width,atTop:!0})}}),Object(o.jsxs)(Pt.c,{onClick:function(){b?h(!1):(h(!0),u.current.focus())},children:[Object(o.jsx)(V.a,{icon:b?v.e:v.jb}),Object(o.jsx)("span",{children:b?"Done":n})]}),Object(o.jsx)(ls,Object(U.a)(Object(U.a)({},S),{},{visible:S.visible&&b,children:D}))]}),Object(o.jsx)(cs,{children:e.map((function(t){return Object(o.jsx)(a.Fragment,{children:r(t)},c(t))}))})]})},fs=function(t){var n=t.label,e=t.entity,r=t.codes,a=t.initPropArray,i=t.addItemToProp,c=t.removeItemFromProp,s=t.isItemPicked,d=t.addItemToCodes,l=t.removeItemFromCodes,u=t.getKeyOfItem,p=t.getNameOfItem,f=t.getMinorNameOfItem,b=t.listItems,h=t.onDataChanged,g=function(t,n,e){c(t,n),l(r,n),e()},j=function(t){t.sort((function(t,n){return p(t).toUpperCase().localeCompare(p(n).toUpperCase())}))},m=function(){var t=Object(X.a)(J.a.mark((function t(n){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(n);case 2:return e=t.sent,j(e),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();return j(r),Object(o.jsx)(ps,{label:n,selectedItems:r,renderSelectedItem:function(t,n){return function(e){return Object(o.jsxs)(ss,{children:[Object(o.jsx)("span",{children:p(e)}),Object(o.jsx)("div",{onClick:function(){return g(t,e,n)},children:Object(o.jsx)(V.a,{icon:v.Gb})})]})}}(e,h),renderCandidateItem:function(t,n){return function(e){var c=s(t,e);return Object(o.jsxs)(us,{onClick:function(){c?g(t,e,n):function(t,n,e){a(t),i(t,n),d(r,n),e()}(t,e,n)},children:[Object(o.jsx)("div",{"data-visible":c,children:Object(o.jsx)(V.a,{icon:v.q})}),Object(o.jsx)("span",{children:p(e)}),Object(o.jsx)("span",{children:f(e)})]})}}(e,h),getKeyOfItem:u,fetchItems:m})},bs=function(t){return t.groupIds=t.groupIds||[]},hs=function(t,n){return t.groupIds.push(n.userGroupId)},vs=function(t,n){return t.groupIds=(t.groupIds||[]).filter((function(t){return t!=n.userGroupId}))},gs=function(t,n){return!!t.groupIds&&-1!==t.groupIds.findIndex((function(t){return t==n.userGroupId}))},js=function(t,n){-1!==t.findIndex((function(t){return t.userGroupId==n.userGroupId}))||t.push(n)},ms=function(t,n){var e=t.findIndex((function(t){return t.userGroupId==n.userGroupId}));-1!==e&&t.splice(e,1)},xs=function(t){return t.userGroupId},Os=function(t){return t.name},ys=function(t){return t.description},Is=function(t){var n=t.label,e=t.holder,r=t.codes,a=t.listGroups,i=t.onDataChanged;return Object(o.jsx)(fs,{label:n,entity:e,codes:r.groups,initPropArray:bs,addItemToProp:hs,removeItemFromProp:vs,isItemPicked:gs,addItemToCodes:js,removeItemFromCodes:ms,getKeyOfItem:xs,getNameOfItem:Os,getMinorNameOfItem:ys,listItems:a,onDataChanged:i})};function ws(){var t=Object(r.a)(["\n\tfont-size: 12px;\n\t&::placeholder {\n\t\tfont-variant: petite-caps;\n\t\topacity: 0.5;\n\t}\n"]);return ws=function(){return t},t}var Cs=Object(s.c)(zt.a)(ws());function Es(){var t=Object(r.a)(["\n\tappearance: none;\n\toutline: none;\n\tpadding: 6px var(--input-indent);\n\tborder: var(--border);\n\tborder-radius: var(--border-radius);\n\tfont-family: var(--font-family);\n\tfont-size: 12px;\n\theight: calc(var(--height) * 3);\n\tline-height: var(--line-height);\n\tcolor: var(--font-color);\n\tbackground-color: transparent;\n\tresize: none;\n\tmargin: 4px 0;\n\ttransition: all 300ms ease-in-out;\n\t&::-webkit-scrollbar {\n\t\tbackground-color: transparent;\n\t\theight: 4px;\n\t\twidth: 4px;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color: var(--scrollbar-background-color);\n\t\tborder-radius: 2px;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--console-favorite-color);\n\t\tborder-radius: 2px;\n\t}\n"]);return Es=function(){return t},t}var Ts=s.c.textarea(Es());function ks(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-self: start;\n\talign-items: center;\n\tfont-variant: petite-caps;\n\tfont-weight: var(--font-demi-bold);\n\theight: 40px;\n"]);return ks=function(){return t},t}var Ns=s.c.div(ks()),As=function(t){return t.topicIds=t.topicIds||[]},Ss=function(t,n){return t.topicIds.push(n.topicId)},Rs=function(t,n){return t.topicIds=(t.topicIds||[]).filter((function(t){return t!=n.topicId}))},Ds=function(t,n){return!!t.topicIds&&-1!==t.topicIds.findIndex((function(t){return t==n.topicId}))},Ps=function(t,n){-1!==t.findIndex((function(t){return t.topicId==n.topicId}))||t.push(n)},_s=function(t,n){var e=t.findIndex((function(t){return t.topicId==n.topicId}));-1!==e&&t.splice(e,1)},Ls=function(t){return t.topicId},Ms=function(t){return t.name},Fs=function(t){return t.description},Gs=function(t){var n=t.label,e=t.space,r=t.codes,a=t.onDataChanged;return Object(o.jsx)(fs,{label:n,entity:e,codes:r.topics,initPropArray:As,addItemToProp:Ss,removeItemFromProp:Rs,isItemPicked:Ds,addItemToCodes:Ps,removeItemFromCodes:_s,getKeyOfItem:Ls,getNameOfItem:Ms,getMinorNameOfItem:Fs,listItems:ot,onDataChanged:a})},Us=function(){var t=Object(a.useState)({groups:[],topics:[]}),n=Object(l.a)(t,2),e=n[0],r=n[1],i=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,o,a,i;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Bc(n.spaceId);case 2:return e=t.sent,o=e.space,a=e.groups,i=e.topics,r({groups:a,topics:i}),t.abrupt("return",{entity:o});case 8:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),c=Hc,s=Wc,d=function(t,n,e){return function(r){t[n]!==r.target.value&&(t[n]=r.target.value,e())}};return Object(o.jsx)(Lc,{title:"Spaces",searchPlaceholder:"Search by space name, topic name, report name, description, etc.",createButtonLabel:"Create Space",entityLabel:"Space",entityImage:Uc,createEntity:function(t){return t||r({groups:[],topics:[]}),{groupIds:[],topicIds:[]}},fetchEntityAndCodes:i,fetchEntityList:c,saveEntity:s,isEntityOnCreate:function(t){return!t.spaceId},renderEntityInList:function(t,n){return Object(o.jsxs)(Nc,{onClick:n(t),children:[Object(o.jsx)("div",{children:t.name}),Object(o.jsx)("div",{children:t.description}),Object(o.jsxs)("div",{children:[Object(o.jsxs)(Vi.b,{tooltip:"Topics Count",center:!0,children:[Object(o.jsx)(V.a,{icon:v.Db}),Object(o.jsx)("span",{children:t.topicCount})]}),Object(o.jsxs)(Vi.b,{tooltip:"Reports Count",center:!0,children:[Object(o.jsx)(V.a,{icon:$t.c}),Object(o.jsx)("span",{children:t.reportCount})]}),Object(o.jsxs)(Vi.b,{tooltip:"In User Groups",center:!0,children:[Object(o.jsx)(V.a,{icon:v.Nb}),Object(o.jsx)("span",{children:t.groupCount})]}),Object(o.jsxs)(Vi.b,{tooltip:"Connections Count",center:!0,children:[Object(o.jsx)(V.a,{icon:v.W}),Object(o.jsx)("span",{children:t.connectionCount})]})]})]},t.spaceId)},getKeyOfEntity:function(t){return t.spaceId},renderEditContent:function(t,n){return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)(Ns,{children:"Space Name:"}),Object(o.jsx)(Cs,{value:t.name||"",onChange:d(t,"name",n)}),Object(o.jsx)(Ns,{children:"Description:"}),Object(o.jsx)(Ts,{value:t.description||"",onChange:d(t,"description",n)}),Object(o.jsx)(Ns,{children:"Topics:"}),Object(o.jsx)(Gs,{label:"Assign Topic",space:t,codes:e,onDataChanged:n}),Object(o.jsx)(Ns,{children:"Groups:"}),Object(o.jsx)(Is,{label:"Grant to Group",holder:t,codes:e,listGroups:$c,onDataChanged:n})]})}})},Hs=function(){return Object(o.jsxs)(Qi.c,{children:[Object(o.jsx)(qi.a,{title:"Tasks"}),Object(o.jsx)("div",{style:{marginTop:50,fontSize:"2em",opacity:.5},children:"Coming soon..."})]})},zs=e.p+"static/media/topic-background.3a001a7b.png",Bs=e(79);function Ws(){var t=Object(r.a)(["\n\tfont-size: 12px;\n"]);return Ws=function(){return t},t}var Ys=Object(s.c)(Bs.a)(Ws()),Vs=e(379),qs=e.n(Vs),Qs=function(){var t=Object(X.a)(J.a.mark((function t(n){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=n&&Array.isArray(n)&&0!==n.length){t.next=3;break}throw console.error("Cannot parse data to factors.",n),new Error("Parsed data is not an array.");case 3:return e=new Map,t.abrupt("return",n.reduce((function(t,n){return Object.keys(n).forEach((function(r){var o=e.get(r);if(o||(o={name:r},e.set(r,o),t.push(o)),o.type!==z.TEXT){var a=n[r];"number"!==typeof a&&isNaN(Number(a))||o.type?"boolean"!==typeof a&&"true"!==a.toLowerCase()&&"false"!==a.toLowerCase()||o.type?o.type=z.TEXT:o.type=z.BOOLEAN:o.type=z.NUMBER}})),t}),[]));case 5:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Js=function(){var t=Object(X.a)(J.a.mark((function t(n){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){qs()(n,{columns:!0,comment:"#",skipEmptyLines:!0,skipLinesWithError:!0,skipLinesWithEmptyValues:!0,trim:!0,autoParse:!0,autoParseDate:!0},(function(n,r){if(n)e(n);else try{t(Qs(r))}catch(o){e(o)}}))})));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Xs=function(){var t=Object(X.a)(J.a.mark((function t(n){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){try{var r=JSON.parse(n);try{t(Qs(r))}catch(o){e(o)}}catch(o){console.group("Error occurred on parse JSON."),console.error(o),console.groupEnd(),e(o)}})));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Ks=e(42),Zs=125,$s=68;function td(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: absolute;\n\topacity: 0;\n\tpointer-events: none;\n\tpadding: 4px 8px;\n\tleft: calc((","px + ","px + ","px + ","px) * -1);\n\theight: ","px;\n\t&[data-max=true] {\n\t\tleft: calc((","px + ","px + ","px + ","px) * -1);\n\t}\n\tbutton {\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tfont-size: 1em;\n\t\tcolor: var(--invert-color);\n\t\tborder-radius: 12px;\n\t\t&:before {\n\t\t\tborder-radius: 12px;\n\t\t}\n\t\t&:first-child {\n\t\t\tbackground-color: var(--console-danger-color);\n\t\t\tmargin-right: calc(var(--margin) / 8);\n\t\t}\n\t\t&:last-child {\n\t\t\tbackground-color: var(--console-primary-color);\n\t\t}\n\t}\n"]);return td=function(){return t},t}function nd(){var t=Object(r.a)(["\n\tpadding-right: calc(var(--margin) / 2);\n\tborder-top-right-radius: var(--border-radius);\n\tborder-bottom-right-radius: var(--border-radius);\n\t&:hover {\n\t\t// buttons\n\t\t> div {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n\t> input {\n\t\tmargin-right: calc(var(--margin) / -2);\n\t\twidth: calc(100% + var(--input-indent) * 2);\n\t}\n"]);return nd=function(){return t},t}function ed(){var t=Object(r.a)(["\n\t&:hover + div {\n\t\t> div {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n"]);return ed=function(){return t},t}function rd(){var t=Object(r.a)(["\n\t&:hover + div + div {\n\t\t> div {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n"]);return rd=function(){return t},t}function od(){var t=Object(r.a)(["\n\tborder-top-left-radius: var(--border-radius);\n\tborder-bottom-left-radius: var(--border-radius);\n\t&:hover + div + div + div {\n\t\t> div {\n\t\t\topacity: 1;\n\t\t\tpointer-events: auto;\n\t\t}\n\t}\n"]);return od=function(){return t},t}function ad(){var t=Object(r.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\theight: ","px;\n\tpadding-left: calc(var(--margin) / 2);\n\ttransition: all 300ms ease-in-out;\n\t//&[data-valid=false] {\n\t//\tbackground-color: var(--console-grid-error-bg-color);\n\t//}\n\t&:nth-child(8n + 5), &:nth-child(8n + 6), &:nth-child(8n + 7), &:nth-child(8n) {\n\t\tbackground-color: var(--pipeline-bg-color);\n\t}\n\t> input {\n\t\theight: ","px;\n\t\twidth: calc(100% + var(--input-indent));\n\t\tborder-color: transparent;\n\t\tmargin-left: calc(var(--input-indent) * -1);\n\t\tcolor: var(--console-font-color);\n\t\t&:hover {\n\t\t\tborder-color: var(--border-color);\n\t\t\tbox-shadow: var(--console-hover-shadow);\n\t\t}\n\t\t&:focus {\n\t\t\tborder-color: var(--console-primary-color);\n\t\t\tcolor: var(--font-color);\n\t\t\tbackground-color: var(--bg-color);\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t\tz-index: 1;\n\t\t}\n\t}\n\t> div[data-widget=dropdown] {\n\t\theight: ","px;\n\t\twidth: calc(100% + var(--input-indent));\n\t\tborder-color: transparent;\n\t\tmargin-left: calc(var(--input-indent) * -1);\n\t\tcolor: var(--console-font-color);\n\t\t&:hover {\n\t\t\tborder-color: var(--border-color);\n\t\t\tbox-shadow: var(--console-hover-shadow);\n\t\t}\n\t\t&:focus {\n\t\t\tborder-color: var(--console-primary-color);\n\t\t\tcolor: var(--font-color);\n\t\t\tbackground-color: var(--bg-color);\n\t\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t\t\tz-index: 1;\n\t\t}\n\t\t&[data-options-visible=true] {\n\t\t\t> div {\n\t\t\t\tborder-color: var(--console-primary-color);\n\t\t\t}\n\t\t}\n\t}\n"]);return ad=function(){return t},t}function id(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: ","px ","px ","px 1fr;\n\tmargin: 0 -4px 0 ","px;\n\tpadding: 0 4px 0 ","px;\n\tmax-height: ","px;\n\toverflow-x: visible;\n\toverflow-y: auto;\n\ttransition: all 300ms ease-in-out;\n\t&[data-max=true] {\n\t\tgrid-template-columns: ","px ","px ","px 1fr;\n\t}\n\t&::-webkit-scrollbar {\n\t\tbackground-color: transparent;\n\t\theight: 4px;\n\t\twidth: 4px;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color: var(--scrollbar-background-color);\n\t\tborder-radius: 2px;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: var(--console-favorite-color);\n\t\tborder-radius: 2px;\n\t}\n"]);return id=function(){return t},t}var cd=s.c.div(id(),150,150,Zs,-68,$s,480,350,200,Zs),sd=s.c.div(ad(),32,26,26),dd=Object(s.c)(sd)(od()),ld=Object(s.c)(sd)(rd()),ud=Object(s.c)(sd)(ed()),pd=Object(s.c)(sd)(nd()),fd=s.c.div(td(),150,150,Zs,$s,32,350,200,Zs,$s);function bd(){var t=Object(r.a)(["\n\tcolor: var(--console-danger-color);\n\ttext-decoration: line-through;\n"]);return bd=function(){return t},t}var hd=s.c.span(bd()),vd=[{value:z.TEXT,label:"Text"},{value:z.NUMBER,label:"Number"},{value:z.BOOLEAN,label:"Boolean"},{value:z.DATETIME,label:"DateTime"},{value:z.ENUM,label:"Enumeration"},{value:z.SEQUENCE,label:"Sequence"},{value:z.OBJECT,label:"Nested Object"},{value:z.ARRAY,label:"Nested Array"}],gd=function(t,n){var e=t.factors.indexOf(n);if(0!==e)for(var r=e-1;r>=0;r--){var o=t.factors[r];if(o.type===z.OBJECT||o.type===z.ARRAY)return o}},jd=function(t){var n=t.topic,e=t.factor,r=t.max,i=t.onDataChanged,c=function(t){return function(n){n.target.value!==e[t]&&(e[t]=n.target.value,i())}},s=function(){var t=Object(X.a)(J.a.mark((function t(n){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.type=n.value,i();case 2:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),d=function(t,n){if(t.type!==B.RAW){var e=n.type;return e===z.OBJECT?{pass:!1,typeOptions:vd.filter((function(t){return t.value!==z.ARRAY})).map((function(t){return t.value!==z.OBJECT?t:{value:z.OBJECT,label:Object(o.jsx)(hd,{children:"Nested Object"})}}))}:e===z.ARRAY?{pass:!1,typeOptions:vd.filter((function(t){return t.value!==z.OBJECT})).map((function(t){return t.value!==z.ARRAY?t:{value:z.ARRAY,label:Object(o.jsx)(hd,{children:"Nested Array"})}}))}:{pass:!0,typeOptions:vd.filter((function(t){var n=t.value;return n!==z.ARRAY&&n!==z.OBJECT}))}}return{pass:!0,typeOptions:vd}}(n,e),l=d.pass,u=d.typeOptions,p=l,f=gd(n,e)?"Dot to append into nested":void 0;return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)(dd,{"data-valid":p,children:Object(o.jsx)(Cs,{value:e.name||"",onChange:function(t){if("."===t.target.value){var r=gd(n,e);if(r){var o=r.name,a=void 0===o?"":o;e.name=a.endsWith(".")?a:"".concat(a,".")}else e.name=t.target.value}else e.name=t.target.value;i()},placeholder:f})}),Object(o.jsx)(ld,{"data-valid":p,children:Object(o.jsx)(Cs,{value:e.label||"",onChange:c("label")})}),Object(o.jsx)(ud,{"data-valid":p,children:Object(o.jsx)(Ys,{value:e.type,options:u,onChange:s})}),Object(o.jsxs)(pd,{"data-valid":p,children:[Object(o.jsx)(Cs,{value:e.description||"",onChange:c("description")}),Object(o.jsxs)(fd,{"data-max":r,children:[Object(o.jsx)(za.a,{ignoreHorizontalPadding:!0,tooltip:"Delete Factor",center:!0,onClick:function(){n.factors=n.factors.filter((function(t){return t!==e})),i()},children:Object(o.jsx)(V.a,{icon:v.Gb})}),Object(o.jsx)(za.a,{ignoreHorizontalPadding:!0,tooltip:"Prepend Factor",center:!0,onClick:function(){var t=n.factors.indexOf(e);n.factors.splice(t,0,{type:z.TEXT}),i()},children:Object(o.jsx)(V.a,{icon:v.V,rotation:270})})]})]})]},e.factorId)};function md(){var t=Object(r.a)(["\n\tgrid-column: span 2;\n\tdisplay: flex;\n\tflex-direction: column;\n\tfont-size: 0.8em;\n\tmargin: 0 -40px 24px ","px;\n\tpadding: 0 40px 0 ","px;\n\toverflow-x: hidden;\n\toverflow-y: hidden;\n\ttransition: all 300ms ease-in-out;\n\n\t&[data-max=true] {\n\t\t// editor in grid layout, 30% 70%, column gap is 32px, table is second column in editor.\n\t\tmargin-left: calc((100% + 32px) / 0.7 * 0.3 * -1 - 32px - ","px);\n\t\tz-index: 1;\n\t\t+ div {\n\t\t\tmargin-left: calc((100% + 32px) / 0.7 * 0.3 * -1 - 32px);\n\t\t}\n\t}\n"]);return md=function(){return t},t}var xd=s.c.div.attrs((function(t){var n=t.expanded,e=t.factorCount;return{style:{height:n?Math.min(556,32*e+76):0}}}))(md(),-68,$s,$s);function Od(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n\theight: ","px;\n\tborder-top: var(--border);\n\ttransition: all 300ms ease-in-out;\n\t> button:not(:first-child) {\n\t\tmargin-left: calc(var(--margin) / 3);\n\t}\n\t> button[data-max=true] > svg {\n\t\ttransform: rotateZ(225deg);\n\t}\n\t> button[data-max=false] > svg {\n\t\ttransform: rotateZ(45deg);\n\t\ttransition: all 300ms ease-in-out;\n\t\tmargin-top: 2px;\n\t\tmargin-right: calc(var(--margin) / 3);\n\t}\n"]);return Od=function(){return t},t}var yd=s.c.div(Od(),32);function Id(){var t=Object(r.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: ","px ","px ","px 1fr;\n\ttransition: all 300ms ease-in-out;\n\t&[data-max=true] {\n\t\tgrid-template-columns: ","px ","px ","px 1fr;\n\t}\n\t> div {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: ","px;\n\t\tborder-bottom: var(--border);\n\t\tpadding-left: calc(var(--margin) / 2);\n\t\tfont-variant: petite-caps;\n\t\tfont-weight: var(--font-bold);\n\t}\n"]);return Id=function(){return t},t}var wd=s.c.div(Id(),150,150,Zs,350,200,Zs,28);function Cd(){var t=Object(r.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-self: start;\n\tfont-size: 0.8em;\n\tfont-variant: petite-caps;\n\tfont-weight: var(--font-bold);\n\theight: 24px;\n\tborder-radius: 12px;\n\tcolor: var(--invert-color);\n\tbackground-color: var(--console-primary-color);\n\tpadding: 0 calc(var(--margin) / 3) 0 calc(var(--margin) / 2);\n\tcursor: pointer;\n\t&:hover {\n\t\tbox-shadow: var(--console-primary-hover-shadow);\n\t}\n\t&[data-expanded=true] {\n\t\t> svg {\n\t\t\ttransform: rotateZ(360deg);\n\t\t}\n\t}\n\t> span {\n\t\tposition: relative;;\n\t\tpadding-right: calc(var(--margin) / 3);\n\t\t&:after {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\ttop: 10%;\n\t\t\tright: 0;\n\t\t\twidth: 1px;\n\t\t\theight: 80%;\n\t\t\tbackground-color: var(--invert-color);\n\t\t\topacity: 0.7;\n\t\t}\n\t}\n\t> svg {\n\t\tmargin-left: calc(var(--margin) / 3);\n\t\ttransition: all 300ms ease-in-out;\n\t}\n"]);return Cd=function(){return t},t}var Ed=s.c.div(Cd()),Td=function(t){var n=t.topic,e=t.onDataChanged,r=Object(Ks.b)(),i=ic().changeBackgroundPosition,c=Object(a.useState)(!1),s=Object(l.a)(c,2),d=s[0],u=s[1],p=Object(a.useState)(!1),f=Object(l.a)(p,2),b=f[0],h=f[1],g=n.factors.length,j=0===g?"No Factor Defined":1===g?"1 Factor":"".concat(g," Factors");return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsxs)(Ed,{onClick:function(){return u(!d)},"data-expanded":d,children:[Object(o.jsx)("span",{children:j}),Object(o.jsx)(V.a,{icon:d?v.y:v.I})]}),Object(o.jsxs)(xd,{expanded:d,factorCount:g,"data-max":b,children:[Object(o.jsxs)(wd,{"data-max":b,children:[Object(o.jsx)("div",{children:"Name"}),Object(o.jsx)("div",{children:"Label"}),Object(o.jsx)("div",{children:"Type"}),Object(o.jsx)("div",{children:"Description"})]}),Object(o.jsx)(cd,{"data-max":b,children:n.factors.map((function(t){return t.factorId||(t.factorId=Object(H.a)()),Object(o.jsx)(jd,{topic:n,factor:t,max:b,onDataChanged:e},t.factorId)}))}),Object(o.jsxs)(yd,{children:[Object(o.jsxs)(Pt.c,{onClick:function(){n.factors.push({type:z.TEXT}),e()},children:[Object(o.jsx)(V.a,{icon:v.jb}),Object(o.jsx)("span",{children:"Append Factor"})]}),Object(o.jsxs)(Pt.c,{onClick:function(){h(!b),i(b?"left":"top 50px left")},"data-max":b,children:[Object(o.jsx)(V.a,{icon:b?v.y:v.I}),Object(o.jsx)("span",{children:b?"Shrink Table":"Expand Table"})]}),Object(o.jsxs)(Pt.d,{onClick:function(){var t=document.createElement("input");t.type="file",t.multiple=!1,t.accept=".txt,.csv,.json",t.onchange=function(t){return Object(X.a)(J.a.mark((function o(){var a,i,c,s;return J.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t.files&&0!==t.files.length){o.next=2;break}return o.abrupt("return");case 2:if(a=t.files.item(0)){o.next=5;break}return o.abrupt("return");case 5:i=a.name,o.t0=!0,o.next=o.t0===i.endsWith(".txt")||o.t0===i.endsWith(".csv")?9:o.t0===i.endsWith(".json")?17:o.t0===i.endsWith(".xml")?25:26;break;case 9:return o.next=11,a.text();case 11:return c=o.sent,o.next=14,Js(c);case 14:return n.factors=o.sent,e(),o.abrupt("break",27);case 17:return o.next=19,a.text();case 19:return s=o.sent,o.next=22,Xs(s);case 22:return n.factors=o.sent,e(),o.abrupt("break",27);case 25:return o.abrupt("break",27);case 26:r.show();case 27:case"end":return o.stop()}}),o)})))}(t),t.click()},children:[Object(o.jsx)(V.a,{icon:v.Kb}),Object(o.jsx)("span",{children:"Import from File"})]})]})]})]})},kd=[{value:B.RAW,label:"Raw"},{value:B.DISTINCT,label:"Distinct"},{value:B.AGGREGATE,label:"Aggregate"},{value:B.TIME,label:"Time Aggregate"},{value:B.RATIO,label:"Ratio"},{value:B.NOT_DEFINED,label:"Not Defined"}],Nd=function(t,n){var e=function(e){return function(r){t[e]!==r.target.value&&(t[e]=r.target.value,n())}},r=function(){var e=Object(X.a)(J.a.mark((function e(r){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.type=r.value,n();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)(Ns,{children:"Topic Code:"}),Object(o.jsx)(Cs,{value:t.code||"",onChange:e("code")}),Object(o.jsx)(Ns,{children:"Topic Name:"}),Object(o.jsx)(Cs,{value:t.name||"",onChange:e("name")}),Object(o.jsx)(Ns,{children:"Topic Type:"}),Object(o.jsx)(Ys,{value:t.type,options:kd,onChange:r}),Object(o.jsx)(Ns,{children:"Description:"}),Object(o.jsx)(Ts,{value:t.description||"",onChange:e("description")}),Object(o.jsx)(Ns,{children:"Factors:"}),Object(o.jsx)(Td,{topic:t,onDataChanged:n})]})},Ad=function(){var t=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,r;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,at(n.topicId);case 2:return e=t.sent,r=e.topic,t.abrupt("return",{entity:r});case 5:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),n=tt,e=it;return Object(o.jsx)(Lc,{title:"Topics",searchPlaceholder:"Search by topic name, factor name, description, etc.",createButtonLabel:"Create Topic",entityLabel:"Topic",entityImage:zs,createEntity:function(){return{type:B.DISTINCT,factors:[]}},fetchEntityAndCodes:t,fetchEntityList:n,saveEntity:e,isEntityOnCreate:function(t){return!t.topicId},renderEntityInList:function(t,n){return Object(o.jsxs)(Nc,{onClick:n(t),children:[Object(o.jsx)("div",{children:t.name}),Object(o.jsx)("div",{children:t.description}),Object(o.jsxs)("div",{children:[Object(o.jsxs)(Vi.b,{tooltip:"Factors Count",center:!0,children:[Object(o.jsx)(V.a,{icon:v.X}),Object(o.jsx)("span",{children:t.factorCount})]}),Object(o.jsxs)(Vi.b,{tooltip:"In User Groups",center:!0,children:[Object(o.jsx)(V.a,{icon:v.Nb}),Object(o.jsx)("span",{children:t.groupCount})]}),Object(o.jsxs)(Vi.b,{tooltip:"In Spaces",center:!0,children:[Object(o.jsx)(V.a,{icon:v.N}),Object(o.jsx)("span",{children:t.spaceCount})]}),Object(o.jsxs)(Vi.b,{tooltip:"In Reports",center:!0,children:[Object(o.jsx)(V.a,{icon:$t.c}),Object(o.jsx)("span",{children:t.reportCount})]})]})]},t.topicId)},getKeyOfEntity:function(t){return t.topicId},renderEditContent:Nd})},Sd=e.p+"static/media/user-background.3c1eb5e6.png",Rd=e(134);function Dd(){var t=Object(r.a)(["\n\t> div:nth-child(2) {\n\t\tposition: absolute;\n\t\ttop: calc(var(--margin) / 2);\n\t\tright: var(--margin);\n\t\tmargin-top: 0;\n\t\tfont-size: 1.3em;\n\t\topacity: 1;\n\t\tmin-height: unset;\n\t\tline-height: unset;\n\t\ttransform: unset;\n\t}\n\t> div:nth-child(3) {\n\t\tmargin-top: var(--margin);\n\t}\n"]);return Dd=function(){return t},t}var Pd=Object(s.c)(Nc)(Dd()),_d=function(){var t=Object(a.useState)({groups:[]}),n=Object(l.a)(t,2),e=n[0],r=n[1],i=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,o,a;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Qc(n.userId);case 2:return e=t.sent,o=e.user,a=e.groups,r({groups:a}),t.abrupt("return",{entity:o});case 7:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),c=Vc,s=Jc,d=function(t,n,e){return function(r){t[n]!==r.target.value&&(t[n]=r.target.value,e())}};return Object(o.jsx)(Lc,{title:"Users",searchPlaceholder:"Search by user name, group name, etc.",createButtonLabel:"Create User",entityLabel:"User",entityImage:Sd,createEntity:function(t){return t||r({groups:[]}),{groupIds:[]}},fetchEntityAndCodes:i,fetchEntityList:c,saveEntity:s,isEntityOnCreate:function(t){return!t.userId},renderEntityInList:function(t,n){return Object(o.jsxs)(Pd,{onClick:n(t),children:[Object(o.jsx)("div",{children:t.name}),Object(o.jsx)(Rd.a,{name:t.name}),Object(o.jsxs)("div",{children:[Object(o.jsxs)(Vi.b,{tooltip:"Spaces Assigned",center:!0,children:[Object(o.jsx)(V.a,{icon:v.N}),Object(o.jsx)("span",{children:t.spaceCount})]}),Object(o.jsxs)(Vi.b,{tooltip:"Topics Available",center:!0,children:[Object(o.jsx)(V.a,{icon:v.Db}),Object(o.jsx)("span",{children:t.topicCount})]}),Object(o.jsxs)(Vi.b,{tooltip:"Reports Created",center:!0,children:[Object(o.jsx)(V.a,{icon:$t.c}),Object(o.jsx)("span",{children:t.reportCount})]})]})]},t.userId)},getKeyOfEntity:function(t){return t.userId},renderEditContent:function(t,n){return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)(Ns,{children:"User Name:"}),Object(o.jsx)(Cs,{value:t.name||"",onChange:d(t,"name",n)}),Object(o.jsx)(Ns,{children:"Nick Name:"}),Object(o.jsx)(Cs,{value:t.nickName||"",onChange:d(t,"nickName",n)}),Object(o.jsx)(Ns,{children:"Groups:"}),Object(o.jsx)(Is,{label:"Join Group",holder:t,codes:e,listGroups:qc,onDataChanged:n})]})}})},Ld=e.p+"static/media/user-group-background.93b41542.png",Md=function(t){return t.spaceIds=t.spaceIds||[]},Fd=function(t,n){return t.spaceIds.push(n.spaceId)},Gd=function(t,n){return t.spaceIds=(t.spaceIds||[]).filter((function(t){return t!=n.spaceId}))},Ud=function(t,n){return!!t.spaceIds&&-1!==t.spaceIds.findIndex((function(t){return t==n.spaceId}))},Hd=function(t,n){-1!==t.findIndex((function(t){return t.spaceId==n.spaceId}))||t.push(n)},zd=function(t,n){var e=t.findIndex((function(t){return t.spaceId==n.spaceId}));-1!==e&&t.splice(e,1)},Bd=function(t){return t.spaceId},Wd=function(t){return t.name},Yd=function(t){return t.description},Vd=function(t){var n=t.group,e=t.codes,r=t.onDataChanged;return Object(o.jsx)(fs,{label:"Assign Space",entity:n,codes:e.spaces,initPropArray:Md,addItemToProp:Fd,removeItemFromProp:Gd,isItemPicked:Ud,addItemToCodes:Hd,removeItemFromCodes:zd,getKeyOfItem:Bd,getNameOfItem:Wd,getMinorNameOfItem:Yd,listItems:zc,onDataChanged:r})},qd=function(t){return t.userIds=t.userIds||[]},Qd=function(t,n){return t.userIds.push(n.userId)},Jd=function(t,n){return t.userIds=(t.userIds||[]).filter((function(t){return t!=n.userId}))},Xd=function(t,n){return!!t.userIds&&-1!==t.userIds.findIndex((function(t){return t==n.userId}))},Kd=function(t,n){-1!==t.findIndex((function(t){return t.userId==n.userId}))||t.push(n)},Zd=function(t,n){var e=t.findIndex((function(t){return t.userId==n.userId}));-1!==e&&t.splice(e,1)},$d=function(t){return t.userId},tl=function(t){return t.name},nl=function(t){return t.nickName},el=function(t){var n=t.group,e=t.codes,r=t.onDataChanged;return Object(o.jsx)(fs,{label:"Include User",entity:n,codes:e.users,initPropArray:qd,addItemToProp:Qd,removeItemFromProp:Jd,isItemPicked:Xd,addItemToCodes:Kd,removeItemFromCodes:Zd,getKeyOfItem:$d,getNameOfItem:tl,getMinorNameOfItem:nl,listItems:Zc,onDataChanged:r})},rl=function(){var t=Object(a.useState)({users:[],spaces:[]}),n=Object(l.a)(t,2),e=n[0],r=n[1],i=function(){var t=Object(X.a)(J.a.mark((function t(n){var e,o,a,i;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xc(n.userGroupId);case 2:return e=t.sent,o=e.group,a=e.users,i=e.spaces,r({users:a,spaces:i}),t.abrupt("return",{entity:o});case 8:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),c=Yc,s=Kc,d=function(t,n,e){return function(r){t[n]!==r.target.value&&(t[n]=r.target.value,e())}};return Object(o.jsx)(Lc,{title:"User Groups",searchPlaceholder:"Search by group name, user name, description, etc.",createButtonLabel:"Create User Group",entityLabel:"User Group",entityImage:Ld,createEntity:function(t){return t||r({users:[],spaces:[]}),{userIds:[],spaceIds:[]}},fetchEntityAndCodes:i,fetchEntityList:c,saveEntity:s,isEntityOnCreate:function(t){return!t.userGroupId},renderEntityInList:function(t,n){return Object(o.jsxs)(Nc,{onClick:n(t),children:[Object(o.jsx)("div",{children:t.name}),Object(o.jsx)("div",{children:t.description}),Object(o.jsxs)("div",{children:[Object(o.jsxs)(Vi.b,{tooltip:"Users Count",center:!0,children:[Object(o.jsx)(V.a,{icon:v.Nb}),Object(o.jsx)("span",{children:t.userCount})]}),Object(o.jsxs)(Vi.b,{tooltip:"Spaces Assigned",center:!0,children:[Object(o.jsx)(V.a,{icon:v.N}),Object(o.jsx)("span",{children:t.spaceCount})]}),Object(o.jsxs)(Vi.b,{tooltip:"Topics Available",center:!0,children:[Object(o.jsx)(V.a,{icon:v.Db}),Object(o.jsx)("span",{children:t.topicCount})]}),Object(o.jsxs)(Vi.b,{tooltip:"Reports Created",center:!0,children:[Object(o.jsx)(V.a,{icon:$t.c}),Object(o.jsx)("span",{children:t.reportCount})]})]})]},t.userGroupId)},getKeyOfEntity:function(t){return t.userGroupId},renderEditContent:function(t,n){return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)(Ns,{children:"Group Name:"}),Object(o.jsx)(Cs,{value:t.name||"",onChange:d(t,"name",n)}),Object(o.jsx)(Ns,{children:"Description:"}),Object(o.jsx)(Ts,{onChange:d(t,"description",n),value:t.description||""}),Object(o.jsx)(Ns,{children:"Spaces:"}),Object(o.jsx)(Vd,{group:t,codes:e,onDataChanged:n}),Object(o.jsx)(Ns,{children:"Users:"}),Object(o.jsx)(el,{group:t,codes:e,onDataChanged:n})]})}})},ol=e(240),al=e(92),il=e(70);function cl(){var t=Object(r.a)(["\n\tdisplay               : grid;\n\tposition              : relative;\n\tflex-grow             : 1;\n\tgrid-template-columns : repeat(12, 1fr);\n\tgrid-column-gap       : var(--margin);\n\tgrid-row-gap          : var(--margin);\n\toverflow              : auto;\n\tpadding               : calc(var(--margin) / 2) var(--margin) var(--margin);\n\t&::-webkit-scrollbar {\n\t\tbackground-color : transparent;\n\t\theight           : 4px;\n\t\twidth            : 4px;\n\t}\n\t&::-webkit-scrollbar-track {\n\t\tbackground-color : var(--scrollbar-background-color);\n\t\tborder-radius    : 2px;\n\t}\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color : var(--console-favorite-color);\n\t\tborder-radius    : 2px;\n\t}\n\t> div {\n\t\tposition : relative;\n\t\theight   : 400px;\n\t\t&:nth-child(2n + 1) {\n\t\t\tgrid-column : 1 / span 6;\n\t\t}\n\t\t&:nth-child(2n) {\n\t\t\tgrid-column : 7 / span 6;\n\t\t}\n\t\t&:last-child {\n\t\t\theight      : var(--margin);\n\t\t\tmin-height  : var(--margin);\n\t\t\tgrid-column : 1 / span 12;\n\t\t}\n\t\t> div {\n\t\t\twidth  : 100%;\n\t\t\theight : 100%;\n\t\t}\n\t}\n"]);return cl=function(){return t},t}function sl(){var t=Object(r.a)(["\n\tfont-size   : 3em;\n\tfont-family : var(--console-title-font-family);\n\tflex-grow   : 1;\n\tdisplay     : flex;\n\tpadding     : 0 var(--margin);\n\t> button {\n\t\tmargin-left : calc(var(--margin) / 2);\n\t\tfont-size   : 0.7em;\n\t\tpadding     : 0 calc(var(--margin) / 2);\n\t}\n"]);return sl=function(){return t},t}function dl(){var t=Object(r.a)(["\n\tdisplay       : flex;\n\talign-items   : center;\n\tborder-bottom : var(--border);\n\t> button {\n\t\talign-self : flex-end;\n\t\twidth      : 28px;\n\t\theight     : 28px;\n\t\tfont-size  : 1.2em;\n\t}\n"]);return dl=function(){return t},t}function ll(){var t=Object(r.a)(["\n\tdisplay        : flex;\n\tflex-direction : column;\n\twidth          : 100%;\n"]);return ll=function(){return t},t}var ul=s.c.div(ll()),pl=s.c.div(dl()),fl=s.c.div(sl()),bl=s.c.div(cl()),hl=function(t){},vl=function(){var t=Object(X.a)(J.a.mark((function t(n){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",void 0);case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),gl=function(t){var n=t.containerRef,e=function(t,n,e,r){var o={spaceId:"demo-admin-dashboard",name:"Demo Admin Dashboard Space",topics:[{topicId:"1",code:"top-slow-sql",name:"Top Slow SQL",factors:[{factorId:"1",name:"sql",label:r,type:il.g.TEXT},{factorId:"2",name:"time",label:"Time",type:il.g.NUMBER}]}],topicRelations:[]},a={chartId:n,name:e,type:il.e.BAR,indicators:[{topicId:"1",factorId:"2",aggregator:il.d.NONE,alias:"Execution(ms)"}],dimensions:[{topicId:"1",factorId:"1",alias:"Topic"}],rect:{top:-1,left:-1,width:-1,height:-1}},i={subjectId:t,name:"Top Slow SQL",topicCount:1,graphicsCount:1,lastVisitTime:Lt()().format("YYYY-MM-DD HH:mm:ss"),createdAt:Lt()().format("YYYY-MM-DD HH:mm:ss"),dataset:{filters:[],columns:[],joins:[]},graphics:[a]};return{connectedSpace:{connectId:"demo-admin-dashboard",type:il.f.PRIVATE,lastVisitTime:Lt()().format("YYYY-MM-DD HH:mm:ss"),groups:[],subjects:[i],spaceId:o.spaceId,name:o.name,topics:o.topics,topicRelations:o.topicRelations},space:o,subject:i,chart:a}}(t.subjectId,t.chartId,t.chartName,t.dimensionName),r=e.connectedSpace,a=e.space,i=e.subject,c=e.chart;return Object(o.jsx)("div",{children:Object(o.jsx)(al.a,{space:r,subject:i,doSave:vl,children:Object(o.jsx)(ol.a,{containerRef:n,space:a,subject:i,chart:c,locked:!0,relative:!0,settings:!1,onDeleteChart:hl})})})},jl=function(){var t=Object(a.useRef)(null);return Object(o.jsxs)(ul,{children:[Object(o.jsx)(pl,{children:Object(o.jsx)(fl,{children:Object(o.jsx)("span",{children:"Aerial View for Administrator"})})}),Object(o.jsxs)(bl,{ref:t,children:[Object(o.jsx)(gl,{containerRef:t,subjectId:"SYS_001",chartId:"TOP_10_SQL",chartName:"Top Slow SQL",dimensionName:"SQL"}),Object(o.jsx)(gl,{containerRef:t,subjectId:"SYS_001",chartId:"TOP_10_SLOW_PIPELINE",chartName:"Top Slow Pipeline",dimensionName:"Pipeline"}),Object(o.jsx)("div",{})]})]})};function ml(){var t=Object(r.a)(["\n\tdisplay                        : flex;\n\tcolor                          : var(--console-font-color);\n\t--toggle-negative-slider-color : var(--border-color);\n\t--toggle-positive-bg-color     : var(--console-primary-color);\n\t--toggle-negative-bg-color     : transparent;\n\t--toggle-positive-border-color : var(--console-primary-color);\n\t--toggle-negative-border-color : var(--border-color);\n\t> main {\n\t\tflex-grow  : 1;\n\t\tdisplay    : flex;\n\t\theight     : 100vh;\n\t\toverflow-y : scroll;\n\t}\n\t> div[data-widget='console-favorite-container'][data-pinned=true] + main {\n\t\tmargin-top : var(--console-favorite-pinned-height);\n\t\theight     : calc(100vh - var(--console-favorite-pinned-height));\n\t}\n"]);return ml=function(){return t},t}var xl=s.c.div.attrs({"data-widget":"console-container"})(ml());n.default=function(){return Object(o.jsx)(h,{children:Object(o.jsxs)(xl,{children:[Object(o.jsx)(F,{}),Object(o.jsx)("main",{children:Object(o.jsxs)(c.d,{children:[Object(o.jsx)(c.b,{path:d.a.ADMIN_HOME,children:Object(o.jsx)(jl,{})}),Object(o.jsx)(c.b,{path:d.a.ADMIN_TOPICS,children:Object(o.jsx)(Ad,{})}),Object(o.jsx)(c.b,{path:d.a.ADMIN_REPORTS,children:Object(o.jsx)(Gc,{})}),Object(o.jsx)(c.b,{path:d.a.ADMIN_SPACES,children:Object(o.jsx)(Us,{})}),Object(o.jsx)(c.b,{path:d.a.ADMIN_PIPELINE,children:Object(o.jsx)(Bi,{})}),Object(o.jsx)(c.b,{path:d.a.ADMIN_USER_GROUPS,children:Object(o.jsx)(rl,{})}),Object(o.jsx)(c.b,{path:d.a.ADMIN_USERS,children:Object(o.jsx)(_d,{})}),Object(o.jsx)(c.b,{path:d.a.ADMIN_TASKS,children:Object(o.jsx)(Hs,{})}),Object(o.jsx)(c.b,{path:"*",children:Object(o.jsx)(c.a,{to:d.a.ADMIN_HOME})})]})})]})})}}}]);
//# sourceMappingURL=admin.0e89ad1a.chunk.js.map